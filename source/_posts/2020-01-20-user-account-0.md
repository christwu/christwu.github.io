---
layout: post
title: 账号功能需求
category: 项目开发经验
tags:
- 账号
---
本文提出了一个假想的、通用的需求，因此部分功能需求之间可能存在冲突。不考虑这方面问题的话，看看你的系统能做到什么程度？
<!-- more --> 

# 用户注册
* 多种注册途径：用户名、邮箱、手机号、证件号等
    * 通过邮箱、手机号等途径验证确实由本人注册账号
    * 考虑前人已注册账号，且手机销号，而后人复得此手机号，想要注册账号时该如何处理
* 通过第三方登录自动注册：支付宝、微信、QQ、微博等
* 账号合并
* 实名核验
    * 通过证件、手机核验身份
    * 通过证件、人脸识别核验身份
    * 借助支付宝等实名核验接口核验身份
    * 用户自行上传证件信息，进行人工审核
* 限制注册频率以防刷号
* 防止不当用户名

# 用户登录
## 登录
* 密码/验证码登录
* 单点登录
* 第三方登录：支付宝、微信等
* 双重身份认证（2FA）
    * 手机短信
    * 邮件
    * Google Authenticator
* 账号安全
    * 多次登录失败，锁定IP或账号，防止暴力破解
    * 非常用地点登录，进行身份验证
    * 未完成实名注册，或使用验证码登录等情况，仅开启有限功能
    * 防止机器人登录 / 提供机器人API接口
* 会话
    * 记住当前会话
    * 会话自动过期
    * 会话互斥：一次只允许在一个地点登录，其他地点会话自动注销
* 忘记密码
    * 进行身份核验、手机或邮箱验证，验证通过后发送重置链接

## 用户权限
* 用户角色：个人/企业，普通用户/会员等
* 最小权限原则
* 根据不同角色分配不同功能

# 用户注销
* 可指定时间后自动注销
* 允许一次性注销所有设备上的全部会话
* 列举出用户正在登录的设备，允许注销特定设备上的会话

# 用户管理
## 密码管理
* 密码使用高安全性的加密算法来加密存储
* 修改密码
* 在一定时间之后强制修改密码
* 禁止用户重新设置成上次用过的密码

## 个人配置
* 邮箱、手机、微信、QQ、支付宝、微博等账号解绑 / 重新绑定
    * 更换邮箱、手机等，给前一账号留出一些时间，以便（如果是恶意操作则）撤回
* 查询登录记录
* 进行敏感操作之前，再次验证用户账号密码
* 查询敏感操作记录
* 防止其他人非法访问个人信息

## 用户删除
* 允许用户自行删除用户
* 自动锁定 / 删除长期不活动的账号

## 系统管理员的管理
* 新建、删除用户
* 启用、禁用用户
* 用户权限管理
* 用户审核

# 非功能性需求
* 统一账号体系：考虑多个系统如何建设统一账号体系
* 审计：注册、登录、注销、重置密码等操作可审计，包含日期、时间、用户、资源等信息
* 性能优化：分库、分表处理
