<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>infNaN</title>
  
  
  <link href="https://plusnan.me/rss.xml" rel="self"/>
  
  <link href="https://plusnan.me/"/>
  <updated>2021-02-17T03:10:40.715Z</updated>
  <id>https://plusnan.me/</id>
  
  <author>
    <name>infNaN</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>买房避坑指南（六）：不要买公寓！</title>
    <link href="https://plusnan.me/2020/12/28/buy-house-6/"/>
    <id>https://plusnan.me/2020/12/28/buy-house-6/</id>
    <published>2020-12-27T16:00:00.000Z</published>
    <updated>2021-02-17T03:10:40.715Z</updated>
    
    <content type="html"><![CDATA[<p>有些人实在没钱，凑住宅钱费劲，看到公寓价格相对便宜，想买套公寓过渡。有些女性因为属于不婚族，或者害怕被男方抛弃，也想出于防御目的买一套公寓备用。</p><p>本文在此提醒：无论如何也不要买公寓！</p><a id="more"></a><h1 id="公寓的坑"><a href="#公寓的坑" class="headerlink" title="公寓的坑"></a>公寓的坑</h1><p>公寓有很多坑，每一个坑都是性质恶劣的坑，所以无论置业顾问说得再动听，你也不要头脑一热就去买公寓。</p><h2 id="产权问题"><a href="#产权问题" class="headerlink" title="产权问题"></a>产权问题</h2><p>商住公寓的产权只有四十年，虽然四十年后政府应该不会直接把你轰出去，而是要求让你交齐土地出让金，但是用不了四年你就会发现，房产证上写着“公寓”二字，你无法落户（备注：有些城市能落）。</p><p>如果有孩子，孩子也会因为没有户口，不能上学！有人说能上学？那应该是通过各种合法和非法手段争取来的，不太可能是直接拿到入学资格。</p><p>需要补充一下，如果你买的是普通住宅，房产证上写的是“居住公寓”四字，那就是普通的住宅，只是采光很差，说难听点就是暴露在地面上的地下室。这种房子不在本文讨论范围内。</p><h2 id="贷款困难"><a href="#贷款困难" class="headerlink" title="贷款困难"></a>贷款困难</h2><p>公寓的性质是商业，因此贷款要比普通住宅困难。例如：</p><ul><li>不能使用公积金贷款。</li><li>首付比例比普通住宅高，撑死也只能贷到五成房款。</li><li>贷款需要在10年内还清。</li></ul><p>仔细算一下可以发现，虽然公寓总价便宜，但是跟住宅比，月供要比普通住宅高，再加上其他不利因素，不仅不省钱，还要产生金钱偿还不上的损失。</p><h2 id="法律风险"><a href="#法律风险" class="headerlink" title="法律风险"></a>法律风险</h2><p>商住公寓毕竟还是一个合法的东西，虽然有各种坑，至少还能办得出房产证。</p><p>如果是“商改住”，即商业用地改为住宅，可能这已经是违规了，后面政府出台什么政策，你很容易就变成了非法分子。倘若是用不当方式改的（例如按商业写字楼建设，等政府验收通过之后再进行改造），后续可能连房产证都办不出来，一旦发生纠纷，打官司也赢不了。</p><p>有些城市的限购限贷政策中，商住公寓也会被计入限购限贷数量当中。有置换需求的务必要留意有关政策。</p><h2 id="被套牢"><a href="#被套牢" class="headerlink" title="被套牢"></a>被套牢</h2><p>随便上网上搜索一下，就可以发现投资公寓的收益实在不好。就算不投资只居住，也会有以下两大问题：</p><ul><li>转手费用高！<ul><li>因为是商业性质，转手时要产生较高的交易税。通过中介买卖，你还要额外再付中介费。</li></ul></li><li>卖不掉！<ul><li>假如差不多攒够钱，急需把公寓换成现金时，你会发现你这套公寓换不出钱。要知道有些城市二手住宅都不一定好卖，甚至得赔钱卖，缺点更多的公寓也不太有理由比普通住宅好卖。</li></ul></li></ul><p>所以把钱放到银行存定期也比直接扔给公寓靠谱，虽然放着会贬值，需要取钱的时候也会损失些利息，但至少能随时取出来，不像公寓把钱扔进去就套牢了。</p><h2 id="其他问题"><a href="#其他问题" class="headerlink" title="其他问题"></a>其他问题</h2><p>相比于以上各项，下面都是些小问题了：</p><ul><li>户型问题：不通透。</li><li>房屋质量问题：例如装修质量不好，Loft高度不够等。住宅有的维权，公寓也可以有。</li><li>挤：当你早上上班的时候，你就会感受到，你不光要在公司的写字楼挤电梯，刚出家门就要跟着一大群人挤电梯，一万人挤那三四部电梯，你甚至可能会感觉爬楼梯（就是趴在地上那个爬）都比坐电梯快。</li><li>贵：公寓水电费按商业水电收费，价格是普通水电的两三倍。</li><li>没有燃气：有燃气？那应该用不正当手段装上去的，给消防部门打电话举报一下就会被拆了。</li><li>如果物业管理差劲，你还会发现，你永远不知道公寓的邻居是什么人。如果是美容美发还好，要是KTV、会所、酒店，或者是XXOO的场所……</li></ul><h1 id="如果还是想买一套？"><a href="#如果还是想买一套？" class="headerlink" title="如果还是想买一套？"></a>如果还是想买一套？</h1><p>关于公寓的坑，本文只是简单总结，写得很粗，如果还是想购买，请找一些写得更深入的分析文章来决策。</p><p>对于缺钱的人来说，公寓不能买，只能租。租别人的公寓，不仅少了大量损失，还能帮房东少赔点钱（注意这里特意没使用“挣钱”二字），一举两得。</p><p>对于可能会进入长期单身状态的人来说，如果你还没到被轰走的时候，请把买公寓的钱放到银行里，实在到了被赶出家门的时候可以先临时找个地方租，然后再好好规划一下人生，仔细了解公寓的坑之后再掏钱出来买公寓。</p><p>对于不差钱的人来说，公寓可以买来出租，但需要精细地计算一下，否则很容易得不偿失，也可以找一套好一点的公寓拿来当落脚点，只不过这种公寓价格通常是按一套多少钱来算，普通人根本玩不起。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><strong>不要买公寓！</strong></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;有些人实在没钱，凑住宅钱费劲，看到公寓价格相对便宜，想买套公寓过渡。有些女性因为属于不婚族，或者害怕被男方抛弃，也想出于防御目的买一套公寓备用。&lt;/p&gt;
&lt;p&gt;本文在此提醒：无论如何也不要买公寓！&lt;/p&gt;</summary>
    
    
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南（五）：关于合同</title>
    <link href="https://plusnan.me/2020/12/26/buy-house-5/"/>
    <id>https://plusnan.me/2020/12/26/buy-house-5/</id>
    <published>2020-12-25T16:00:00.000Z</published>
    <updated>2021-02-17T15:11:26.454Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要列举合同中一些坑。虽然一般情况下购买者很难在短时间内把整个合同条文都理解清楚，而且即便知道合同内容不合理，也无法与开发商就合同内容进行谈判，但我们仍然有必要清楚我们将来会如何被开发商坑骗。<br><a id="more"></a></p><h1 id="合同效力"><a href="#合同效力" class="headerlink" title="合同效力"></a>合同效力</h1><p>买房当然要签合同，而且是《商品房买卖合同》，不是认购书或其他材料！</p><p>合同是有法律效力的，一旦签字画押，后续打官司就要以此为准，所以别看都不看就签字。就算置业顾问催得再紧，也要先把合同条款研究明白再签字，虽然研究明白不一定能占便宜，但研究不明白将来发生纠纷你肯定吃亏。</p><p>任何广告宣传，或者置业顾问口头约定，只要没有在合同内文中体现，那都是无效的。</p><p>但是有些情况下合同本身也会无效。例如在五证不全（五证指《建设用地规划许可证》、《建设工程规划许可证》、《建筑工程施工许可证》、《国有土地使用证》和《商品房预售（或销售）许可证》）情况下买房，签订的合同是没有法律效力的，打官司也不会赢。</p><p>有些开发商会要求购房者签订阴阳合同以提高优惠、规避政策限制，也就是签两份不同的合同，其中一份是应付用的、形式上的合同，另一份是反映真实情况的合同。在发生纠纷时，阴阳合同效力要由法院根据实际情况进行判断，不能保证阴阳合同一定有效力或没有效力，所以在发生纠纷时就很难把事情说清楚了。</p><h1 id="合同内容"><a href="#合同内容" class="headerlink" title="合同内容"></a>合同内容</h1><p>合同正文通常采用政府规定的模板编写，需要政府审核，不能随意更改，但开发商通常会让购房者签订更厚的补充协议，而且补充协议的内容是可以随意制定的。合同正文通常不会有问题，但开发商可以在补充协议中规避自己的责任，甚至将合同正文中相对公平的内容给推翻掉，因此补充协议内容不仅不能忽视，还要专门花些时间去阅读理解。</p><p>在合同正文和补充条款中，应特别留意以下内容：</p><h2 id="支付方式、期限、违约责任"><a href="#支付方式、期限、违约责任" class="headerlink" title="支付方式、期限、违约责任"></a>支付方式、期限、违约责任</h2><ul><li>如何支付？</li><li>总共多少钱？需要支付多少钱？（注意：通常情况下你已经交过定金）</li><li>支付期限是几月几号？</li><li>如果因为个人原因，未能及时批出贷款，或者被拒绝审批贷款，后果如何？能否更换支付方式？能否延期？延期违约金如何？折算成人民币是多少钱？</li></ul><p>计算违约金时要核实好是不是以全款价格为基准。</p><h2 id="交房时间与延期责任"><a href="#交房时间与延期责任" class="headerlink" title="交房时间与延期责任"></a>交房时间与延期责任</h2><ul><li>几年几月几号交房？（注意必须是准确的年月日）</li><li>交房时，完成的是“专项验收合格”，还是“竣工验收合格”、“综合验收合格”？<ul><li>“专项验收合格”、“竣工验收合格”只是“楼盖好了”，“综合验收合格”才是“小区建设好了”。</li><li>只有综合验收合格，才能开始办房产证。</li></ul></li><li>如未如期交房，开发商需要承担什么责任？每天应该赔偿多少钱？折算成人民币是多少钱？</li></ul><p>务必用计算器计算一下违约金的金额。例如万分之一还算可以，但如果写成万分之零点一，那点赔偿连住宾馆都不够。</p><h2 id="拒绝收房"><a href="#拒绝收房" class="headerlink" title="拒绝收房"></a>拒绝收房</h2><ul><li>如果交房时手续不全，能否拒绝收房？</li><li>如果房屋遭遇质量问题，或者不符合装修标准，能否拒绝收房？（备注：“房屋主体结构质量不合格”与“房屋质量问题严重影响正常居住使用”这两种情况可以拒绝收房，普通质量问题与不符合装修标准一般不能拒绝收房）</li><li>拒绝收房，我们会有什么后果？</li><li>如房屋有质量问题，能否主张赔偿，或者开发商是否承诺维修？</li></ul><h2 id="办理房产证期限与延期责任"><a href="#办理房产证期限与延期责任" class="headerlink" title="办理房产证期限与延期责任"></a>办理房产证期限与延期责任</h2><ul><li>什么时间节点可以“综合验收合格”？（注意，这是办房产证的重要前提条件）</li><li>什么时间节点可以完成土地使用权变更？房屋所有权登记？</li><li>如果开发商没有如期完成以上各项，且并非我们原因耽误，开发商如何进行赔偿或补偿？</li></ul><h2 id="装修标准（精装房）"><a href="#装修标准（精装房）" class="headerlink" title="装修标准（精装房）"></a>装修标准（精装房）</h2><ul><li>样板间中展示了一系列装修和家具布置，那么有没有在合同中也详细指明装修标准？</li><li>有没有精确到具体的品牌与型号？</li><li>如未使用指定品牌，替代方案如何？</li></ul><p>在装修标准方面需要留意一个坑：“XX品牌”，即便都是品牌，也有档次的区别，既可以有高端产品，也可以有低端产品，就像800块钱的华为手机与5000块钱的华为手机那样。</p><h2 id="空白处"><a href="#空白处" class="headerlink" title="空白处"></a>空白处</h2><p>所有空白处（即<strong><strong>__</strong></strong>）都应使用“/”或“X”进行标记，以免被偷偷增加不利内容。</p><h1 id="降价应不应该维权"><a href="#降价应不应该维权" class="headerlink" title="降价应不应该维权"></a>降价应不应该维权</h1><p>房子买完之后，如果房子降价，维权是没有法律依据的，打官司一定会输。从道理上讲，房子降价你让开发商赔偿，难道房子涨价你要给开发商补钱吗？</p><p>如果很多业主都主张维权，而且已经策划维权行动，你可以跟着凑个热闹，没准开发商为了息事宁人而给你们提供一些补偿。但是务必记住，降价维权不是合法行为，维权得到的补偿也不算是合法手段弄来的，所以不要当维权团体的骨干，也不要真的去法院打官司。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><strong>关于合同</strong></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文主要列举合同中一些坑。虽然一般情况下购买者很难在短时间内把整个合同条文都理解清楚，而且即便知道合同内容不合理，也无法与开发商就合同内容进行谈判，但我们仍然有必要清楚我们将来会如何被开发商坑骗。&lt;br&gt;</summary>
    
    
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南（四）：售楼处里的套路</title>
    <link href="https://plusnan.me/2020/12/19/buy-house-4/"/>
    <id>https://plusnan.me/2020/12/19/buy-house-4/</id>
    <published>2020-12-18T16:00:00.000Z</published>
    <updated>2021-02-17T12:36:10.705Z</updated>
    
    <content type="html"><![CDATA[<p>确认买房之后，就要前往售楼处详细了解楼盘情况并付钱购买。但售楼处充满了经过精心布置的陷阱，本文则会讲述如何练就一副火眼金睛。</p><a id="more"></a><h1 id="务必先做好准备再去售楼处"><a href="#务必先做好准备再去售楼处" class="headerlink" title="务必先做好准备再去售楼处"></a>务必先做好准备再去售楼处</h1><h2 id="查一下网签"><a href="#查一下网签" class="headerlink" title="查一下网签"></a>查一下网签</h2><p>本节不适用新开盘的情况，因为刚开盘的话网签量肯定是零。</p><p>有些城市提供了住宅项目信息公示网站（由所在城市的住房和城乡建设局提供），可通过此类网站查询网签情况。对于已经开盘一段时间的，或者分期开发的，就可以相应网站查网签情况，虽然网签与销售之间有较长的时间延迟，但其数量级仍然可以反映小区卖得好不好。卖得好可能是炒的，但卖得不好肯定有硬伤。</p><h2 id="了解建筑许可"><a href="#了解建筑许可" class="headerlink" title="了解建筑许可"></a>了解建筑许可</h2><p>项目必须在取得许可后方可动工，而许可是需要公示的。因此，可以前往工地门口查看公示的建筑许可和平面图，也可以提前在网上搜索建筑许可（所在城市的自然资源和规划局官方网站上面有，但可能需要借助搜索引擎搜索），名称可能是“建设工程规划许可”、“建设项目批前公示”等。</p><p>因为官方网站会提供超清版本文件下载，建议去官方网站搜索下载，但因为工程名与小区名可能不一致，可能你还是需要用其他途径来了解工程项目叫什么名字。</p><p>例如：</p><p><img src="/img/2020-12-19-buy-house-4/public1.jpg" alt=""></p><p><img src="/img/2020-12-19-buy-house-4/public2.jpg" alt=""></p><p><img src="/img/2020-12-19-buy-house-4/public3.jpg" alt=""></p><p>不要把它们当成形式主义展板。仔细看这组图，你就可以清晰地了解到土地用途、占地面积、容积率、楼盘分布、小区内物业设施、光照情况等信息，而且还能少被置业顾问忽悠。</p><h2 id="带把卷尺"><a href="#带把卷尺" class="headerlink" title="带把卷尺"></a>带把卷尺</h2><p>后文会详细讲到样板间的各种套路。预防样板间套路，你需要准备一副卷尺，而且卷尺也就几块钱，买了不会吃亏。</p><p>买完之后，拿卷尺好好测量一下你现在居住的房间的尺寸，以及主要家具的尺寸，对距离有个印象，这样到时候置业顾问跟你说两米五的时候你就知道是宽还是窄了。</p><h2 id="带上平板电脑"><a href="#带上平板电脑" class="headerlink" title="带上平板电脑"></a>带上平板电脑</h2><p>如果你手头有一个平板电脑，建议你把平板电脑带上。现场会有各类文字公示内容，特别是那种不想让你看但又不得不展示的，拿平板看会比拿手机看着舒服，也有利于深入地思考。</p><h2 id="装一个地图APP"><a href="#装一个地图APP" class="headerlink" title="装一个地图APP"></a>装一个地图APP</h2><p>区位图的尺寸是骗人的，有些不利配套也会刻意隐瞒，所以要用规范的地图APP来查看周围配套与实际距离。</p><p>当然地图APP也不是全面的，例如建设中的工地以及公墓、看守所、监狱、军事基地都不会在地图上表示，所以仍然要实地现场查看。</p><h2 id="小心车牌识别"><a href="#小心车牌识别" class="headerlink" title="小心车牌识别"></a>小心车牌识别</h2><p>你的车开进售楼处之时，也是骚扰电话登记之时：有些售楼处会安装车牌识别系统，默默地记下你的车牌号和联系方式，还会与其他开发商共享。因车辆识别这件事情难以取证，即便投诉也不太可能解决（除非你愿意耗费大量时间精力与金钱跟开发商死磕），所以建议开车来的人把车放稍微远一点的地方，别放售楼处附近。</p><p>个人建议，如果距离在接受范围之内的话，可以考虑骑车去楼盘与售楼处。与开车相比，骑车的时候，对小区位置、距离与周围环境会感受得更加直观。</p><h2 id="小心人脸识别"><a href="#小心人脸识别" class="headerlink" title="小心人脸识别"></a>小心人脸识别</h2><p>去售楼处通常要先登记，确认渠道并判断应该给你什么样的优惠。为了防止你作弊，有些开发商还会用些科技手段，在售楼处偷偷地安装人脸识别系统，然后根据人脸识别结果来确定优惠多少，而消费者对人脸识别毫不知情，即使带上口罩系统也能进行识别，只能靠戴头盔预防——</p><p><img src="/img/2020-12-19-buy-house-4/face.jpg" alt="人脸识别"></p><p>这同样是你投诉或起诉也难以自行解决的行业乱象。对此只能建议，如果想通过中介等渠道途径购房，那么不要自己前往售楼处，甚至不要靠近售楼处，否则就拿不到优惠了。</p><h2 id="提前去工地附近转一圈"><a href="#提前去工地附近转一圈" class="headerlink" title="提前去工地附近转一圈"></a>提前去工地附近转一圈</h2><p>准备进入售楼处之前，应当找到楼盘所在工地，在工地周围转一圈，并且扩大到周围2～3km范围看一下，了解周围环境如何。详细关注点可<a href="/2020/12/12/buy-house-3/">参见前文</a>。</p><p>有些售楼处和实际工地并不在一起，因此要把工地实际位置找出来。售楼处位于车水马龙的好地段，而实际的楼盘可能在一两千米之外的一片荒地之中。</p><h2 id="吃饱喝足"><a href="#吃饱喝足" class="headerlink" title="吃饱喝足"></a>吃饱喝足</h2><p>在售楼处核实信息是一场硬仗，所以先吃饱喝足之后再过去，以免体力不足而主动偷懒。当然不用喝太多水，只要不是去维权的，售楼处会主动给你端茶送水。</p><h1 id="区位图与沙盘的套路"><a href="#区位图与沙盘的套路" class="headerlink" title="区位图与沙盘的套路"></a>区位图与沙盘的套路</h1><h2 id="区位图"><a href="#区位图" class="headerlink" title="区位图"></a>区位图</h2><p>区位图可以直观地展示小区所处位置，以及小区周围的配套及城市功能区域。为了外表美观、突出重点，区位图会基于实际情况适当变形、调整。</p><p>但是，区位图经常是严重变形，甚至变得非常夸张。有多夸张呢？举个例子，将区位图代入到真实地图中，标记相应距离，可以得到：</p><p><img src="/img/2020-12-19-buy-house-4/map.jpg" alt="区位图"></p><p>小区距离北面的主干道看起来不远，画起来比小区宽度窄，实际上要800米，是小区宽度的2倍。向西前往“唐冶生活区”其他位置还需要至少再走2km（因为中间有山）。而“唐冶生活区”与“中央商务区”看似不远，还能互相辐射，两地实际上却相距6km以上。“中央商务区”的高新万达广场看似位于二环东路与岔路口中间，其实它距离岔路口只有1km，距离二环东路路口却有5km。所以在“唐冶生活区”或“高新东区”工作的通勤距离都不一定很近，在“中央商务区”或“龙奥政务区”工作则要仔细考虑一下通勤距离到底能不能接受了。</p><p>当然区位图的骗局也好识别，就像上面的楼盘，只要你找辆自行车从西边的二环东路沿着主干道骑到东边的售楼处，你就能深刻地感受到区位图变形得有多么夸张了。</p><h2 id="沙盘"><a href="#沙盘" class="headerlink" title="沙盘"></a>沙盘</h2><p>区位图主要用来描述小区周围的环境，而沙盘主要用来描述小区内部的环境。</p><p>为了营造一种高级小区的感觉，沙盘也会经过精心美化，例如：</p><ul><li>沙盘整体搞得郁郁葱葱，就好像进入了花园城市新加坡。实际上交付的时候只有光秃秃的六棵树。</li><li>沙盘上看各楼排布稀疏，实际上小区密密麻麻，颇有香港九龙城寨遗风。</li><li>沙盘上看周围视野开阔，实际上南边是严重挡光的高层写字楼。仔细查看，在沙盘上那栋楼只是矮矮的水晶块。</li><li>沙盘上看不到地上停车位，实际上小区内部有地上停车位，人车不分流。</li><li>你所要买的楼挨着变电站、垃圾回收站等设施，沙盘上没有体现。</li><li>跟区位图一样，沙盘的比例尺也是变形的。</li></ul><p>看沙盘时，如果小区内部或小区南部有水晶块，务必较真地问一下那是什么楼，到底是什么用途，到底有多少层。</p><p>就算沙盘所有坑都识别出来了，你可能还会碰到这种无法预防的情况——</p><p><img src="/img/2020-12-19-buy-house-4/lake.jpg" alt="人工湖"></p><h2 id="周围环境"><a href="#周围环境" class="headerlink" title="周围环境"></a>周围环境</h2><p>区位图和沙盘还有一类套路：虚假的周围配套。</p><p>虚假主要体现在两方面。</p><p>第一方面是距离：以地铁站为例，从区位图或沙盘来看好像在附近，实际距离2km，而且还不能走直线，需要稍微绕点路，早上上班光是走到地铁站就要花半小时。所以要用你的地图APP来核实实际距离。</p><p>第二方面是把政府规划当成既成事实：既然是规划，说明还可以“根据实际情况”调整甚至取消，而这种调整或取消不是开发商能够决定的事情。</p><p>仍然以地铁为例。买不起楼的人，通常会被挤到郊区去买楼，而身处郊区，地铁就会变得极其重要。实际上，地铁从规划到审批再到落地可能要长达十年时间，如果国家政策收紧，地铁规划可能还会延迟或取消。因此，除非有政府正式发布的官方消息，或者亲眼看到已经开始施工或正式运营，不要相信周围一定会有地铁。否则的话，如果地铁真的改道或取消了，你就算去砸售楼处也起不到任何作用。</p><p>此外有些配套的意义是不大的，例如火车站、机场，你不会天天去坐火车飞机，但是你可以天天感受到它们的噪音；例如离政府近，你不会天天去政府办事，但你可以感受到周围配套缺乏，毕竟政府周围经常很空旷；例如离大学近，离得再近你也得靠高考考进去才行。这里还要点名融创文旅城，配套游乐园、商业街、酒店群，这些都是城市级的配套，旅游景点的设定，你作为小区业主，这辈子能去享受几回呢？</p><p>所以在售楼处就要意识这些问题，不要等到回家之后才想起来配套“其实并没有什么卵用”。</p><h1 id="户型图的套路"><a href="#户型图的套路" class="headerlink" title="户型图的套路"></a>户型图的套路</h1><p>户型的内容比较复杂，本文不展开讨论了，只讲几个坑。</p><p>一般都讲究“南北通透”，可是你得检查一下是不是真的南北通透，例如：</p><ul><li>北边是厨房、厕所：平时不会天天开着厨房窗户或厕所窗户通风吧？</li><li>北边是连廊：中间户北边通常有连廊，而且连廊属于消防设施，建楼时候不能取消。平时楼房肯定不会天天起火，但可以有变态天天到连廊偷窥你家生活，所以打算买中间户的话要留意这个问题。</li></ul><p>户型图通常只画了单个房间情况，没有标示整体楼层的情况。所以要结合工地现场确认一下是几梯几户，户型是中间户还是边户，东西两侧是否有其他住户，中间户向外突出多少，遮挡如何。有些高层还会有腰线，腰线太长的话会稍微有些挡光，介意的话要仔细问一下腰线的问题。</p><p>户型图还经常存在一个严重问题：上面没标尺寸。对吧？看到户型图没尺寸，当然要较真地问一下尺寸。那为什么说要“较真地”问呢？别忘了墙也占尺寸。另外要留意公摊的问题，100平的房子，去掉公摊，实际上只剩70多平，如果户型设计不好，三室每个屋子会变得很挤。</p><p>当置业顾问说长三米的时候，你说到底是宽了，还是窄了？这个无法回答，不同人感受不一样，而且跟你后续要布置的家具也有关系，所以前文会让你提前拿尺子在自己家感受一下。</p><h1 id="样板间的套路"><a href="#样板间的套路" class="headerlink" title="样板间的套路"></a>样板间的套路</h1><p>样板间主要是用来展示房间内部情况。</p><h2 id="装修"><a href="#装修" class="headerlink" title="装修"></a>装修</h2><p>为了吸引你买房子，开发商通常会花个几十万到几百万来做装修，房间的效果变得非常低调、奢华、有内涵。既然买不起房子，那装修肯定也要省钱，所以花二三十万装修肯定达不到样板间的效果。</p><p>参观样板间时，别拿样板间的样子想象自己未来的家，而且需要特别留意“非交付标准”五个字，毕竟去掉非交付标准设施之后剩下的样子也不见得是未来实际交付的样子。</p><h2 id="尺寸"><a href="#尺寸" class="headerlink" title="尺寸"></a>尺寸</h2><p>人们都喜欢大房子，为了吸引你买，样板间当然要显得宽敞。房间去掉公摊之后实际面积就那么点，想显得宽敞，那当然要在尺寸方面造假。</p><p>有些开发商比较有诚意，直接用实体样板间（样板间设置在正在修建的楼内），这样房间尺寸自然是真实的。但是，房间尺寸不造假，那家具呢？比方说，双人床尺寸是1.8x2m，开发商做成1.6x1.8m，房间长宽两个方向不就都宽出20cm了吗？</p><p>一般开发商没那么有诚意，样板间是另外订做的，那样板间的房间尺寸就经常比实际尺寸宽，例如宽20厘米，墙再比实际尺寸薄一点，床窄20厘米，床头柜窄10厘米，这样总共就多出了50厘米。不光如此，屋门拆掉，屋内再放一面镜子，你看，豪宅的效果出来了！</p><p>所以本文一开始就提醒，前往售楼处之前务必带把卷尺。虽然<span class="exturl" data-url="aHR0cHM6Ly93d3cuc29odS5jb20vYS80NDMzNDAwNTRfNzE5MTU5">卷尺也有造假版<i class="fa fa-external-link-alt"></i></span>，但你自己买的尺子肯定比做样板间时候用的尺子靠谱吧？</p><h1 id="公示栏的套路"><a href="#公示栏的套路" class="headerlink" title="公示栏的套路"></a>公示栏的套路</h1><p>按照有关部门规定，有些信息是要公示的，开发商他们不得不遵守这个规定。但是，开发商可以把这些公示信息放到角落里挂着，让你不特意找就找不到，找到了也得站着看，根本没有耐心看下去。</p><p>既然放到不起眼的地方，我们当然更要认真地看，拿手机拍下来，然后靠在舒服的沙发慢慢看，任凭置业顾问如何怂恿，先把文字看明白再说。</p><h2 id="不利因素"><a href="#不利因素" class="headerlink" title="不利因素"></a>不利因素</h2><p><a href="/2020/12/12/buy-house-3/">前文</a>已详细介绍不利因素，此处不再赘述。</p><h2 id="居住公寓"><a href="#居住公寓" class="headerlink" title="居住公寓"></a>居住公寓</h2><p>居住公寓指光照不足的房间。有些房子挡光严重，光照常年不足，甚至到了十多楼还是严重挡光，因此选较低楼层时要特别留意这个问题，介意光照的话慎买。</p><h2 id="合同条文"><a href="#合同条文" class="headerlink" title="合同条文"></a>合同条文</h2><p>合同通常是按政府标准制定的，并且需要在售楼处进行公示，所以一般都比较公平。但是，除了合同，开发商还会让你签订补充协议，而补充协议内容可以随意制定，要多不公平就可以有多不公平，而且这两类文件会放到让人没有兴趣留意观看的地方，让你没有心思较真。<a href="/2020/12/26/buy-house-5/">后一篇文章</a>梳理了合同条文中的坑。</p><h1 id="售楼处现场与置业顾问营造气氛的套路"><a href="#售楼处现场与置业顾问营造气氛的套路" class="headerlink" title="售楼处现场与置业顾问营造气氛的套路"></a>售楼处现场与置业顾问营造气氛的套路</h1><p>置业顾问会催你，不买就快没了，平时在朋友圈也会发朋友圈，说XX政策调整，XX区域发展，不赶紧上车就要涨价。到了售楼处，也是敲锣打鼓地宣布成交多少多少。</p><p>现在是2020年，大城市的楼市基本上都凉了，小城市或许还红火但用不了多久也会跟着大城市变凉，所以这些只是吓唬人的促销套路。现在真的不用着急——如果房子好卖，他们还需要促销吗？什么事情都不做房子也不愁卖吧！正是因为卖不动，才会靠各种手段忽悠人买嘛！</p><h1 id="特价房的套路"><a href="#特价房的套路" class="headerlink" title="特价房的套路"></a>特价房的套路</h1><p>特价房，不仅便宜，还会给人“正好能捡漏”的感觉。</p><p>难道真的是让你捡漏吗？当然不是了！</p><p>既然是特价房，说明肯定有便宜的原因，例如采光很差（差到15层还是居住公寓），或者挨着设备层，或者紧邻铁路线、高架桥、垃圾场等不利因素，反正绝不是开发商良心发现或者简单地进行促销。</p><p>就算手里没钱，想靠捡漏省些钱，也要打听清楚便宜的原因之后再考虑入手。</p><h1 id="关于展示、宣传资料与置业顾问介绍"><a href="#关于展示、宣传资料与置业顾问介绍" class="headerlink" title="关于展示、宣传资料与置业顾问介绍"></a>关于展示、宣传资料与置业顾问介绍</h1><p>展示、宣传资料与置业顾问介绍都不具备法律效力，拿去打官司也不能当作证据。但是，你仍然可以尽量收集宣传资料，给置业顾问偷偷录音，给售楼处展板、区位图和样板间拍照，作为日后控诉虚假宣传众多证据中的一部分呈现。</p><h1 id="不要急着交定金！"><a href="#不要急着交定金！" class="headerlink" title="不要急着交定金！"></a>不要急着交定金！</h1><p>交定金之前，开发商会想办法伺候你，让你舒舒服服地交出那笔钱。一旦交了定金，你就从爷爷变成了孙子。讨钱浪费精力，放弃又浪费金钱，只能硬着头皮继续买，很多人就这样，明知道要被坑，结果还是被坑了，所以不要急着交定金。</p><p>什么时候交定金呢？当你摸清楚所有情报，了解各种坑之后还能下定决心购买，你就可以交定金了。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><strong>售楼处里的套路</strong></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;确认买房之后，就要前往售楼处详细了解楼盘情况并付钱购买。但售楼处充满了经过精心布置的陷阱，本文则会讲述如何练就一副火眼金睛。&lt;/p&gt;</summary>
    
    
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南（三）：项目周围环境</title>
    <link href="https://plusnan.me/2020/12/12/buy-house-3/"/>
    <id>https://plusnan.me/2020/12/12/buy-house-3/</id>
    <published>2020-12-11T16:00:00.000Z</published>
    <updated>2021-02-17T12:18:43.007Z</updated>
    
    <content type="html"><![CDATA[<p>很多人买房时候，并没有在工地周围仔细观察环境，也没有仔细观看售楼处内公示的“不利因素”。等到交房时候才发现自己被骗，去维权开发商却说“我们已经公示了”，连条幅都不好打。</p><p>因此本文提醒大家在项目周围环境需要留意哪些事情，以免无端被坑。<br><a id="more"></a></p><h1 id="了解用地规划"><a href="#了解用地规划" class="headerlink" title="了解用地规划"></a>了解用地规划</h1><p>中国的土地都是国有的，而所在地区的自然资源和规划局会对土地用途进行一系列规划。因此，你需要了解所买楼盘处于规划局的哪个片区，然后去网上搜索一下该片区的规划（注意官方网站不一定好找，所以要利用好搜索引擎）。</p><p>以武汉为例。假如在光谷软件园工作，一般都会选择在光谷片区买房。假如选择光谷东，应该能找到和下图类似的规划图：</p><p><img src="/img/2020-12-12-buy-house-3/guanggudong.jpg" alt="光谷东"></p><p>上图中的文字标识是特意加的，而政府原始规划里面不会标记具体是哪个工厂或哪个小区，需要自己根据道路坐标寻找定位。</p><p>在这张图上将小区位置找准之后再仔细看，即使目前所买楼盘周围都是空地，也能大概了解周围空地将来要建设什么东西，会不会有污染的工厂等等。需要留意的是，工业用地分为三级，一类工业用地基本上无污染、无影响，而二、三类工业用地则会有污染，能躲就躲。</p><p>另外要留意小区南边的情况，例如现在是空地，将来可能就会盖出挡光的高层，而这一点不是开发商所能控制的。</p><h1 id="了解项目不利因素"><a href="#了解项目不利因素" class="headerlink" title="了解项目不利因素"></a>了解项目不利因素</h1><p>项目不利因素，说白了就是可能会让居民感到不舒服的东西，例如临近铁路会有噪音。不利因素分为红线外不利因素和红线内不利因素，前者是小区范围外，不能由开发商控制，后者是小区范围内的，开发商可以控制。但无论是小区外的，还是小区内的，建议都关注一下，以免遗漏。</p><h2 id="不利因素"><a href="#不利因素" class="headerlink" title="不利因素"></a>不利因素</h2><p>需要留意以下不利因素：</p><ul><li>铁路线、轻轨线、火车站、铁路车辆段（噪音）</li><li>桥梁、隧道（噪音）</li><li>城市主干道（噪音）</li><li>汽车站（噪音）</li><li>机场（严重噪音）</li><li>垃圾站（异味）</li><li>公共厕所（异味，但一般问题不大）</li><li>工厂（污染、安全风险）</li><li>臭水沟（异味）</li><li>公墓（禁忌）</li><li>荒山（同上，可能不是公园，而是周围村庄村民的祖坟）</li><li>油气站（安全风险）</li><li>危险品仓库（安全风险）</li><li>工地（噪音、安全，虽然通常它们都是临时的）</li><li>看守所、监狱、军事基地（真有吗？既然是郊区，当然有可能有）</li><li>荒地、空地（未来工地噪音，或者建设出以上不利因素）</li><li>高压线、变电站（虽然实际上无害但是看着感觉不舒服）</li><li>……</li></ul><p>即便都是不利因素，其影响也是不同的，例如同样是铁路线，如果是高铁或走高架桥的地铁，后半夜通常不会有噪音（后半夜列车维护），而如果是普速铁路，后半夜也容易产生噪音（客运货运不分昼夜）。有些不利因素的影响可能还会被小视，例如，2km外有一个化工厂，可能白天一点感觉都没有，而晚上工厂会违法排污，出门就能闻到异味。</p><p>即使都是有影响的不利因素，不同人的感觉也是不一样的。例如有些人无法忍受住在公墓附近，而有些人就不介意，甚至想抓鬼玩；有些人晚上睡觉睡得香，飞机从头上过也无所谓，而有些人晚上碰到一点噪音就会被吵醒。因此还得亲自去现场感受才行。</p><h2 id="以下不是不利因素"><a href="#以下不是不利因素" class="headerlink" title="以下不是不利因素"></a>以下不是不利因素</h2><p>以下“不利因素”是无害的，或者说，智商越低，危害越大。希望大家能相信科学，不要因为以下原因维权：</p><ul><li>高压线（高压线有安全距离要求，即使超高压也不超过15米，离小区实际上会很远，影响可以忽略不计）</li><li>变电站、变压器、配电室（同理）</li><li>通信基站（所谓的“辐射”只是普通电磁波，其影响可以忽略不计，另外切断基站会导致手机没信号，让你打不了电话上不了网）</li><li>公共Wi-Fi（同理）</li></ul><h1 id="“学区房”只是噱头"><a href="#“学区房”只是噱头" class="headerlink" title="“学区房”只是噱头"></a>“学区房”只是噱头</h1><p>有些开发商会将“学区房”作为卖点，或说自己在某某名校附近，或说自己已与哪所名校签约。</p><p>需要留意，在某名校附近，不一定是校本部，也不一定在名校学区，甚至只是简单的签约，不是主校分校关系。而“签约”也分很多种，有的是完全交给名校运营，有的是由名校提供师资进行支援，而有的只是行政管理关系，或者干脆只是允许用名校的牌子。并且，既然有签约，那么当然就会有解约，可能协议只有几年有效期，几年之后就解除关系了。</p><p>签约名校，就代表学习一定好了吗？不一定！教学质量好坏得看毕业生的成绩单，没有成绩做检验，名就只是名字而已。就算真是货真价实的名校，如果你的孩子不好好学习，成绩照样上不去。因此，不要对刚需房配建的学校抱什么希望，能有学校上就不错了。</p><p>一个城市往往就那么几个名校，如果学习成绩真的强，相应的学区房价格应该是既高又坚挺，有钱人家长也会奔过去买，根本轮不到普通人。就算能轮到普通人，大概也是买不起。</p><p>另外还要留意一点，有些名校是民办学校，例如某某外国语学校，这类学校不是靠学区分配自然进去的，也不是用普通途径考进去的，而是花巨额金钱安排进去的，所以就算确实住在附近也不代表能入学学习。</p><p>最后还有一点非常重要：如果孩子近两三年内就要上学，建议不要买预售房！一方面预售房本身的工期就没有保证，另一方面学校工期与学区分配也没有保证，买新房很容易耽误孩子上学！</p><h1 id="请亲自到项目周围转一转"><a href="#请亲自到项目周围转一转" class="headerlink" title="请亲自到项目周围转一转"></a>请亲自到项目周围转一转</h1><p>务必提前找到工地，在工地附近转一圈，查看小区周围情况，然后再将巡查范围扩大到周围2～3km，了解小区附近有哪些重要配套或者重大不利因素。</p><p>了解负面环境之后，再稍微找一找正面配套，看一看其配置、规模和距离能否满足日常生活需要，例如：</p><ul><li>超市</li><li>商场</li><li>医院</li><li>银行</li><li>幼儿园</li><li>小学、初中（注意小学和初中按学区入学，离得近也不一定是同一学区）</li><li>健身场所</li><li>公交车站、地铁站</li></ul><p>因为不同人的感觉不一样，请亲自去现场感受、核实，不要光听别人评论，特别是不要随便相信置业顾问的话。就算置业顾问催促，也要先把这些事情核实清楚再说。</p><h2 id="特别留意"><a href="#特别留意" class="headerlink" title="特别留意"></a>特别留意</h2><ul><li>留意小区南边，确认现在建筑会不会挡光。如果没有建筑，只是荒地，注意未来可能会建设出挡光的高层，而且这一点是开发商无法控制的。</li><li>留意售楼处与工地不一定在同一个地方，有时候离得还很远，所以要想办法找到实际的工地。不要认为售楼处位置很好，小区楼盘位置就会很好。</li></ul><p>如果地处郊区，位置偏僻，还需要留意以下两点：</p><ul><li>注意周围公共交通的形式、途径站点与发车频率，可能将来交房之后早上会有一万个人去等一辆半小时一趟的班车，或者干脆没有公交车，大家全部都要开车或者骑电动车出行。</li><li>注意周围小区与路网的密度，虽然你前往现场的时候可能道路畅通，但这不代表早高峰时候同样能够顺畅无阻。</li></ul><p>随着城市发展、居民入住，周围的交通也许会逐步改善，但这需要一些时间，有的地方一两年就能落实，有的地方需要等五六年才有改观，因此出行条件不能指望未来发展，得当下就能满足才行。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><strong>项目周围环境</strong></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;很多人买房时候，并没有在工地周围仔细观察环境，也没有仔细观看售楼处内公示的“不利因素”。等到交房时候才发现自己被骗，去维权开发商却说“我们已经公示了”，连条幅都不好打。&lt;/p&gt;
&lt;p&gt;因此本文提醒大家在项目周围环境需要留意哪些事情，以免无端被坑。&lt;br&gt;</summary>
    
    
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南（二）：地产项目情况</title>
    <link href="https://plusnan.me/2020/12/05/buy-house-2/"/>
    <id>https://plusnan.me/2020/12/05/buy-house-2/</id>
    <published>2020-12-04T16:00:00.000Z</published>
    <updated>2021-02-15T14:41:01.326Z</updated>
    
    <content type="html"><![CDATA[<p>在决定买房之前，应该对地产项目有一个基本的了解。本文对项目中的一些坑进行梳理。<br><a id="more"></a></p><h1 id="如何搜索"><a href="#如何搜索" class="headerlink" title="如何搜索"></a>如何搜索</h1><p>确定买房资格后，需确定自己手头能掏出多少钱，并且到网上搜索房贷计算器，确定大致预算。确定预算后，可以按90和110两个档估计一下大概能接受多少钱一平的房子，再结合工作地点确定搜索范围。</p><p>之后就是找专门的网站与APP，例如<span class="exturl" data-url="aHR0cHM6Ly93d3cuZmFuZy5jb20=">房天下网<i class="fa fa-external-link-alt"></i></span>或<span class="exturl" data-url="aHR0cHM6Ly93d3cuYW5qdWtlLmNvbQ==">安居客<i class="fa fa-external-link-alt"></i></span>等，在网站中搜索楼盘。这类网站收集了楼盘的详细的资料，更新也比较及时，还能进行地图找房，推荐优先在此类网站进行搜索，确定买房的大致范围。确定意向楼盘后，也到这类网站中搜索项目信息，关注价格情况（如果已经开盘的话）。</p><p><img src="/img/2020-12-05-buy-house-2/fangcom.png" alt=""></p><h1 id="信息项"><a href="#信息项" class="headerlink" title="信息项"></a>信息项</h1><p>找到楼盘后，可以查看项目的详细资料，例如：</p><p><img src="/img/2020-12-05-buy-house-2/info1.png" alt=""></p><p><img src="/img/2020-12-05-buy-house-2/info2.png" alt=""></p><p>其中以下几个因素需要关注一下：</p><h2 id="开发商"><a href="#开发商" class="headerlink" title="开发商"></a>开发商</h2><p>在资料中展示的开发商不一定是本尊，有可能是在当地成立的子公司，或者与其他开发商成立的联合公司。如果想知道本尊是哪家开发商，可以使用<span class="exturl" data-url="aHR0cHM6Ly93d3cudGlhbnlhbmNoYS5jb20=">天眼查<i class="fa fa-external-link-alt"></i></span>等网站查询。</p><p>开发商有大开发商，有小开发商，有国企，有民企。在大城市建议买大开发商的楼盘，因为小开发商容易破产烂尾，一旦烂尾，即使业主花钱自救，也会白白耽误十年，得不偿失。</p><p>需要留意的是，因为近两年很多开发商讲究高周转，快进快出，很可能会忽视质量，所以开发商大小和房屋好坏已经没有对应关系，大开发商可能开发了烂房子，小开发商也可能开发了好房子。该延期的还是会延期，该维权还是要维权，大小开发商都是如此，国企与私企也是如此。大开发商的唯一区别就是不会烂尾。</p><p>即便是同一开发商，不同城市也会有不同表现，例如在北京口碑良好，到了南京可能就要处处维权。同一城市不同历史时期也会有不同表现，例如以前房子质量好，后来的房子开始糊弄。所以仍然建议与本地人交流，了解开发商在当地的口碑如何。如果非常害怕延期交付（例如孩子即将上学），或者非常害怕质量问题，建议考虑二手房。</p><p>有些时候，因为开发商名气有点小，会选择蹭大牌开发商的名字，例如“万科XXYY”楼盘并不是万科开发，而是XX开发商开发、万科物业。这不算什么问题，实际的XX开发商靠谱，或者去售楼处时置业顾问能把两家开发商关系说清楚就行。实在介意的话，如何区分这类贴牌项目呢？去万科官网查一下就知道了，不是自家项目他不会写的。</p><h2 id="物业公司"><a href="#物业公司" class="headerlink" title="物业公司"></a>物业公司</h2><p>开发商只需要打一两年交道，后续二三十年每天都会跟物业公司打交道。建议了解一下物业公司的口碑，如果手中楼盘选择很多，而且有机会躲开只收钱不办事的物业，可以考虑躲一躲，毕竟请神容易送神难。</p><h2 id="精装-毛坯"><a href="#精装-毛坯" class="headerlink" title="精装/毛坯"></a>精装/毛坯</h2><p>不建议买精装房。两个原因：</p><ol><li>现在精装房减配严重，用精装省出来的钱自己装修，你通常可以装得更好。</li><li>一旦出现质量问题，毛坯房修起来可比精装容易多了，把房间毁掉重新装修也不心疼，而且现在出现质量问题的概率很大。</li></ol><h2 id="五证"><a href="#五证" class="headerlink" title="五证"></a>五证</h2><p>五证指《建设用地规划许可证》、《建设工程规划许可证》、《建筑工程施工许可证》、《国有土地使用证》和《商品房预售许可证》（现房是《商品房销售许可证》）。</p><p>购房时看《商品房预售许可证》就行，只要这个证齐全，说明另外四个肯定也齐全了。而且五证里面最容易出问题的就是这个《商品房预售许可证》，通常有两种问题：</p><ol><li>没拿到证就开盘</li><li>只有1号楼拿到证，开发商开始卖3号楼</li></ol><p>五证不全，只要发生纠纷，你无法得到任何法律保护。其他后果如下：</p><ol><li>无法办理贷款：银行需要根据预售许可证决定放款。</li><li>购房合同无效：不仅如此，如果开发商反咬你一口，你可能还得赔开发商钱。</li><li>质量没有保证：连卖房都违规操作，你认为开发商后续会认真盖房子吗？</li><li>无法办理房产证。</li></ol><p>因此一定不要买五证不全的房子，而且，由于政府办事比较慢，你也不要假定开发商很快就能把证补全。</p><h2 id="容积率"><a href="#容积率" class="headerlink" title="容积率"></a>容积率</h2><p>容积率，说的通俗一点就是房屋疏密程度。数字越大，房屋排布越密集，住起来越压抑。土拍时政府会对土地指定一个容积率，为了多挣钱，开发商则会倾向于在不突破指定容积率的前提下把楼建得密一些。</p><p>对于容积率，大家只需要记几个数字：6层以下0.8，11层小高层1.5，18层高层1.8左右，19层以上2.4，这些都是比较合适的容积率。比这个数字小，房子就稀疏，比这个数字大，房子就密集。数字太大的话房子就会变得密密麻麻。</p><p>容积率有一个“高低配”的坑：小区容积率是2.4，而该小区内部建了几个30层高层，又建了几个11层小高层，那么你所看到的2.4只是一个平均值，（高层）实际容积率要大于2.4，建筑也会比纯30层高层小区密集。</p><p>容积率低也不等于采光一定好。如果楼盘排布不合理，或者小区南边有挡光高层，该挡光的还是会挡光。</p><h2 id="停车位"><a href="#停车位" class="headerlink" title="停车位"></a>停车位</h2><p>现在的新小区默认是人车分离，开发商即便开发了地上车位，也会特意模糊这一点。介意地上车位的话，要仔细进行确认。</p><h2 id="负面评价"><a href="#负面评价" class="headerlink" title="负面评价"></a>负面评价</h2><p>开发商肯定不会说自己坏话，有时候还会派托儿在APP里说好话，而一般人因为没交房还写不出客观评价，所以负面评价就变得比较珍贵。</p><p>建议多下载几个APP，将负面评论收集齐，去掉无脑喷的内容，然后核实剩下内容是否属实，是否为评论者一面之词。在核实的过程中，你对项目的了解也会逐步加深。</p><p>另外建议在网站、微博、微信等途径搜索开发商在本地其他楼盘的维权事件（开发商第一次进入本地开发的话，就搜一搜其他城市的案例），确认业主诉求如何，如果没有房屋质量问题维权，也可以认为稍微有些靠谱了。</p><h1 id="楼面价与地价"><a href="#楼面价与地价" class="headerlink" title="楼面价与地价"></a>楼面价与地价</h1><p>地价就是开发商从政府那里买地所花的钱，楼面价则是将买地所花的钱平摊到建筑内部之后得到的平均值。</p><p>地价是地产项目中一块比较大的成本。卖同样的楼价，地价低了，开发商可以多挣点，地价高了，开发商就会少挣点，因此楼面价或地价可以当作房屋定价与开发商盈利程度的参考。不过地价与房价不是简单的数值计算关系，它们的大小关系只能当作参考，不能当作决定性因素。</p><p>很多人将“楼面价”和“房价”比喻成“面粉”和“面包”，面粉涨价，面包就会涨价，这个认识实际上是不对的。一方面，房价并不是简单地由地价加建筑加管理费用决定；另一方面，如果开发商体量大，楼盘多，他们也可以选择为了完成销售指标而降价销售，日后再从别的楼盘找机会把钱挣回来。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><strong>地产项目情况</strong></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;在决定买房之前，应该对地产项目有一个基本的了解。本文对项目中的一些坑进行梳理。&lt;br&gt;</summary>
    
    
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南（一）：购房资格</title>
    <link href="https://plusnan.me/2020/11/29/buy-house-1/"/>
    <id>https://plusnan.me/2020/11/29/buy-house-1/</id>
    <published>2020-11-28T16:00:00.000Z</published>
    <updated>2021-02-15T14:40:58.391Z</updated>
    
    <content type="html"><![CDATA[<p>为稳定房地产，避免炒作，各大城市相继出台了限购政策，有些城市的限购甚至会影响刚需或刚改的购房，因此要先确认自己是否有购房资格。</p><p>由于不同城市限购政策不同，本文仅进行一些提醒，能否购买应向当地专业人士咨询和确认。</p><a id="more"></a><h1 id="购房资格"><a href="#购房资格" class="headerlink" title="购房资格"></a>购房资格</h1><h2 id="留意限制内容"><a href="#留意限制内容" class="headerlink" title="留意限制内容"></a>留意限制内容</h2><ul><li>需留意限制范围，例如哪些区县存在限购。</li><li>有些城市的限购范围不光包括行政区，还包括高新区、经济开发区等非行政区划，而这类开发区范围在百度地图是查不到的，因此需要搜索一下资料，确认目标楼盘是否位于这些开发区范围内。</li><li>需留意对户口、学历等限制，例如本地户口如何限制，外地户口如何限制。对于除北上广深以外的城市，如果选择通过落户或连续缴交社保满足限制，需了解门槛如何。</li><li>需留意限购针对个人还是针对家庭，夫妻名下有房产，新房子只写一方姓名是否会被限制。</li><li>如果已经有房子，公寓是否计入数量，居住公寓是否计入数量，已网签未办房产证是否计入数量，等等。</li></ul><h2 id="你贷得起款吗？"><a href="#你贷得起款吗？" class="headerlink" title="你贷得起款吗？"></a>你贷得起款吗？</h2><p>有些城市不仅限制购买资格，还限制贷款规模，因此在凑首付时也要多加留意。</p><ul><li>贷款对户口、学历是否有要求？</li><li>如果在外地有贷款，在本地贷款是否有额外要求？</li><li>如果征信存在不良记录（例如有逾期记录，或使用借呗借钱），贷款审批会受到何种限制？</li><li>你的银行流水（主要是收入）能支撑贷款吗？</li><li>按照限购政策，可以贷几成房款？</li><li>2020年12月31日，央行发文要求收紧房贷。<span class="exturl" data-url="aHR0cHM6Ly9maW5hbmNlLnNpbmEuY29tLmNuL3dtLzIwMjEtMDEtMDkvZG9jLWlpem5jdGtmMTAzMTEyMy5zaHRtbA==">收紧房贷<i class="fa fa-external-link-alt"></i></span>的话，你的贷款还能不能批下来？</li></ul><h2 id="不要尝试突破限购限贷"><a href="#不要尝试突破限购限贷" class="headerlink" title="不要尝试突破限购限贷"></a>不要尝试突破限购限贷</h2><p>不要尝试突破限购限贷，例如假离婚。因为本身就是违反规定的行为，一旦事情暴露或产生纠纷，不仅容易贷不到款，还得不到任何法律保障。</p><p>另外假离婚风险如下：</p><ol><li>如果夫妻有一方假戏真做，趁机抛弃对方，那么另一方将无法维权。即便是“离婚”前制定的书面“复婚”约定，也不具备法律效力。</li><li>如果在假离婚之后突然颁布新政（例如上海在2021年1月21日颁发《<span class="exturl" data-url="aHR0cHM6Ly93d3cuc29odS5jb20vYS80NDYwMTgwNjNfMjYwNjE2">关于促进本市房地产市场平稳健康发展的意见<i class="fa fa-external-link-alt"></i></span>》），限购按离异前套数进行计数，那么假离婚将失去意义。</li></ol><p>以公司名义买房倒是能合法地突破限购，但是转让时要承担高额交易税，普通人不要考虑这种途径。</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><a href="/2020/11/22/buy-house-0/">总述</a></li><li><strong>购房资格</strong></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;为稳定房地产，避免炒作，各大城市相继出台了限购政策，有些城市的限购甚至会影响刚需或刚改的购房，因此要先确认自己是否有购房资格。&lt;/p&gt;
&lt;p&gt;由于不同城市限购政策不同，本文仅进行一些提醒，能否购买应向当地专业人士咨询和确认。&lt;/p&gt;</summary>
    
    
    
    <category term="楼市" scheme="https://plusnan.me/categories/%E6%A5%BC%E5%B8%82/"/>
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>买房避坑指南：总述</title>
    <link href="https://plusnan.me/2020/11/22/buy-house-0/"/>
    <id>https://plusnan.me/2020/11/22/buy-house-0/</id>
    <published>2020-11-21T16:00:00.000Z</published>
    <updated>2021-02-15T15:16:41.597Z</updated>
    
    <content type="html"><![CDATA[<p>现在普通的年轻人已经很难通过个人奋斗来攒一套房了，不仅要掏光四个甚至六个钱包，还要背负巨额贷款。不光如此，由于各种原因，购房者草率地决定买房，之后遭遇了各种问题，“交房即维权”，甚至因自己一时头脑发热而懊悔不已。</p><p>为了避免不必要的损失，我们有必要了解买房过程中的各种坑。即便预算不足，无法完全避免这些坑，至少也不能因为本来可以避免的损失而稀里糊涂地把三代人辛辛苦苦挣到的钱随便交给开发商。</p><p>本系列文章内容较多，但是，面临着几百万甚至几千万的交易，多花一些时间来冷静分析，这完全是有必要而且是有益的。<br><a id="more"></a></p><h1 id="本系列文章的假设"><a href="#本系列文章的假设" class="headerlink" title="本系列文章的假设"></a>本系列文章的假设</h1><p>为了不让讨论太发散，本系列文章假设：</p><ul><li>你不是土豪：大部分人不得不掏光几个钱包还要背负贷款才能勉强凑出一个房子。</li><li>你要买新房：新房有新房的坑，二手房有二手房的坑，虽然个人更推荐考虑一下二手房，但这不在本文讨论范围内。</li><li>你要买普通住宅，也就是房产证为70年产权，性质为“住宅”或“居住公寓”的房子：<a href="/2020/12/28/buy-house-6/">公寓的坑</a>比住宅多，而且坑的性质也很恶劣，所以很多人都强烈建议公寓不能买，只能租。</li><li>你买房是为了居住，不是为了投资：投资有投资的坑，二者不能一概而论。</li></ul><h1 id="总行动方针"><a href="#总行动方针" class="headerlink" title="总行动方针"></a>总行动方针</h1><p>不要追求完美，有那种房子肯定也买不起，只求少被开发商忽悠。为此需要提前收集情报，获取足够的信息，并识别出各种坑，然后再分析利弊。只要没有无法接受的硬伤，就可以考虑放到候选名单了。</p><p>一般人没有那么多钱，能作出的选择有限，而且每个楼盘都有硬伤，那么你需要对这些硬伤排序，排除掉最不能忍的事情。例如楼盘挨着墓地，但你是无神论者，虽然看墓地感觉不舒服，但并不害怕，但你对噪音比较介意，稍微过个火车就睡不着觉，那么在挨着铁路和挨着墓地的楼盘中，就可以优先选择挨着墓地的楼盘。</p><p>在产生买房想法之前，应当先熟悉自己所在城市和片区，因为城市东西南北发展情况不同，在熟悉自己所处片区的发展情况之前不要轻易买房。如果考虑跨片区买房（例如城西工作城东居住），或者考虑双城生活（例如上海工作昆山居住），那么应当找些时间请假，在早晚高峰时间实地体验通勤，确认有稳定的通勤方式之后再继续决策。</p><p>在考虑新房的同时，也要考虑一下二手房！对于新房来说，一方面近两年房价暴涨，开发商却讲究高周转，所以新房质量越来越差，暴雷的案例也实在太多，而二手房的质量是看得见摸得着的；另一方面，如果房市下行，新房卖不动，那么二手房肯定更难卖（学区房除外）。你要是擅长讲价，砍个几十万大概不是问题。本系列文章针对新房，就不再详细讲二手房了。</p><p>最后，绝对不要轻信置业顾问，他们的话只能当做参考，实际情况还要你自己亲自核实。在没有100%决定买房之前，不要给开发商付任何钱，否则，付钱之前他们像大爷一样伺候你，付钱之后你可以像孙子一样被他们欺负！</p><h1 id="本系列目录"><a href="#本系列目录" class="headerlink" title="本系列目录"></a>本系列目录</h1><ul><li><strong>总述</strong></li><li><a href="/2020/11/29/buy-house-1/">购房资格</a></li><li><a href="/2020/12/05/buy-house-2/">地产项目情况</a></li><li><a href="/2020/12/12/buy-house-3/">项目周围环境</a></li><li><a href="/2020/12/19/buy-house-4/">售楼处里的套路</a></li><li><a href="/2020/12/26/buy-house-5">关于合同</a></li><li><a href="/2020/12/28/buy-house-6/">不要买公寓！</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;现在普通的年轻人已经很难通过个人奋斗来攒一套房了，不仅要掏光四个甚至六个钱包，还要背负巨额贷款。不光如此，由于各种原因，购房者草率地决定买房，之后遭遇了各种问题，“交房即维权”，甚至因自己一时头脑发热而懊悔不已。&lt;/p&gt;
&lt;p&gt;为了避免不必要的损失，我们有必要了解买房过程中的各种坑。即便预算不足，无法完全避免这些坑，至少也不能因为本来可以避免的损失而稀里糊涂地把三代人辛辛苦苦挣到的钱随便交给开发商。&lt;/p&gt;
&lt;p&gt;本系列文章内容较多，但是，面临着几百万甚至几千万的交易，多花一些时间来冷静分析，这完全是有必要而且是有益的。&lt;br&gt;</summary>
    
    
    
    <category term="楼市" scheme="https://plusnan.me/categories/%E6%A5%BC%E5%B8%82/"/>
    
    
    <category term="买房" scheme="https://plusnan.me/tags/%E4%B9%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据库设计规范（二）</title>
    <link href="https://plusnan.me/2020/11/07/db-specification-2/"/>
    <id>https://plusnan.me/2020/11/07/db-specification-2/</id>
    <published>2020-11-06T16:00:00.000Z</published>
    <updated>2021-02-15T12:19:28.730Z</updated>
    
    <content type="html"><![CDATA[<p>本文为我们项目中所采用的MySQL数据库设计规范。</p><p>计划分为两篇文章，<a href="/2020/11/01/db-specification/">前一篇</a>为数据库的表结构设计，本篇为SQL语句的书写。<br><a id="more"></a></p><h1 id="SQL书写规则"><a href="#SQL书写规则" class="headerlink" title="SQL书写规则"></a>SQL书写规则</h1><h2 id="语法与格式"><a href="#语法与格式" class="headerlink" title="语法与格式"></a>语法与格式</h2><ul><li>SQL关键字使用大写字母</li><li>表名、字段名等使用小写字母</li><li>每个单词之间只有一个空格</li><li>避免复杂语句。如为复杂语句，应拆分成多行，并合理控制缩进，保持可读性。</li><li>对于不直观的条件，应使用注释解释含义。</li></ul><h2 id="避免性能问题"><a href="#避免性能问题" class="headerlink" title="避免性能问题"></a>避免性能问题</h2><ul><li>SQL语句应尽可能简单，减小响应时间。</li><li>使用查询条件时，值与字段数据类型必须保持一致，例如<code>id</code>为<code>INT</code>类型，查询条件则不应该写成<code>id=&#39;1&#39;</code>。</li><li>需要<code>JOIN</code>时，关联的字段的数据类型必须保持一致。</li><li>避免使用<code>NOT IN</code>。该语句会将NULL值查出来。</li><li>避免使用<code>NOT IN</code>、<code>NOT LIKE</code>、<code>&lt;&gt;</code>、<code>!=</code>，否则查询时不走索引，影响性能。</li><li>避免使用<code>OR</code>，尽量改写成<code>IN</code>或<code>UNION ALL</code>。</li><li><code>IN</code>条件的数据项要控制在1000以内。如可以，建议用<code>EXISTS</code>代替<code>IN</code>。</li><li>禁止列运算，例如<code>WHERE age+1&gt;20</code>会导致表扫描，使索引失效，应改写为<code>WHERE age&gt;19</code>。</li><li>禁止使用左模糊与全模糊（即<code>LIKE &#39;%TEXT&#39;</code>、<code>LIKE &#39;%TEXT%&#39;</code>）。如有需要，使用搜索引擎处理。</li><li>禁止<code>SELECT *</code>，必须指明具体字段。<code>SELECT COUNT(*)</code>除外。</li><li>尽量使用<code>LIMIT</code>限定查询结果数量。</li><li>尽量不要在SQL语句中进行计算，而是放入调用参数中，以利用查询缓存，例如<code>WHERE date&lt;CURDATE()</code>改为<code>WHERE date&lt;?</code>然后在Java层传入当前时间。</li><li>书写查询语句后，应采用EXPLAIN等方式进行性能分析。</li></ul><h2 id="避免SQL的坑"><a href="#避免SQL的坑" class="headerlink" title="避免SQL的坑"></a>避免SQL的坑</h2><ul><li>注意：<code>COUNT(列名)</code>不会统计NULL值，而<code>COUNT(1)</code>与<code>COUNT(*)</code>会统计NULL值。</li><li>注意：如果表中没有数据，或者全部为NULL，<code>SUM(列名)</code>、<code>AVG(列名)</code>、<code>MIN(列名)</code>、<code>MAX(列名)</code>等统计函数会返回NULL，而<code>COUNT(列名)</code>只会返回0，不会返回NULL。</li><li>如字段可空，应使用<code>ISNULL()</code>判断是否为NULL，且不能用<code>&lt;&gt;</code>、<code>NOT IN</code>判断取值。</li><li>必须使用<code>#&#123;&#125;</code>、<code>#param#</code>配置参数，禁止使用<code>$&#123;&#125;</code>配置参数，以避免SQL注入。</li><li>严禁人工拼接SQL查询参数，一是容易拼接不全导致语法错误，二是容易产生SQL注入，三是无法利用查询缓存。</li><li>字符计数使用<code>CHARACTER_LENGTH</code>。注意一个汉字不是2字节，不一定是3字节。</li><li>在多表关联查询时，每个字段应总是指定表的名称。也可使用<code>t1</code>、<code>t2</code>等别名简化书写。</li></ul><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul><li>在Java代码中，类中的boolean型变量不要加is前缀，is前缀不要使用boolean类型。</li><li>禁止使用函数、存储过程和触发器，在应用程序实现。</li><li>禁止使用外键。约束应在程序中实现。</li><li>禁止在程序代码中使用<code>TRUNCATE TABLE</code>语句清空表。该语句为DDL语句。</li></ul><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FsaWJhYmEvcDNjL2Jsb2IvbWFzdGVyL0phdmHlvIDlj5HmiYvlhozvvIjltanlsbHniYjvvIkucGRm">阿里巴巴《Java 开发手册》（V1.7）<i class="fa fa-external-link-alt"></i></span></li></ul><h1 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuc3Fsc3R5bGUuZ3VpZGUvemg=">SQL样式指南<i class="fa fa-external-link-alt"></i></span></li></ul><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><a href="/2020/11/01/db-specification/">MySQL数据库设计规范（一）</a></li><li><strong>MySQL数据库设计规范（二）</strong></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文为我们项目中所采用的MySQL数据库设计规范。&lt;/p&gt;
&lt;p&gt;计划分为两篇文章，&lt;a href=&quot;/2020/11/01/db-specification/&quot;&gt;前一篇&lt;/a&gt;为数据库的表结构设计，本篇为SQL语句的书写。&lt;br&gt;</summary>
    
    
    
    <category term="项目开发经验" scheme="https://plusnan.me/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="MySQL" scheme="https://plusnan.me/tags/MySQL/"/>
    
    <category term="规范" scheme="https://plusnan.me/tags/%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>MySQL数据库设计规范（一）</title>
    <link href="https://plusnan.me/2020/11/01/db-specification/"/>
    <id>https://plusnan.me/2020/11/01/db-specification/</id>
    <published>2020-10-31T16:00:00.000Z</published>
    <updated>2021-02-13T14:03:20.515Z</updated>
    
    <content type="html"><![CDATA[<p>本文为我们项目中所采用的MySQL数据库设计规范。</p><p>计划分为两篇文章，第一篇为数据库的表结构设计，第二篇为SQL语句的书写。</p><a id="more"></a><h1 id="数据库设计原则"><a href="#数据库设计原则" class="headerlink" title="数据库设计原则"></a>数据库设计原则</h1><h2 id="表设计原则"><a href="#表设计原则" class="headerlink" title="表设计原则"></a>表设计原则</h2><ol><li>使用InnoDB引擎。如使用其他引擎，应经过评估。</li><li>字符集采用utf8mb4。</li><li>表结构设计原则上应满足第三范式，但可以为了提高性能而破坏此规则，例如在频繁访问而不频繁修改的表中，为了避免在查询时多表JOIN，设置一些冗余字段。另外，冗余字段应为经常被查询的字段，不应是频繁修改的字段，也不应是太占用空间的字段（例如长度太长的VARCHAR）。</li><li>避免使用分区表。</li><li>表结构设计文档应包含注释，解释表与字段主要用途、取值范围、使用注意事项、关联关系等。</li><li>表结构设计文档中，为便于查找排序，表的中文名称应采用统一规则。例如<code>B-SYS-01-系统基础-用户信息</code>，规定其中的<code>B</code>为数据域编码，<code>SYS</code>为功能模块编码，<code>01</code>为流水号，<code>系统基础</code>为功能模块名称，而<code>用户信息</code>才是实际的表名称。</li><li>单表数据量应控制在一千万以内。如预计会超过一千万，应提前考虑分库分表。</li></ol><h2 id="字段设计原则"><a href="#字段设计原则" class="headerlink" title="字段设计原则"></a>字段设计原则</h2><ol><li>使用能正确存储和表示数据的最小类型。如果不确定需要什么数据类型，则选择不会超出范围的最小类型。</li><li>选择更简单的数据类型，例如能使用TINYINT则不使用CHAR或VARCHAR。</li><li>布尔值使用TINYINT，数值0表示为假，数值1表示为真。</li><li>避免使用FLOAT或DOUBLE存储浮点数。如有需要，使用DECIMAL类型。</li><li>将字段定义为NOT NULL。如确实需要NULL，应在模型设计与SQL建表脚本中明确指明。</li><li>应尽量设置默认值。字符型为空字符串，数值型则为0。</li><li>避免存储大文件和BLOB。如有需要，应部署专门的文件服务器，将文件存放于文件服务器，在数据库中只存储其路径。</li><li>只允许使用以下数据类型：数值系列（TINYINT到BIGINT）、DECIMAL、CHAR、VARCHAR、TINYTEXT至LONGTEXT、TINYBLOB至LONGBLOB、DATETIME、TIMESTAMP。</li><li>除非为纯查询用表，否则应包含以下五个字段：</li></ol><div class="table-container"><table><thead><tr><th>字段</th><th>字段英文名</th><th>类型（仅供参考）</th><th>说明</th></tr></thead><tbody><tr><td>版本</td><td>version</td><td>INT</td><td>用于解决并发问题</td></tr><tr><td>创建时间</td><td>created_at</td><td>TIMESTAMP</td><td></td></tr><tr><td>创建人</td><td>created_by</td><td>INT</td><td>类型与用户ID保持一致</td></tr><tr><td>创建时间</td><td>updated_at</td><td>TIMESTAMP</td><td></td></tr><tr><td>创建人</td><td>updated_by</td><td>INT</td><td>类型与用户ID保持一致</td></tr></tbody></table></div><p>该五个字段均为NOT NULL，且不应包含任何额外业务逻辑。在执行UPDATE时，必须对“修改时间”与“修改人”字段进行更新。</p><h2 id="键设计原则"><a href="#键设计原则" class="headerlink" title="键设计原则"></a>键设计原则</h2><ol><li>禁止在生产环境使用外键。</li><li>可在开发环境利用外键来辅助开发人员，但无论是否有外键，约束均应由程序控制。</li><li>必须设置主键。</li><li>主键字段的值必须唯一。</li><li>不使用频繁更新的列作为主键。</li><li>尽量使用系统生成的值作为主键，建议使用自增值。</li><li>不使用UUID、hash等作为主键。</li></ol><h2 id="索引设计原则"><a href="#索引设计原则" class="headerlink" title="索引设计原则"></a>索引设计原则</h2><ol><li>区分度最大的字段放在前面。</li><li>避免冗余和重复索引。</li><li>控制索引数量。单张表不要超过5个索引，单个索引字段数不要超过5个。</li><li>不要索引大型字段（有很多字符的字段），如有需要，建议考虑前缀索引，例如只索引前8个字符。</li><li>不要索引常用的小型表。</li><li>不要索引区分度不大的字段，例如“性别”。</li><li>不要对可以为NULL的字段建立索引。如需建立索引，应先将字段修改为NOT NULL。</li><li>不要对主键建立索引，主键本身自带索引。</li></ol><h2 id="命名规范"><a href="#命名规范" class="headerlink" title="命名规范"></a>命名规范</h2><ol><li>命名时使用尽量描述实体的内容。使用英文单词、单词组合或单词缩写组成，禁止使用汉语拼音或汉语拼音缩写。</li><li>命名采用小写字母、数字或下划线组成，不使用其他字符，长度不超过30字符。</li><li>同一词语在数据库中只能具有一个语义，例如，已经用<code>area</code>表示<code>面积</code>，那么就不能再用这个词语表示<code>地区</code>。</li><li>同一个语义应该用同一个词语来表示，例如<code>是否有效</code>如果已经用<code>is_enabled</code>表示，那么不要再使用<code>is_valid</code>表示。</li><li>不能使用系统关键字命名。考虑到系统扩展需要，应避免和各种主流数据库软件的关键字冲突。</li><li>表名统一采用<code>模块名_表名</code>，例如<code>sys_user</code>。</li><li>字段名统一采用普通英文单词，不同单词之间用下划线分割。对于布尔类型，则为<code>is_形容词</code>，例如<code>is_enabled</code>。</li><li>主键为<code>pk_表名</code></li><li>索引为<code>idx_表名_字段名</code>，如长度太长，可适当缩减表名或字段名，但同一表的表名应保持一致。</li><li>临时用数据库、临时用表命名应以<code>tmp_</code>为前缀，以日期为后缀，用完之后应及时清理。</li><li>备份用数据库、备份用表命名应以<code>bak_</code>为前缀，以日期为后缀，且不应与生产用表混放。</li><li>不要使用驼峰命名法与匈牙利命名法（例如<code>strName</code>）。</li></ol><h2 id="其他规则"><a href="#其他规则" class="headerlink" title="其他规则"></a>其他规则</h2><ol><li>避免使用函数、存储过程与触发器。</li><li>禁止在数据库存储明文密码，必须进行加密后再存储。避免使用MD5、SHA1等安全性较低的加密方式。</li><li>设计IP字段时应考虑IPv6接入。IPv6地址最长长度为39个字符。</li><li>考虑到扩展性，如系统未来可能会改为Oracle或其他数据库部署，在设计字段时应考虑数据类型的兼容性。</li><li>应用服务器、数据库服务器操作系统时区统一用Asia/Shanghai（东八区）。</li></ol><h1 id="数据库管理流程规范"><a href="#数据库管理流程规范" class="headerlink" title="数据库管理流程规范"></a>数据库管理流程规范</h1><h2 id="数据库文档管理"><a href="#数据库文档管理" class="headerlink" title="数据库文档管理"></a>数据库文档管理</h2><p>软件开发人员应及时维护以下资料：</p><ol><li>数据库物理模型设计文档</li><li>基线版本开始到当前版本，所有表结构变更SQL文件（或脚本）</li><li>数据库软件配置文件</li></ol><p>这些资料应纳入配置管理，而数据库物理模型设计文档应在设计完成后形成基线，后续进行变更管理流程。</p><h3 id="数据库表结构版本"><a href="#数据库表结构版本" class="headerlink" title="数据库表结构版本"></a>数据库表结构版本</h3><p>数据库表结构应设置版本号，并采用表结构设计变更时间作为版本的编号，其格式为<code>数据库名称-YYYYMMDD-两位流水号</code>，例如<code>helloworld-20201101-01</code>。</p><p>在数据库中设立数据库版本表<code>db_version</code>，表结构如下：</p><div class="table-container"><table><thead><tr><th>字段</th><th>字段英文名</th><th>类型</th><th>主键</th><th>非空</th><th>其他要求</th></tr></thead><tbody><tr><td>序号</td><td>id</td><td>INT</td><td>√</td><td>√</td><td>AUTO_INCREMENT</td></tr><tr><td>版本号</td><td>version</td><td>VARCHAR(50)</td><td></td><td>√</td><td></td></tr><tr><td>操作时间</td><td>operate_time</td><td>TIMESTAMP</td><td></td><td>√</td><td>DEFAULT CURRENT_TIMESTAMP</td></tr><tr><td>责任人</td><td>operate_name</td><td>VARCHAR(50)</td><td></td><td>√</td><td></td></tr></tbody></table></div><h3 id="表结构变更SQL文件"><a href="#表结构变更SQL文件" class="headerlink" title="表结构变更SQL文件"></a>表结构变更SQL文件</h3><p>表结构变更SQL文件应遵循以下规则：</p><ol><li>文件名为<code>版本号-变更简要说明.sql</code>，例如<code>helloworld-20201101-01-新增业务表.sql</code>。</li><li>第一个版本文件名为<code>版本号-初始化.sql</code>，例如<code>helloworld-20201101-01-初始化.sql</code>，其中包含全量的建表语句，而后续所有版本均应为前一版本基础上的增量变更语句。</li><li>文件内文中应以注释形式加入应用升级或表结构变更说明，以便事后追溯。</li><li>除非明确要求执行删除（DROP、TRUNCATE等）操作，变更应使用ALTER修改，不得先DROP后CREATE。</li><li>SQL文件不包含<code>CREATE DATABASE</code>、<code>USE 数据库名</code>等涉及数据库实例的语句，也不指定数据库实例（例如<code>helloworld.dict_dict</code>）。创建与切换数据库操作总是应当确认后手工执行。</li><li>在空白数据库中，按SQL文件顺序逐个执行以后，形成的表结构应与当前版本的物理模型文档完全一致，且过程中产生的数据也得到了妥善处理。</li><li>文件应包含更新数据库版本表的语句：<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> db_version (version, operate_name) <span class="keyword">VALUES</span> (<span class="string">&#x27;版本号&#x27;</span>, <span class="string">&#x27;责任人姓名&#x27;</span>);</span><br></pre></td></tr></table></figure><h2 id="表结构变更"><a href="#表结构变更" class="headerlink" title="表结构变更"></a>表结构变更</h2></li><li>禁止未经评审确认私自修改表结构，包括文档以及开发、测试与生产数据库。</li><li>建新表、增加修改删除字段均应先进行评审确认，评审通过后再修改文档与实际的数据库。</li><li>所有建表操作应同时确定索引，并经过评审确认。</li><li>评审确认后应及时更新文档。</li><li>上线特殊活动（例如集中申报、抢号、抢票）之前，应提前请DBA进行评估。</li></ol><h2 id="数据库账号"><a href="#数据库账号" class="headerlink" title="数据库账号"></a>数据库账号</h2><p>在生产环境中，应向应用程序分配最小权限访问用户，严禁应用程序使用高权限账号（root）连接数据库。</p><p>严格管理连接生产数据库与生产服务器的软件，严禁使用非正规手段连接，严禁使用盗版软件建立连接。</p><h2 id="部署升级操作"><a href="#部署升级操作" class="headerlink" title="部署升级操作"></a>部署升级操作</h2><p>在生产环境，涉及表结构变更时应提前整理升级材料，并征得运维管理人员许可，然后方可进行操作。报备内容包含：</p><ol><li>涉及的表结构变更内容</li><li>涉及的变更SQL（或脚本），其中需包含表结构的变更、索引的设置等</li><li>如需调整数据库软件配置，需报备修改的参数</li></ol><p>未经许可，禁止私自进行以下行为：</p><ol><li>增加或删除生产用表。</li><li>修改现有生产用表的表结构，包含增、删、改字段，以及修改字段名称、类型、长度、非空变可空。</li><li>在业务高峰期，人工进行大量更新、大量查询、大表数据统计、批量导入导出等资源消耗较大的操作。</li><li>对服务器内统一部署的监控与数据传输等软件进行启停或配置调整。</li></ol><p>在进行大规模或大批量操作时，需DBA介入观察。</p><h2 id="数据修改"><a href="#数据修改" class="headerlink" title="数据修改"></a>数据修改</h2><p>禁止私自修改生产环境业务数据。一旦东窗事发，轻则被公司开除，重则遭遇牢狱之灾。</p><p>修改生产环境业务数据应按以下流程操作：</p><ol><li>要求修改人提供具有效力的依据，例如签字盖章的传真。如无正式文件可拒绝修改请求。如事关紧急可酌情（例如领导电话确认）考虑先行修改，但仍应要求事后补好手续。</li><li>对修改凭据进行编号和归档管理。</li><li>修改数据，修改时应记录修改语句以及修改前后的数据。</li><li>在专门的数据修改记录表（纸质材料、电子表格文件或数据库表）记录修改凭据编号、修改涉及的表和字段、修改语句以及修改前后的数据。</li></ol><p>因程序bug导致的数据错误也需要进行记录，凭据则为所处理的bug内容。</p><p>另外，如系统采用主从库部署，禁止修改从库数据。</p><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><strong>MySQL数据库设计规范（一）</strong></li><li><a href="/2020/11/07/db-specification-2/">MySQL数据库设计规范（二）</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文为我们项目中所采用的MySQL数据库设计规范。&lt;/p&gt;
&lt;p&gt;计划分为两篇文章，第一篇为数据库的表结构设计，第二篇为SQL语句的书写。&lt;/p&gt;</summary>
    
    
    
    <category term="项目开发经验" scheme="https://plusnan.me/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="MySQL" scheme="https://plusnan.me/tags/MySQL/"/>
    
    <category term="规范" scheme="https://plusnan.me/tags/%E8%A7%84%E8%8C%83/"/>
    
  </entry>
  
  <entry>
    <title>如何画架构图</title>
    <link href="https://plusnan.me/2020/10/24/how-to-draw-graph/"/>
    <id>https://plusnan.me/2020/10/24/how-to-draw-graph/</id>
    <published>2020-10-23T16:00:00.000Z</published>
    <updated>2021-02-08T16:04:07.256Z</updated>
    
    <content type="html"><![CDATA[<p><a href="/2020/02/20/how-to-write-document/">前文讲到，写好文档，才能少挨骂</a>。在此基础上，如果图表画得好，你可能还会被夸。</p><p>本文以架构图为例，讲一讲如何给软件文档画图。</p><a id="more"></a><h1 id="明确受众"><a href="#明确受众" class="headerlink" title="明确受众"></a>明确受众</h1><p>写文档要明确受众，画图也是一样，想好了给谁去画、为什么去画、目标读者关心什么内容，才好进一步去思考想要传达什么信息。即使都是给同事看，你也得区分一下，是给开发人员看，还是给运维人员看，还是给什么人去看。就算是为了去找用户装逼，你画得也得像那么回事对吧。</p><p>怎么判断图画得好还是画得不好呢？一方面就是直观，读者他能看得进去，不会被乱七八糟的样式劝退；另一方面是你画出了读者关心的内容，通过你的图能够解决他的某种困惑（例如让开发人员了解系统技术架构，让产品人员了解系统功能与功能之间的关联）；还有一方面，他看完了之后，对这张图的理解也跟你是一样的，你要表达的信息有效地传达给他了。</p><p>图的目的是帮助认识与理解。认识新事物，由浅入深才能更好地掌握。画图的时候也是一样，你需要假设，图的读者要么没参与项目，或者参与程度不深，或者跟我们想法不一致，因此需要用图表让他们先在浅层有个直观的认识，搞清楚之后才能深入细节。一开始就讲细枝末节的东西，一般人肯定一头雾水。</p><h1 id="想好你要表达什么内容"><a href="#想好你要表达什么内容" class="headerlink" title="想好你要表达什么内容"></a>想好你要表达什么内容</h1><h2 id="一张图是不够的"><a href="#一张图是不够的" class="headerlink" title="一张图是不够的"></a>一张图是不够的</h2><p>有时候，你就是无法只用一张图就把事情说明白。例如有人总想给系统画一个超级架构图，把系统的核心功能、应用组成、物理部署、系统间关系等信息用一张图全部表示出来，但他们画出来的东西既不好看，也没能达到预期目标。</p><p>系统要是只有几万的合同额，功能很少，只有一台应用服务器、一个数据库，只对接几个外部系统，倒是没什么问题。然而，服务器稍微多一点，集成关系稍微复杂点，摆放的时候就要头疼，画出来的线条也是纵横交错，不仅自己看着难受，外人理解起来也很费劲。</p><p>所以，画图之前要明确主题，一张图并且有且只有一个主题。例如，主题是服务器的物理部署，那么网络拓扑、应用组成、系统间关系等内容都可以简略地画，甚至不画。然后再换几个角度，从不同角度来表达，各有各的侧重点，从而把简化与忽略的内容都给补上。这样这些图就可以作为一个整体来达到完整、清晰表达的效果。</p><p>举个简单的、传统应用的例子。为了方便叙述，我们称其为“XYZ系统”：</p><p><img src="/img/2020-10-24-how-to-draw-graph/graph1.png" alt=""></p><p>这张图专注于XYZ系统的物理部署，一看就能知道有多少台服务器，每台服务器做什么用途的。那么这个系统是否与周围系统存在对接关系呢？我们用第二张图来表达：</p><p><img src="/img/2020-10-24-how-to-draw-graph/graph2.png" alt=""></p><p>虽然这张图不太匹配软件工程的理论，但是不要紧，能把意思说清楚就行。这张图专注于系统间关系的描述，于是将XXX系统简化为一个应用服务器与一个数据库服务器（当然，因为有物理部署图，所以我们知道XXX系统不只两台服务器）。从图中可以看出，XXX与B、C、D是通过接口进行对接的，而与A是通过ETL进行数据库数据传输的。</p><p>除了从不同角度描述，有时还需要从不同深度来描述，就像百度地图展示那样，先是缩小到整个中国，然后放大到省、市、区县、镇或街道，一层一层细化。数据流图就是这样表达的。</p><h2 id="图内元素的性质要统一"><a href="#图内元素的性质要统一" class="headerlink" title="图内元素的性质要统一"></a>图内元素的性质要统一</h2><p>架构图经常使用方框、箭头、icon之类的符号，这些都是图的元素。</p><p>画图时候要搞清楚，各类元素都是什么性质的？画了一个框，框里面的内容是哪种类别呢？是应用系统（application）？是功能模块（module）？服务器软件？系统组件（component）？类（class）？还是用户（user）？</p><p>连接两个框的箭头则是要表达关系，那么是什么关系呢？系统组件间的对接（动词或名词）？是流程（名词）？还是流程的流动（动词）？是数据（名词）？还是数据的流动（动词）？</p><p>如果连这个问题都没搞清楚，那么画出来的图在逻辑上都是混乱的，更别提准确了。</p><p>想清楚之后，例如我们确定框代表“应用系统”，线条代表“前后端接口调用的对接关系”，那么我们就可以开始进行梳理：我们要做的系统中，包含哪些应用系统？出一个清单，把这些系统都摆到图上，排个顺序，差不多之后再挨个考虑接口关系，有关系的画线，没关系的不管了。</p><p>对于稍微复杂的图，我们还要讲究一个层次感，要不然看起来就是一团糟，甚至实现起来也是一团糟。例如软件架构通常采用分层架构，分为展示层、业务层、持久层、数据层等等，并且这几层不光对组件进行了分割和隔离，还指出了一种递进关系，用户访问的是展示层，展示层调用业务层，业务层调用持久层，持久层调用数据层，结构清晰，层次分明。画图的时候，则是从外到内地画，先把大的层次摆出来，然后再找其中一个层次，想一想是继续分层，还是明确该层内部的框是什么性质（应用系统？功能模块？……），然后把框都摆上去。</p><p>举一个案例：</p><p><img src="/img/2020-10-24-how-to-draw-graph/graph4.png" alt=""></p><p>这是一个简单的整体架构图，将系统分为了四层，每个框中放的是组件，没有表达组件之间的关系。系统模块被包在了“业务应用”与“应用支撑”两个组件之内。</p><p>仍然是上面的图，我们换一种画法：</p><p><img src="/img/2020-10-24-how-to-draw-graph/graph5.png" alt=""></p><p>虽然框的含义是不统一的，但是在每个层次当中是统一的。最外层，用户使用了一个icon，而“业务管理系统”与两个“XX外部系统”都是“系统”。进入“业务管理系统”内部，里面的框均为“组件”。外层的线条表示了系统与系统的关系，而内层的线条绘制的是组件与组件的关系。那么，具体是什么关系呢？图中统一使用动词进行了表达，所以这些关系都是主动发起的动作。</p><p>再看一个简单的反面案例：</p><p><img src="/img/2020-10-24-how-to-draw-graph/bad-graph-1.png" alt=""></p><p>这图让人觉得不舒服，除了外观原因以外还有一点：在这张图里，框框一会儿表示一个应用系统（支付系统），一会儿又表示一台服务器（消息推送服务器），一会儿又表示一个组件（消息推送模块）。画线的时候，一会儿是应用系统对接应用系统（活动系统与服务平台、移动平台），一会儿又是应用系统对接组件（支付系统与报名支付模块），既有系统也有模块；一会儿是交互关系（推送），一会儿又变成了状态关系（用户数据），既有动词也有名词。全图连要表达什么意思都是不统一的，只因要素少所以还大概能表达出什么意思，要是再复杂些，看都看不懂，就更别谈准确了。</p><h2 id="先不要讲究格式，把东西堆好再说"><a href="#先不要讲究格式，把东西堆好再说" class="headerlink" title="先不要讲究格式，把东西堆好再说"></a>先不要讲究格式，把东西堆好再说</h2><p>先构图，然后再考虑完善内容。</p><p>除此之外，在定稿之前，图可能还要反复修改。你可能会识别出很多疏漏之处，例如识别出新的系统，或者新的关系，然后还要重新考虑元素摆放，调整线条走向。所以不要一开始就画得很精致很完美，先做个差不多的草稿，把东西堆好，理清思路，感觉差不多之后再好好调整样式，否则改起来太费劲了。</p><h2 id="不是所有东西都需要在图上表达"><a href="#不是所有东西都需要在图上表达" class="headerlink" title="不是所有东西都需要在图上表达"></a>不是所有东西都需要在图上表达</h2><p>图的表达深度是有限的，所以不要用有限的空间来进行无限的解释，要不然还要软件文档做什么？</p><p>仍然以最上面的XYZ系统的两张图为例。</p><p>肯定有人会问，XYZ系统部署在哪个网络环境？XYZ与A、B、C、D的具体对接方式与数据项呢？是通过哪台服务器实现的？假如D信息推送只通过应用服务器2来实现，我们要如何表达呢？</p><ul><li>网络环境，比如都在阿里云部署，我们在图上再套个框，把服务器都包进去，稍微描述一下，阿里云。</li><li>ABCD四个系统对接，简单画一下，OK，对接细节画不出来，所以不画了，反正不是这张图的核心主题。</li><li>顺便加一下用户访问的信息，一个PC端，一个基于HTML5的移动端，也不影响主题，稍微描述一下。</li></ul><p>改完之后：</p><p><img src="/img/2020-10-24-how-to-draw-graph/graph3.png" alt=""></p><p>图的主题还是物理部署，其他（系统对接、用户访问）都是顺带的，画出来可以增加信息量，而且不影响表达主题，不画也不会带来损失。至于对接方式、数据项、精确的服务器，这样的细枝末节就别画了——你描述细节，那么应该描述到什么程度呢？Restful API？有B数据查询、查询回调、状态检测等服务接口？数据查询主要查询x、y、z等数据项？网络策略如何？要是真把这些信息都写上，不仅会把图弄乱，而且还跑题，干脆就全部忽略。</p><p>图只是起点，不是终点。图的目的就是简单直观，简单的、不影响表达主题的信息可以适当加一加，增加信息量，但是，复杂的、不直观的细节，可以使用更好的表达方式，没必要非得挤到图里面去描述。</p><h1 id="处理图片与解释说明的关系"><a href="#处理图片与解释说明的关系" class="headerlink" title="处理图片与解释说明的关系"></a>处理图片与解释说明的关系</h1><p>如果图的格式是你自己发明的，又红又绿，又有实线还有虚线，既有方块又有三角，那么你是不是应该该做个图例，让人知道你那堆符号是什么意思？</p><p>作出来的图还应该是自解释的：拿到你的架构图，读者很容易能看到系统划分了几个区域或几个层次，每个区域有什么实体，每个实体之间有什么关系，用不着请你专程跑来一对一为提供讲解服务。</p><p>当然有时候它真的不是那么直观，所以你可以再写一段文字，大概讲一下图的构成，分成几个块，每一块主要有什么东西，哪些是需要重点关注的流程之类的信息。注意按从整体到部分的顺序描述，按流程的顺序写，因为正常看图就是这样来看的。内容有点多的话，就用1234的序号或者小标题来分割一下，这样也便于找个角落把图上未能表达的一些细节补上。</p><p>图与解释文字应该保持一致，文档与实际的实现也应该保持一致。当然，现在已经是内卷的时代，大家能把活赶出来就已经很不容易，很难再挤出时间来维护文档，但还是希望大家至少能维护一个备忘录，平时也多加注意，让后来的人能够知道文档的哪些地方已经过时。</p><h1 id="有标准规范的图，不要自己发明格式"><a href="#有标准规范的图，不要自己发明格式" class="headerlink" title="有标准规范的图，不要自己发明格式"></a>有标准规范的图，不要自己发明格式</h1><p>有些图表的目的与格式都是比较固定的，绘制时需要遵循一定的规范，包括但不限于：</p><div class="table-container"><table><thead><tr><th>图表</th><th>目的</th></tr></thead><tbody><tr><td>流程图</td><td>系统运行流程</td></tr><tr><td>数据流图</td><td>描述系统输入、输出与数据处理</td></tr><tr><td>实体-关系图（E-R图）</td><td>描述实体类型、属性和联系</td></tr><tr><td>用例图</td><td>描述“用户需要什么”</td></tr><tr><td>活动图</td><td>描述一个过程中的活动发生顺序</td></tr><tr><td>顺序图（时序图）、通信图</td><td>描述一段时间内的一连串交互</td></tr><tr><td>类图</td><td>描述面向对象分析中各类之间的关系</td></tr><tr><td>状态图</td><td>分析一个对象的不同状态及状态转移</td></tr></tbody></table></div><p>请使用业界常用的格式来绘制这些图，不要自己胡乱发明符号。</p><p>如果你不确定你要画的图有没有标准规范，那么请先到网上搜一搜，搜不到的话再自由发挥。</p><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><a href="/2020/02/20/how-to-write-document/">如何写好软件文档</a></li><li><strong>如何画架构图</strong></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;a href=&quot;/2020/02/20/how-to-write-document/&quot;&gt;前文讲到，写好文档，才能少挨骂&lt;/a&gt;。在此基础上，如果图表画得好，你可能还会被夸。&lt;/p&gt;
&lt;p&gt;本文以架构图为例，讲一讲如何给软件文档画图。&lt;/p&gt;</summary>
    
    
    
    <category term="项目开发经验" scheme="https://plusnan.me/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="文档" scheme="https://plusnan.me/tags/%E6%96%87%E6%A1%A3/"/>
    
  </entry>
  
  <entry>
    <title>找回丢失的Word表格边框</title>
    <link href="https://plusnan.me/2020/09/14/word-table-border-recovery/"/>
    <id>https://plusnan.me/2020/09/14/word-table-border-recovery/</id>
    <published>2020-09-13T16:00:00.000Z</published>
    <updated>2021-01-21T05:50:56.915Z</updated>
    
    <content type="html"><![CDATA[<p>Word有一个奇葩bug：有很小的概率会发生表格边框全部消失的现象。如果表格数量太多，挨个表格补回边框肯定不现实，幸运的是，我们可以用宏来解决这个问题。</p><a id="more"></a><h2 id="适用情况"><a href="#适用情况" class="headerlink" title="适用情况"></a>适用情况</h2><p>整篇文档的表格都使用了统一的表格边框样式，例如全部为“所有框线”。与统一样式不同的特殊表格只能跑完程序手工处理。</p><h2 id="操作步骤"><a href="#操作步骤" class="headerlink" title="操作步骤"></a>操作步骤</h2><ol><li>用鼠标右键点击功能区，在弹出菜单中选择“自定义功能区”。<br><img src="/img/2020-09-14-word-table-border-recovery/word1.png" alt=""></li><li>在弹出对话框中，右侧自定义功能区将“开发工具”打上对勾，确定。</li><li>在功能区出现了“开发工具”，点进去，然后选择最左面的“Visual Basic”。<br><img src="/img/2020-09-14-word-table-border-recovery/word2.png" alt=""></li><li>在弹出的Visual Basic中，选择“插入”菜单中的“模块”选项。</li><li>把本文后面的程序粘贴到里面。</li><li>点击“运行”菜单中的“运行子过程/用户窗体”，在弹出的对话框中选择“恢复丢失的表线”。</li><li>等程序运行完成。如果提示错误，那么需要回到Word，翻到指定页面手工处理一下。</li><li>回到Visual Basic，对着左侧的“模块1”点右键，选择移除，然后选择否，把代码删除，免得保存时候麻烦。<br><img src="/img/2020-09-14-word-table-border-recovery/word3.png" alt=""></li><li>保存、备份。你总不想让边框再丢失了吧？</li></ol><h2 id="程序内容"><a href="#程序内容" class="headerlink" title="程序内容"></a>程序内容</h2><h3 id="所有框线"><a href="#所有框线" class="headerlink" title="所有框线"></a>所有框线</h3><p><img src="/img/2020-09-14-word-table-border-recovery/table1.png" alt=""></p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Sub</span> 恢复丢失的表线()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">GoTo</span> e</span><br><span class="line">    <span class="keyword">Dim</span> msg <span class="keyword">As</span> <span class="type">String</span>, t <span class="keyword">As</span> Table</span><br><span class="line">    msg = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> t <span class="keyword">In</span> ActiveDocument.Tables</span><br><span class="line">        t.<span class="keyword">Select</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderTop)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderLeft)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderBottom)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderRight)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderHorizontal)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderVertical)</span><br><span class="line">            .LineStyle = Options.DefaultBorderLineStyle</span><br><span class="line">            .LineWidth = Options.DefaultBorderLineWidth</span><br><span class="line">            .Color = Options.DefaultBorderColor</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> msg &lt;&gt; <span class="string">&quot;&quot;</span> <span class="keyword">Then</span></span><br><span class="line">        MsgBox <span class="string">&quot;处理以下页面时发生错误，请复查：&quot;</span> &amp; vbCrLf &amp; msg, vbExclamation</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="symbol">e:</span></span><br><span class="line">    msg = msg &amp; Selection.Information(wdActiveEndAdjustedPageNumber) &amp; vbCrLf</span><br><span class="line">    <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure><h3 id="外边框加粗"><a href="#外边框加粗" class="headerlink" title="外边框加粗"></a>外边框加粗</h3><p>假定边框1.5磅，内部0.5磅：</p><p><img src="/img/2020-09-14-word-table-border-recovery/table2.png" alt=""></p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Sub</span> 恢复丢失的表线()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">GoTo</span> e</span><br><span class="line">    <span class="keyword">Dim</span> msg <span class="keyword">As</span> <span class="type">String</span>, t <span class="keyword">As</span> Table</span><br><span class="line">    msg = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> t <span class="keyword">In</span> ActiveDocument.Tables</span><br><span class="line">        t.<span class="keyword">Select</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderLeft)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderRight)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderTop)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderBottom)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderHorizontal)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth050pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderVertical)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth050pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> msg &lt;&gt; <span class="string">&quot;&quot;</span> <span class="keyword">Then</span></span><br><span class="line">        MsgBox <span class="string">&quot;处理以下页面时发生错误，请复查：&quot;</span> &amp; vbCrLf &amp; msg, vbExclamation</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="symbol">e:</span></span><br><span class="line">    msg = msg &amp; Selection.Information(wdActiveEndAdjustedPageNumber) &amp; vbCrLf</span><br><span class="line">    <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure><h3 id="仅上、下和表头三条横线"><a href="#仅上、下和表头三条横线" class="headerlink" title="仅上、下和表头三条横线"></a>仅上、下和表头三条横线</h3><p>假定边框1.5磅，内部0.5磅：</p><p><img src="/img/2020-09-14-word-table-border-recovery/table3.png" alt=""></p><figure class="highlight vb"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">Sub</span> 恢复丢失的表线()</span><br><span class="line">    <span class="keyword">On</span> <span class="keyword">Error</span> <span class="keyword">GoTo</span> e</span><br><span class="line">    <span class="keyword">Dim</span> msg <span class="keyword">As</span> <span class="type">String</span>, t <span class="keyword">As</span> Table</span><br><span class="line">    msg = <span class="string">&quot;&quot;</span></span><br><span class="line">    <span class="keyword">For</span> <span class="keyword">Each</span> t <span class="keyword">In</span> ActiveDocument.Tables</span><br><span class="line">        t.<span class="keyword">Select</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderTop)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">With</span> Selection.Borders(wdBorderBottom)</span><br><span class="line">            .LineStyle = wdLineStyleSingle</span><br><span class="line">            .LineWidth = wdLineWidth150pt</span><br><span class="line">            .Color = wdColorAutomatic</span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        </span><br><span class="line">        Selection.Borders(wdBorderLeft).LineStyle = wdLineStyleNone</span><br><span class="line">        Selection.Borders(wdBorderRight).LineStyle = wdLineStyleNone</span><br><span class="line">        Selection.Borders(wdBorderHorizontal).LineStyle = wdLineStyleNone</span><br><span class="line">        Selection.Borders(wdBorderVertical).LineStyle = wdLineStyleNone</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">If</span> t.Rows.Count &gt;= <span class="number">2</span> <span class="keyword">Then</span></span><br><span class="line">            t.Rows(<span class="number">1</span>).<span class="keyword">Select</span></span><br><span class="line">            <span class="keyword">With</span> Selection.Borders(wdBorderBottom)</span><br><span class="line">                .LineStyle = wdLineStyleSingle</span><br><span class="line">                .LineWidth = wdLineWidth050pt</span><br><span class="line">                .Color = wdColorAutomatic</span><br><span class="line">            <span class="keyword">End</span> <span class="keyword">With</span></span><br><span class="line">        <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    <span class="keyword">Next</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">If</span> msg &lt;&gt; <span class="string">&quot;&quot;</span> <span class="keyword">Then</span></span><br><span class="line">        MsgBox <span class="string">&quot;处理以下页面时发生错误，请复查：&quot;</span> &amp; vbCrLf &amp; msg, vbExclamation</span><br><span class="line">    <span class="keyword">End</span> <span class="keyword">If</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">Exit</span> <span class="keyword">Sub</span></span><br><span class="line"><span class="symbol">e:</span></span><br><span class="line">    msg = msg &amp; Selection.Information(wdActiveEndAdjustedPageNumber) &amp; vbCrLf</span><br><span class="line">    <span class="keyword">Resume</span> <span class="keyword">Next</span></span><br><span class="line"><span class="keyword">End</span> <span class="keyword">Sub</span></span><br></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Word有一个奇葩bug：有很小的概率会发生表格边框全部消失的现象。如果表格数量太多，挨个表格补回边框肯定不现实，幸运的是，我们可以用宏来解决这个问题。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://plusnan.me/categories/%E6%95%99%E7%A8%8B/"/>
    
    
  </entry>
  
  <entry>
    <title>社招招聘日记（三）：迷惑简历大赏</title>
    <link href="https://plusnan.me/2020/08/29/bad-resume/"/>
    <id>https://plusnan.me/2020/08/29/bad-resume/</id>
    <published>2020-08-28T16:00:00.000Z</published>
    <updated>2021-02-02T16:08:48.871Z</updated>
    
    <content type="html"><![CDATA[<p>本文收录个人在筛选简历时看到的令人哭笑不得的内容。在博君一笑的同时，希望也能引以为戒，不要因本可以避免的低级错误耽误前途。</p><p>为保护当事人隐私，本文会用文字转述简历内容，或者对简历内容进行处理后再截图。本文无意针对任何人，如果你发现简历内容是你写的，请保持低调并吸取教训，不要回怼，以免贻笑大方。</p><a id="more"></a><h1 id="与HR躲猫猫？"><a href="#与HR躲猫猫？" class="headerlink" title="与HR躲猫猫？"></a>与HR躲猫猫？</h1><ul><li><code>电话：130****5678  邮件：zhang***@163.com</code><ul><li><strong>点评：</strong>我对你的工作经验比较满意，请问如何通知你参加面试？</li></ul></li></ul><p>&nbsp;</p><ul><li><code>电话：1301234567</code><ul><li><strong>点评：</strong>同上。（电话位数错了，您拨打的电话是空号）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>电话：13012345678</code>（打了两三遍也打不通）<ul><li><strong>点评：</strong>比上面那两位强点，至少能把电话打出去了。（所以请保持电话畅通）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>邮件：123456789qq.com</code><ul><li><strong>点评：</strong>本来QQ邮箱就在鄙视链最底端，少写个@符号，鄙视链长度+1。</li></ul></li></ul><p>&nbsp;</p><ul><li>照片：<img src="/img/2020-08-29-bad-resume/modest-3.png" alt=""><ul><li><strong>点评：</strong>既不是三次元也不是二次元，失望。（请不要放照片！如果非要放照片，请放一张颜值高而且又不做作的照片）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>工作单位：20XX.X-20XX.X  保密</code><ul><li><strong>点评：</strong>简历审查结果——保密。（公司会对入职者进行背景调查。不核实学历和以往工作单位的话，公司是不敢录用的，怕在法律方面出问题。就算真在涉密单位工作过也是一样）</li></ul></li></ul><p>&nbsp;</p><h1 id="逼死强迫症症"><a href="#逼死强迫症症" class="headerlink" title="逼死强迫症症"></a>逼死强迫症症</h1><ul><li><code>了解Vue、BootStrep等框架</code><ul><li><strong>点评：</strong>很抱歉，我们公司使用Bootstrap框架进行开发。作为BootStrep开发者，您不适合我们公司的工作。（不要把关键词语写错）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>熟练使用postMan工具</code><ul><li><strong>点评：</strong>您也熟练地使用了<small>小</small>驼<small>峰</small>命名法？（IT行业有非常多的英文词语，请使用正确的大小写来拼写这些名字。该软件的正确写法是<code>Postman</code>，写成<code>postman</code>或<code>POSTMAN</code>会降低我们的好感度，写成<code>postMan</code>则直接PASS）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>利用Redis技术较少系统的压力</code><ul><li><strong>点评：</strong>输入法出买了你，增加了你求值的鸭梨。（别写错别字）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>掌握HTML5、javascript、CSS3、XML等WEb前段基础</code>、<code>具有良好的编码习惯，习惯在代码中加入注视说明</code><ul><li><strong>点评：</strong>“WEb前段”和“注视说明”是哪门子传统艺能？（中英文双语都有错字，绝了……）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>熟练SpringBoot、SpringCloud的使用</code><ul><li><strong>点评：</strong>熟练？你为什么会这么熟练啊？（请保证自己写的东西符合汉语语法）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>系统使用javaweb开发，后端使用springboot redis mybatis rabbitmq mysql进行调用。主要负责需求文档 设计文档 数据库设计 系统架构设计 功能开发 后端与vue.js前端交互</code><ul><li><strong>点评：</strong>大哥麻烦用一下标点符号否则句子那么长看起来很费劲而且简历是求职重要依据那么使用规范汉字和规范标点符号都是最起码的事情吧还有后面那堆词语都用空格分割了为什么前面的javaweb反倒没使用空格难道这是一个固定词语吗（请使用规范的标点符号）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>工作经历：XXXXX公司       XXXX.X-XXXX.X    开发攻城狮</code><ul><li><strong>点评：</strong>我们不是动物园，我们只招聘人类。（不要用外号描述工作。从面试环节了解你的性格之前，外号既可以理解成热爱工作，也可以理解成对现有工作的不满或嘲讽）</li></ul></li></ul><p>&nbsp;</p><ul><li>混合样式——<img src="/img/2020-08-29-bad-resume/mixed-1.png" alt="混合样式"><ul><li><strong>点评：</strong>既用半角标点<span style="display:none;">x</span>,又用全角标点<span style="display:none;">x</span>;既 要 留 空 格，<span style="letter-spacing: -0.2em;">又紧贴列表数字序号</span>；既使用<span style="font-family:'Times New Roman',Times,serif;">Times New Roman</span>，<span style="font-family:'Songti SC', STSong, NSimSun, SimSun, serif;">又使用宋体</span>；<big>有些字大</big>，<small>有些字小</small>……我的<em>强迫症</em>又<strong>发作</strong>了。（请统一字体、字号等格式，这是写文档最起码的要求之一）</li></ul></li></ul><p>&nbsp;</p><ul><li>高端Word模板——<img src="/img/2020-08-29-bad-resume/preview.png" alt=""><ul><li><strong>点评：</strong>你使用了高端大气上档次的简历模板，而我低调奢华有内涵的MacBook Pro却无法正确显示，实在可惜。（你不知道HR会用什么东西来看你的简历，所以请把简历转成全设备通用的PDF格式之后再投递）</li></ul></li></ul><p>&nbsp;</p><ul><li>躲开了上面两个坑，跳进了另一个坑：<img src="/img/2020-08-29-bad-resume/noformat.png" alt=""><ul><li><strong>点评：</strong>格式整齐，模板兼容性好，然而内容没有条理，看不清楚！（请注意使用空行、分割线、项目符号等形式把不同项目分割开，保持清晰）</li></ul></li></ul><p>&nbsp;</p><ul><li>简历表：<img src="/img/2020-08-29-bad-resume/table.png" alt=""><ul><li><strong>点评：</strong><br>| 项目        | 说明                               |<br>|——————|——————————————————|<br>| 总体排版    | 表格式简历看起来不舒服                 |<br>| 内容项      | 格式不一致，而且明明有表头，还在使用冒号 |<br>| 项目经历亮点 | 无                                 |<br>| 结论        | PASS                               |</li></ul></li></ul><p>&nbsp;</p><ul><li><code>システム処理功能开发，SpringMVC+Redis+Kafka予約受付実現。</code><ul><li><strong>点评：</strong><span style='font-family: "-apple-system", BlinkMacSystemFont, "Yu Gothic Medium", "游ゴシック Medium", YuGothic, "游ゴシック体", "Noto Sans Japanese", "ヒラギノ角ゴ Pro W3", "メイリオ", "Hiragino Kaku Gothic ProN", "MS PGothic", Osaka, "sans-serif";'>我們的、中国人的幹活。你的、日本語的、八格牙路、死啦死啦的！</span>（即使做过外国项目，也请用中国话来表达）</li></ul></li></ul><p>&nbsp;</p><h1 id="装◯不成反被◯"><a href="#装◯不成反被◯" class="headerlink" title="装◯不成反被◯"></a>装◯不成反被◯</h1><ul><li><code>精通Java</code><ul><li><strong>点评：</strong>只要你敢说精通，我就敢把面试问题准备到字节码那种等级。所以，除非你真的精通底层原理，否则不要用“精通”这个词语。</li></ul></li></ul><p>&nbsp;</p><ul><li><code>GitHub：https://github.com/xxxxxx</code><ul><li><strong>点评：</strong><img src="/img/2020-08-29-bad-resume/gayhub.png" alt="新账号"> GitHub网站是个人就能注册，所以有账号不代表你水平高。如果你想证明自己能力，请在找工作之前就在GitHub或个人博客放入一些有实质内容的、自己原创的东西，否则会被视为装◯。</li></ul></li></ul><p>&nbsp;</p><ul><li><code>Blog：https://xxxxxx.me</code><ul><li><strong>点评：</strong><img src="/img/2020-08-29-bad-resume/502.png" alt=""> 我们要通过你的Blog来判断你的能力，因此请保证网站状态正常，能够在中国进行访问，并且不要设置注册墙或付费墙（必须登录甚至付费之后才能看到内容），否则把地址贴出来就没有意义了。</li></ul></li></ul><p>&nbsp;</p><ul><li><code>最新版本简历参见boss直聘电子版</code><ul><li><strong>点评：</strong>请扫描以下二维码查看简历审核结果<br><img src="/img/2020-08-29-bad-resume/lazyguy.png" alt="扫描二维码获取简历审核结果"></li></ul></li></ul><p>&nbsp;</p><ul><li><code>期望从事职业：互联网软件工程师、数据库开发工程师、Java开发工程师</code> <ul><li><strong>点评：</strong>不要同时往一家公司的多个岗位投简历。顺便提醒一下，日常生活中不要同时搞多个对象，否则后果更严重——<a href="https://baike.baidu.com/item/%E7%99%BD%E5%AD%A6%E7%8E%B0%E5%9C%BA"><img src="/img/2020-08-29-bad-resume/wa2.jpg" alt=""></a></li></ul></li></ul><p>&nbsp;</p><ul><li><code>个人优势：熟悉spring框架，熟悉springmvc框架，熟悉oracle数据库，熟悉mybatis框架……（中间内容略）……写不下了……</code>（备注：此人直接使用BOSS直聘生成的电子简历）<ul><li><strong>点评：</strong>你太优秀，我们公司装不下了……</li></ul></li></ul><p>&nbsp;</p><ul><li><code>个人爱好：唱歌、跑步、篮球</code><ul><li><strong>点评：</strong>全民制作人们大家好，我是练习时长两年半的个人练习生蔡徐坤，喜欢唱、跳、rap、篮球，music……（鸡你太美～）<img src="/img/2020-08-29-bad-resume/chickenyoubeautiful.jpg" alt="鸡你太美"> 不建议写个人爱好，除非你了解到目标公司喜欢团建活动，而且你的爱好恰好可以在团建活动中派上用场。</li></ul></li></ul><p>&nbsp;</p><ul><li><code>证书奖项：XX学院社团活动积极分子、XX学院三等奖学金、计算机二级证书</code><ul><li><strong>点评：</strong>不要列举含金量比较低的奖项，也不要列举985/211学校中多数人都能拿到手的证书。（例外情况：如果大学拿过ACM区域赛等与软件工作相关，而且含金量较高的奖项，写在简历上可以加分）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>热爱生活，不接受加班</code><ul><li><strong>点评：</strong>我也热爱生活，但是为了守护我来之不易的幸福生活，我不接受你。（你以为我们愿意安排加班吗？）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>外包勿扰</code><ul><li><strong>点评：</strong>我们这些使唤外包的甲方大爷们浪费您宝贵的时间了，请谅解。（这类事情请提前调查好，或者先向公司确认，然后再决定是否投简历。不要把这种字眼写到简历里）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>个人简历：https://xxxx.github.io</code><ul><li><strong>点评：</strong><br>结局一：网站打不开，没有简历，Pass；<br>结局二：在网络上自我<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU0JUJBJUJBJUU4JTgyJTg5JUU2JTkwJTlDJUU3JUI0JUEy">出道<i class="fa fa-external-link-alt"></i></span>，工作还没找上门，却遭到了各类骚扰。<br>（虽然直接扔网址虽然是一种很装X的投递方法，但是GitHub Pages在中国访问不正常，而且有些公司不能直接上外网，看不了，所以该写的内容还得写）</li></ul></li></ul><p>&nbsp;</p><ul><li>（中英文双语简历）<code>20XX.X-20XX.X  XXX System  Android Development</code>、<code>20XX.X-20XX.X  XXX System  Background Development</code>、<code>analysed the whole process from points generation to points usage, designed relevant pages; finished pages development of xxx, xxx, xxx; optimized login process together with credits, database accessing and data updating</code><ul><li><strong>点评：</strong>Your English is too simple, sometimes naïve!（除非应聘外企，否则不要写英文简历。写英语时请使用地道的英语，不要用Chinglish）</li><li>顺便帮他纠正一下英语表达：<code>Android developer</code>、<code>backend developer</code>、<code>Analyzed the whole process from point production to point consumption and developed relevant pages; Developed pages of xxx, xxx, xxx; Improved the login program by optimizing database queries.</code>（最后一条，中英原文都看不懂，只好按自己理解编一个说法了）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>校学生会干部</code>、<code>校XX社团主席</code><ul><li><strong>点评：</strong>所以想证明自己虽然开发能力不行，但是可以陪用户喝酒？（都工作几年了，你觉得大学时候的事情还能用来证明工作能力吗）</li></ul></li></ul><p>&nbsp;</p><h1 id="谦虚是一种美德"><a href="#谦虚是一种美德" class="headerlink" title="谦虚是一种美德"></a>谦虚是一种美德</h1><ul><li>个人能力之一：<img src="/img/2020-08-29-bad-resume/modest.png" alt=""><ul><li><strong>点评：</strong>在简历方面，谦虚不会使人进步。（不要自曝缺点）</li></ul></li></ul><p>&nbsp;</p><ul><li>个人能力之二：<img src="/img/2020-08-29-bad-resume/modest-2.png" alt=""><ul><li><strong>点评：</strong>　　　　　　　　　　　　　　　　　　　　（　　　　　　　　　　　）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>学历：高中（本科为XXXX大学XX专业，因挂科较多，加上大四时家中发生了各类事情，未能拿到毕业证、学位证）</code><ul><li><strong>点评：</strong>学历是硬条件，没有大学毕业证，你一定找不到工作，但是，你还可以用自主创业的方法来延迟失业。正如那句话所说：当上帝关了这扇门，一定会为你打开另一扇窗，只不过窗户在十八楼。祝你好运！（没有本科学历，一般公司无法办入职手续。这种情况下只能去不正规的小公司，或者用创业的方式来延迟失业）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>自学成才</code><ul><li><strong>点评：</strong>失败了，知道因为啥失败吗？这一个厨师不看菜谱，看上兵法了，撤！（在招聘者眼中，无论实际情况如何，强调自学成才=学得不精）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>技能：Java [============........] 60%</code> 或 <code>技能：Java [============........] 熟悉</code><ul><li><strong>点评：</strong>进度条到100%之后会发生什么事情，报错吗？（不要用进度条表示掌握程度，因为你不可能界定100%的范围）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>我不仅学会了MySQL数据库，而且对Spring Boot框架有了一定的了解，同时意识到团队协作是项目成功不可或缺的部分</code><ul><li><strong>点评：</strong>请先补交你们学校的学费，拿到毕业证书，然后再来找工作。（企业是招人干活的，不是培训班，所以工作经历应该是讲自己完成了什么工作，解决了什么问题，给企业带来了什么成果，而不是自己学会了什么）</li></ul></li></ul><p>&nbsp;</p><ul><li>愿意学习先进的技术<ul><li><strong>点评：</strong>愿意学习 = 还没有实际工作能力，先想法混到一份工作，然后走一步看一步吧。（道理同上）</li></ul></li></ul><p>&nbsp;</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul><li><code>政治面貌：中共党员</code><ul><li><strong>点评：</strong>找到一个可以让你996的正当理由了——不忘初心，牢记使命！（除非有特殊要求，软件开发工作中没人在乎你属于哪个党派。国企或事业单位除外）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>Blog：http://60.205.xxx.xxx:8090/</code>、<code>Blog：https://www.jianshu.com/u/202cb962ac59075b964</code><ul><li><strong>点评：</strong>小隐隐于野，中隐隐于市，大隐隐于朝……（虽然没毛病，也不会因此认为你怎么样，不过这种URL真的不太好看）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>工作经历：20XX.X-20XX.X  XXXX公司  Java开发工程师  15000元/月</code><ul><li><strong>点评：</strong>无论是起始工资、当前工资，还是预期工资，不要透露任何与工资有关系的情报，这对你未来谈薪非常不利。特别是今年，疫情导致求职者找工作更加困难，地位更低，谈薪资时招聘方可以把你的收入压得更狠。</li></ul></li></ul><p>&nbsp;</p><ul><li>南京岗位：<code>期望工作地点：南宁</code>、<code>期望工作地点：南昌</code><ul><li><strong>点评：</strong>要不要去南通、南平、南阳或南充工作？（请看清工作地点之后再投简历。有些工作的工作性质特殊，需要驻场或出差，工作地点与公司地点不一致，这种情况下建议主动询问工作地点，然后再投简历）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>期望薪资：1.5~2k/月</code>、<code>期望薪资：15~20元/年</code><ul><li><strong>点评：</strong>你还年轻，不要作贱自己！（不要写薪资，如果非要写，别把货币单位写错）</li></ul></li></ul><p>&nbsp;</p><ul><li>锟斤拷锟斤拷锟斤拷：<img src="/img/2020-08-29-bad-resume/luanma.png" alt=""><ul><li><strong>点评：</strong>锟斤拷锟斤拷锟斤拷锟MacBook斤拷锟斤拷锟斤拷（锟斤拷锟斤拷锟斤Word拷锟斤拷PDF锟斤拷拷拷）</li></ul></li></ul><p>&nbsp;</p><ul><li><code>由于XX部门与XX部门互相推诿，导致实际交付效果不理想</code><ul><li><strong>点评：</strong>你所写的负面内容已经成为本文中的一个负面案例，以便让其他人吸取教训。（不要写负面内容，就算要证明自己能够解决问题，也不要用负面语言来表达）</li><li>实践证明，经常散发消极情绪的人会对团队成员工作热情与稳定性造成负面影响，间接地危害项目交付质量，因此要设法改造或踢掉此类成员。</li></ul></li></ul><p>&nbsp;</p><ul><li><code>通过请求方法取得用户输入参数，在数据库查询用户XXX信息，存入PO对象。检查对象中的XXX字段，如果为0，说明无业务办理权限，程序应返回“没有操作权限”的错误提示；否则开启事务，生成XX信息，并更改XX表，将XX数据修改为XX，操作完成后提交事务，并返回“操作成功”信息，结束流程。</code><ul><li><strong>点评：</strong>请去培训班工作，不仅能挣到钱，还能帮助更多人失业，多好！（不要讲实现细节，容易泄漏商业机密，别人也没有兴趣看，而且会被认为简历写不出什么有含金量的事情所以只好凑数。像上面这个，直接说<code>用XX框架开发XX模块</code>就够了）</li></ul></li></ul><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><a href="/2020/08/16/resume-filtering/">作为招聘者，筛选简历的关注点</a></li><li><a href="/2020/08/20/resume-improvement/">来自招聘者的建议——如何优化简历</a></li><li><strong>迷惑简历大赏</strong></li><li>关于面试问题设计</li><li>面试禁忌</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文收录个人在筛选简历时看到的令人哭笑不得的内容。在博君一笑的同时，希望也能引以为戒，不要因本可以避免的低级错误耽误前途。&lt;/p&gt;
&lt;p&gt;为保护当事人隐私，本文会用文字转述简历内容，或者对简历内容进行处理后再截图。本文无意针对任何人，如果你发现简历内容是你写的，请保持低调并吸取教训，不要回怼，以免贻笑大方。&lt;/p&gt;</summary>
    
    
    
    <category term="工作日记" scheme="https://plusnan.me/categories/%E5%B7%A5%E4%BD%9C%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="招聘" scheme="https://plusnan.me/tags/%E6%8B%9B%E8%81%98/"/>
    
    <category term="简历" scheme="https://plusnan.me/tags/%E7%AE%80%E5%8E%86/"/>
    
  </entry>
  
  <entry>
    <title>社招招聘日记（二）：来自招聘者的建议——如何优化简历</title>
    <link href="https://plusnan.me/2020/08/20/resume-improvement/"/>
    <id>https://plusnan.me/2020/08/20/resume-improvement/</id>
    <published>2020-08-19T16:00:00.000Z</published>
    <updated>2020-09-16T09:30:40.608Z</updated>
    
    <content type="html"><![CDATA[<p>“是金子总会发光”不适用于招聘。为了提高简历通过率，你需要针对招聘者关心的东西来优化你的简历。</p><a id="more"></a><h1 id="优化整体格式"><a href="#优化整体格式" class="headerlink" title="优化整体格式"></a>优化整体格式</h1><p>不要忽略排版细节！收到简历时，良好的排版会给人留下良好的第一印象，而差劣的排版会让人怀疑此人是否能认真工作。</p><p>你的简历请满足以下要求：</p><ol><li>内容、版式简洁明了；</li><li>排版清晰，逻辑顺畅；</li><li>字体字号整齐，标点符号规范；</li><li>正确拼写英文单词，例如<code>MySQL</code>而非<code>mysql</code>、<code>Mysql</code>或<code>MySql</code>。</li></ol><p>请避免套用网上模板：下载量越多，说明用的人越多，也越容易让HR审美疲劳（甚至会让人觉得你参加过培训班）。“keep simple and naive”的设计也是可以的，例如只有标题加下划线、正文加项目符号、内容保持对齐三种样式，足够了。</p><p>以下问题会导致你直接出局：</p><ol><li>错别字和语病——中国话都写不好，说明你工作不认真；</li><li>篇幅过长，例如写了五六页内容——说明你表达能力和总结提炼的能力差；</li><li>页面版式太花哨，或者有背景色/背景图，让人难以阅读重要内容——面试时简历是要打印出来的；</li><li>使用了乱七八糟的文件格式，无法打开，或者打开之后乱码——浪费HR时间；</li></ol><p>投递简历时请将文件转为PDF格式，因为Word格式容易导致排版错乱。</p><h1 id="梳理项目经历"><a href="#梳理项目经历" class="headerlink" title="梳理项目经历"></a>梳理项目经历</h1><p>工作与项目经历是招聘者最关心的内容。通过项目经历，招聘者可以了解到：</p><ul><li>你的语言表达能力、总结提练能力如何？</li><li>有没有做过大型项目？</li><li>是否熟悉大型系统会遇到的问题（数据量大、并发量高，等等）？</li><li>有没有经历过完整、规范的工作流程？</li><li>独立完成，还是团队协作完成？</li><li>在项目中是凑数、普通成员，还是核心成员或救火队员？</li><li>曾经参与过哪些行业，是否与本公司一致？</li><li>实践过哪些技术栈（Vue/React，Spring Boot……）？只是肤浅地增删改查，还是深入研究、优化完善？</li><li>只做过开发工作，还是做过管理工作，或是多面手？</li><li>有没有个人思考？</li><li>……</li></ul><h2 id="反例与分析"><a href="#反例与分析" class="headerlink" title="反例与分析"></a>反例与分析</h2><p>先看几个非常典型的反面案例：</p><h3 id="案例一"><a href="#案例一" class="headerlink" title="案例一"></a>案例一</h3><ul><li>项目名称：XXX项目</li><li>项目简介：XXX……</li><li>工作职责：<ol><li>参与系统需求、设计</li><li>开发了XX模块、XX模块</li><li>系统部署与维护</li></ol></li></ul><p>分析：没有体现技术栈，我们无法得知你用了什么语言和技术，也无法得知你的参与程度，只能认为你在凑数。</p><h3 id="案例二"><a href="#案例二" class="headerlink" title="案例二"></a>案例二</h3><ul><li>项目名称：XXX项目</li><li>项目简介：XXX……</li><li>工作职责：<ol><li>参与系统需求、设计</li><li>开发了XX模块、XX模块，使用了Spring Boot+MyBatis+Redis+Kafka+XXXXXX</li><li>系统部署与维护，系统部署在Linux服务器，使用Tomcat+MySQL+XXX</li></ol></li></ul><p>分析：虽然介绍了技术栈，但只是简单地堆砌单词，没有结合项目具体工作描述，无法体现出你是如何利用这些技术的。</p><h3 id="案例三"><a href="#案例三" class="headerlink" title="案例三"></a>案例三</h3><ul><li>项目名称：XXX项目</li><li>项目简介：XXX……</li></ul><p>分析：只介绍了项目，没写自己做什么事情，怎么认定你有项目经验？（这就好比我把QQ、微信、支付宝等产品介绍写到简历中，我就是参与过大型互联网产品开发的人了）</p><h3 id="案例四"><a href="#案例四" class="headerlink" title="案例四"></a>案例四</h3><ul><li>项目名称：XXX项目</li><li>项目简介：XXX……</li><li>工作内容：<ul><li>针对XX功能进行判断：在A情况下，系统采取a措施，处理b数据，做出c操作，实现d效果；在E情况下，采用f方法，提示用户录入g数据，根据h规则与i规则进行j处理，得出k结果。</li></ul></li></ul><p>分析：请专注于技术，不要钻到业务细节中，一是招聘者不会关心具体业务（我们用不到你们的业务），二是你会泄露你们公司的商业机密。</p><h2 id="整理工作内容"><a href="#整理工作内容" class="headerlink" title="整理工作内容"></a>整理工作内容</h2><p>通过上面几个反例，你需要意识到合适的项目经历应该包含以下内容：</p><ul><li>项目名称</li><li>项目背景</li><li>技术栈</li><li>工作职责（说明不是凑数的）</li><li>个人亮点（说明不是应付工作的）</li></ul><h3 id="项目背景"><a href="#项目背景" class="headerlink" title="项目背景"></a>项目背景</h3><p>用简洁的语言交待项目背景：</p><ul><li>项目或产品大概是做什么事情的；</li><li>项目的意义或优势，例如政府项目可以是提高了信息化管理水平；</li><li>简要交待技术栈，用了什么框架，用了什么技术。</li></ul><p>目的是让他人对你项目的价值、技术有个基本的了解。</p><h3 id="工作职责"><a href="#工作职责" class="headerlink" title="工作职责"></a>工作职责</h3><p>简单讲一下自己在团队中的主要职责（例如开发人员），让招聘者知道你在项目中不是吃干饭的。当然，如果项目经历充实，不写角色也无妨。</p><h3 id="提炼亮点"><a href="#提炼亮点" class="headerlink" title="提炼亮点"></a>提炼亮点</h3><p>要想说明工作能力强，就要拿出实际的证据，例如解决了项目问题，或者干出了业绩，拿亮点闪瞎招聘者的眼睛。</p><p>工作内容应当尽量遵循“STAR法则”（情境、任务、行动、结果）来写，让人知道你不是机械地执行命令，而是有针对性地解决了实际问题：</p><ul><li>情境：需要解决什么问题，或者遇到了什么事情</li><li>任务：你的目标是什么</li><li>行动：你做了什么事情</li><li>结果：最后达到了什么效果。如果能量化，那么务必提供一个有说服力的数字，例如系统响应时间从2s降低到200ms，或者承担了30%的开发工作。</li></ul><p>举两个典型例子：</p><ul><li><p>开发XX、XX模块</p><ul><li>分析：只有“行动”，没有背景和结果，也无法体现XX模块的重要性，会让人认为只做了一些基础的增删改查。</li><li>优化：<ul><li>使用XXX框架、XX技术 <em>（行动：使用了XX技术）</em>，开发XX、XX等<strong>核心功能</strong>模块 <em>（如果是核心功能，强调核心）</em></li><li>使用XXX框架、XX技术 <em>（行动：使用了XX技术）</em>，开发XX、XX等模块，开发工作量占全系统的30%。<em>（如果不是核心功能，强调工作量）</em></li></ul></li></ul></li><li><p>SQL性能优化</p><ul><li>分析：优化怎么做的？有效果吗？</li><li>优化：<ul><li>通过慢查询日志、执行计划识别分析执行效率较低的SQL <em>（行动之一：通过两种方法发现问题）</em>，根据具体情况改写SQL，调整索引 <em>（行动之二：通过改SQL和建索引解决了这个问题）</em>，提高数据库查询效率，查询时间从平均xx降低到xx <em>（情境和结果：系统性能低，经过优化，系统性能提高）</em>。</li></ul></li></ul></li></ul><p>除主要工作外，为了提高工作效率而搞研究也是能接受的：</p><ul><li><p>编写Python脚本 <em>（行动：写Python脚本）</em>实现XX、XX等任务的自动化 <em>（目标：自动化）</em>，大幅提高团队工作效率，有效地避免了内容遗漏、操作失误等问题 <em>（情境和结果：解决了人工操作效率低、容易出错的问题）</em>。</p></li><li><p>在开发过程中指导其他员工，并进行了X次技术分享活动，主题包括XX、XX等。<em>（）</em></p></li></ul><p>如果是一个参与程度不高的项目，提练不出什么亮点，那么建议隐藏掉，只谈大项目。<!-- TODO 加分：系统架构、整体认知；带团队经历 ；忌讳：学习了XXX；写不熟悉东西 --></p><h3 id="加分项"><a href="#加分项" class="headerlink" title="加分项"></a>加分项</h3><p>以下事情会从侧面证明你的工作能力，如果与你参与的项目匹配，请在简历上进行体现：</p><ul><li>成型产品：有成型产品，说明系统已经上线了。如果产品评价好，说明系统做得不错，不是糊弄的。</li><li>技术栈：大家都喜欢新技术。用过各类新技术的员工更受欢迎。</li><li>团队规模：小团队工作可以随意一些，而大团队工作不规范就会变成屎山。在大型团队中工作，阅历应该更丰富了。</li><li>合同额、开发周期：项目制公司的话，合同额和开发周期也能证明软件规模。做过大型项目，阅历和规范程度应该会比较高。</li><li>用户量：道理同上。</li><li>相同行业：就算技术差点，至少业务知识不是零蛋。</li></ul><h3 id="如果技术栈太老旧"><a href="#如果技术栈太老旧" class="headerlink" title="如果技术栈太老旧"></a>如果技术栈太老旧</h3><p>因为商业项目更加追求稳定，所以很多项目仍然用比较旧的技术栈，甚至还在使用JDK 5，这是正常现象。不必隐瞒具体技术：老旧技术用熟了，能够掌握基本原理，切换起来也容易。</p><p>很多公司希望员工进去就能干活。完全没碰过新技术的话，找工作会非常吃亏，所以建议在简历中体现自己特意学习过某些新技术（例如因XX技术较为落后，曾自学XXX并尝试用新技术实践项目功能，让HR觉得你比较上进），或者直接假装自己项目是用新技术开发的。但是，除了在简历提及以外，你必须要确实实践过，否则面试会穿帮。</p><h2 id="优化结果"><a href="#优化结果" class="headerlink" title="优化结果"></a>优化结果</h2><p>根据以上建议，简历优化结果如下：</p><ul><li>项目名称：XXX项目</li><li>项目简介：XXX，目前用户访问量已达XXX万。项目使用了XXX、YYY、ZZZ等技术。<em>（把项目使用到，但是你自己没有深入使用过的技术框架放到项目简介里，让招聘者了解你们项目大体的技术栈）</em></li><li>工作职责：主要负责前期需求调研、需求编写、系统设计，以及XX与XX模块开发工作。<em>（让人知道你的主要职责是开发人员，而不是测试、运维或者PPT岗位）</em></li><li>工作内容：<em>（此处专注于展示亮点）</em><ul><li>作为项目主要成员，使用XX框架开发XX模块，实现XX、XX、XX等核心功能。</li><li>使用XXX作为消息队列服务，实现后台数据推送功能。</li><li>在技术选型过程中，考虑到XX功能会存在瞬时高并发场景，选择XX框架进行处理。实际开发过程中，利用XX框架，将XX数据进行XX处理，并发能力xx%。</li><li>通过慢查询日志、执行计划识别分析执行效率较低的SQL，根据具体情况改写SQL，调整索引，提高数据库查询效率，查询时间从平均xx降低到xx。</li><li>与其他同事合作，对项目进行拆分和重构，实现基于XXX的持续集成和自动化部署。</li><li>编写Python脚本实现XX、XX等任务的自动化，大幅提高团队工作效率，有效地避免了内容遗漏、操作失误等问题。</li><li>在开发过程中指导其他员工，并进行了X次技术分享活动，主题包括XX、XX等。</li></ul></li></ul><p>这样写，就算仍然找不到工作，至少会有更多公司通知你参加面试了。</p><h1 id="个人技能优化"><a href="#个人技能优化" class="headerlink" title="个人技能优化"></a>个人技能优化</h1><p>通常简历上还会写着“熟悉XXX”、“了解XXX”。这个地方也是有优化空间的：</p><ol><li>注意招聘中的招聘要求（JD），“熟悉”、“了解”的内容尽量贴近JD。碰到不太懂技术、会用Ctrl+F来检查单词的HR时不吃亏。</li><li>梳理你“熟悉”、“了解”的东西，确定这些技能的学习成本。尽量少写那些只需要几分钟或者一两天就能掌握的东西，多写一些需要时间积累才能熟练掌握的东西。</li><li>不要简单地“熟悉XX”、“了解XX”。熟悉了解之后要再写点东西，例如“熟悉JavaScript，掌握原型链、Promise等原理”，这样才能说明你真熟悉JavaScript。</li><li>如果你英语好，或者会翻墙（注意不要明说，以免因言获罪），或者有一些软件开发方面的个人爱好，也可以稍微提及。</li></ol><h1 id="了解其他加分项与减分项"><a href="#了解其他加分项与减分项" class="headerlink" title="了解其他加分项与减分项"></a>了解其他加分项与减分项</h1><h2 id="加分项-1"><a href="#加分项-1" class="headerlink" title="加分项"></a>加分项</h2><p>如果工作时间不长，大学英语六级过了，或者拿过ACM区域赛之类等含金量较高的奖项，请把它们写到简历中。</p><p>如果以下账号有实际内容，务必写到简历中：</p><ul><li>GitHub：例如参与过开源项目，提交过代码，或者自己的GitHub仓库被打了很多Star，我们会认为你有一定的能力。</li><li>个人博客：如果个人博客活跃，而且有一些写得好的原创文章，我们就知道你对技术有所思开，擅长总结。</li><li>技术论坛：例如活跃于Stack Overflow，我们会认为你对技术掌握比较好，有解决问题能力。</li></ul><p>注意：如果你在简历中写了社交媒体链接，那么我们一定会进入这些网站来核实真伪。假如你的GitHub或博客中缺乏原创内容，只有些helloworld级的练习文件，或者都是些转载或fork内容，或者在找工作时候才胡乱凑些东西，那么我们会认为你是在装X，然后把你的简历给Pass掉。</p><h2 id="减分项"><a href="#减分项" class="headerlink" title="减分项"></a>减分项</h2><ul><li>培训班经历：由于培训班培训内容经常与行业实际脱节，所以很多公司不喜欢招参加过培训班的人，甚至会直接将有培训班经历的人给Pass掉。实际工作中用到的技术知识基本上都是“实践型”知识，照着网上的培训教程就能学会基本用法，实在没必要去培训班。</li><li>外包公司经历：外包公司员工经常被安排做一些初级工作，接触不到核心功能与技术。如果简历中体现不出你有所思考，那么我们只能当作民工来使唤了。</li><li>小公司/非软件公司经历：小公司，或主业不是软件的公司（例如电子商务），通常缺乏标准开发规范，其中的开发者可能也缺乏规范意识。</li></ul><h1 id="最后的注意事项"><a href="#最后的注意事项" class="headerlink" title="最后的注意事项"></a>最后的注意事项</h1><p>写完之后务必从头到尾认真检查几遍。如果有信得过的哥们，可以再让他们帮忙检查一下简历。</p><p>只要你能把事情说得像自己做过一样，那么项目经历就可以稍微吹吹牛，毕竟我们不可能去你们公司系统里核实代码提交记录。但是，简历的内容会被拿来当作面试的话题，因此要提前想好实施细节（甚至包括版本号），而且不懂的东西不要乱编，以免被打脸。</p><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><a href="/2020/08/16/resume-filtering/">作为招聘者，筛选简历的关注点</a></li><li><strong>来自招聘者的建议——如何优化简历</strong></li><li><a href="/2020/08/29/bad-resume/">迷惑简历大赏</a></li><li>关于面试问题设计</li><li>面试禁忌</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;“是金子总会发光”不适用于招聘。为了提高简历通过率，你需要针对招聘者关心的东西来优化你的简历。&lt;/p&gt;</summary>
    
    
    
    <category term="工作日记" scheme="https://plusnan.me/categories/%E5%B7%A5%E4%BD%9C%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="招聘" scheme="https://plusnan.me/tags/%E6%8B%9B%E8%81%98/"/>
    
    <category term="简历" scheme="https://plusnan.me/tags/%E7%AE%80%E5%8E%86/"/>
    
  </entry>
  
  <entry>
    <title>社招招聘日记（一）：作为招聘者，筛选简历的关注点</title>
    <link href="https://plusnan.me/2020/08/16/resume-filtering/"/>
    <id>https://plusnan.me/2020/08/16/resume-filtering/</id>
    <published>2020-08-15T16:00:00.000Z</published>
    <updated>2021-01-28T17:50:48.361Z</updated>
    
    <content type="html"><![CDATA[<p>因公司业务发展，需要招聘一些初、中级Java开发人员。本系列文章将面向求职者，以招聘者的视角来进行讨论，希望能为疫情期间苦于找工作的求职者带来一些启发。</p><p>由于不同公司情况不同，有着急的，有不着急的，有舍得花钱的，有比周扒皮还抠门的，因此本系列文章意见仅供参考。</p><a id="more"></a><h1 id="招聘流程和分工"><a href="#招聘流程和分工" class="headerlink" title="招聘流程和分工"></a>招聘流程和分工</h1><p>正常情况下，招聘的流程如下：</p><ol><li>提出招聘需求，分配招聘指标</li><li>发布招聘广告、收简历等事务性工作</li><li>简历筛选</li><li>组织笔试、面试：很多单位不安排笔试，但一定会安排面试。有些单位还会组织多轮面试</li><li>发放Offer、背景调查、入职手续等事务性工作</li></ol><p>其中，发布招聘信息、筛选简历可能有以下几种情况：</p><ul><li>主流情况：人力资源部门发布信息、收取简历，人力资源初步筛选并扔掉明显不靠谱的简历，然后将看起来合适的移交用人部门判断。用人部门再进一步筛选简历，确定可以面试之后再由人力部门进行发通知等事务性工作。</li><li>个别情况：用人部门在取得公司授权之后，自行发布招聘信息，收取简历、组织面试，人力部门辅助。考核通过后由人力部门办理背调、入职等手续。小公司缺乏人力部门，也会选择这样做。</li></ul><p>因此，收你简历并与你联系的，通常是代收者。</p><h1 id="同样的JD（Job-Description），不同的目的"><a href="#同样的JD（Job-Description），不同的目的" class="headerlink" title="同样的JD（Job Description），不同的目的"></a>同样的JD（Job Description），不同的目的</h1><p>在招聘网站上，各公司的JD（Job Description，岗位介绍）看起来都差不多，但关注点是不同的。</p><p>为了节约成本，公司会倾向于内部调配人员，实在无法调配才会去招聘，例如：</p><ul><li>业务扩张<ul><li>组建新团队</li><li>项目实施缺人，需要拉人干活</li></ul></li><li>有人辞职，需要从外面拉个接盘侠</li><li>需要特殊技能</li></ul><p>根据业务性质不同，对技能深度要求会有所不同。例如：</p><ul><li>小型政府项目，可能用户数不大，也可以要求业主堆硬件，出问题时用户也能有所容忍，这样对开发人员能力要求就不会特别高，能熟练使用一些东西就行。</li><li>互联网产品，用户数很大，一个微小的问题可能就会引发系统不稳定，而且用户无法容忍系统宕机，这样对开发人员基础知识要求就比较高，以免挖坑。</li><li>外包公司，员工只会被安排做些低级工作，对员工个人来说也没有前途，所以公司只要找个省钱能干的年轻人就行。</li></ul><p>对技能广度要求也有差异，例如：</p><ul><li>新公司、新团队或者并非专门做软件的公司会要一些复合型人才，例如“全栈工程师”，各类工作都要懂一些，这样可以少招人。</li><li>大型团队内部分工明确，只需要一些“螺丝钉”，最典型的就是专门的前端、后端、测试、DBA、运维等。</li></ul><p>在投递简历之前，可以通过各种途径了解一下公司，从而针对性地调整简历内容。</p><h1 id="用正确方法投递简历，我们才有机会看到你的简历"><a href="#用正确方法投递简历，我们才有机会看到你的简历" class="headerlink" title="用正确方法投递简历，我们才有机会看到你的简历"></a>用正确方法投递简历，我们才有机会看到你的简历</h1><p>首先，你需要用正确的方法投递简历。HR的邮箱总是堆满垃圾，如果投递方法错误，你的简历连被看的机会都没有，更不用说筛选和面试了。</p><h2 id="邮件投递"><a href="#邮件投递" class="headerlink" title="邮件投递"></a>邮件投递</h2><p>请注意邮件标题！邮箱里面总是堆满垃圾，如果你的邮件标题不能明显看出是应聘，我们可能会错过你的邮件。</p><p>建议邮件标题采用“【应聘】姓名-岗位名-3年工作经验”之类的格式，让我们一眼就能看出你是在应聘，而且能够一眼看出你的基本情况。附件文件名也采用类似格式，方便我们保存和查找。</p><p>发送邮件之前，请检查邮件发件人姓名，不要使用乱七八糟的网名，并且确认邮件中确实包含了简历附件。如果你害怕邮件内容有误，你可以先给自己发一封邮件，检查邮件内容是否正确，然后再发给HR。</p><p>邮件正文实际上是无所谓的。收到邮件，我们至少要看一下简历内容，不会单纯因为你没写正文或者在正文中又写了一遍简历内容就把你Pass掉。</p><h2 id="BOSS直聘-拉勾网"><a href="#BOSS直聘-拉勾网" class="headerlink" title="BOSS直聘 / 拉勾网"></a>BOSS直聘 / 拉勾网</h2><p>BOSS直聘 / 拉勾网的特殊之处在于你可以提前与HR（当然不是BOSS）进行一些简单的交流。建议维护一份在线简历，让招聘者能够简单地了解你的基本情况，然后决定收简历。</p><p>招聘经常是人力资源部门的人来做，所以请避免问工作细节，因为他们也不见得知道。</p><h2 id="内推"><a href="#内推" class="headerlink" title="内推"></a>内推</h2><p>如果你为人靠谱，而且有熟人，可以考虑走内推去他们的公司，省去一切麻烦事情。</p><p>注意，即便是内推，甚至内定入职，简历也要好好写，否则的话，轻则给人留下负面印象，重则容易失去面试和入职机会（到时你还有何面目去见替你内推的人？）</p><h2 id="简历文件格式"><a href="#简历文件格式" class="headerlink" title="简历文件格式"></a>简历文件格式</h2><p>请使用PDF格式！不要使用其他文件格式！</p><p>很多时候HR会用手机来登录邮箱或BOSS直聘，然后通过微信或QQ向同事传送文件。PDF格式不需要装插件，还可以保证样式稳定，而Word文件经常排版错乱，这会给我们留下极坏的第一印象。</p><h1 id="解读简历中的信息"><a href="#解读简历中的信息" class="headerlink" title="解读简历中的信息"></a>解读简历中的信息</h1><p>牢记：<strong>简历的目的是让招聘者认为你能够胜任他们的工作</strong>。简历内容务必围绕这个主题展开。</p><p>如果你的简历质量不高，缺乏有效信息，那么你就容易被Pass掉——连个人简历都写不好，如何保证以后能高质量地完成工作？</p><p>收到简历后，我们会在十几秒钟之内扫描你的简历。挖掘到有效信息，才会仔细阅读并通知你参加面试。</p><h2 id="页面排版"><a href="#页面排版" class="headerlink" title="页面排版"></a>页面排版</h2><p>简历模板请保持整体主题整洁、内容条理清晰、风格样式统一、字体字号得当。不要层次不清，也不要参差不齐，否则会给人留下很坏的印象，例如：</p><p><img src="/img/2020-08-29-bad-resume/mixed-1.png" alt="混合样式"></p><p>编程是一项注重细节的工作，而这一段话中，既有半角标点<span style="display:none;">x</span>,又有全角标点<span style="display:none;">x</span>;既 有 留 空 格，<span style="letter-spacing: -0.2em;">又有紧贴的数字序号</span>；既使用<span style="font-family:'Times New Roman',Times,serif;">Times New Roman</span>，<span style="font-family:'Songti SC', STSong, NSimSun, SimSun, serif;">又使用宋体</span>；<big>有些字大</big>，<small>有些字小</small>。这样会让人感觉此人“不拘小节”，爱给同事挖坑。</p><p>另外：</p><ul><li>页面篇幅不要太长，两三页就好。社招项目经验多，只写一页不见得能装得下，不用强求。</li><li>不要用填表式模板，不好看。</li><li>建议自己设计模板，不要用网上被用滥的模板。</li><li>简历请保持简约风格，不要太花哨，我们关心的是你的简历内容。</li></ul><h2 id="个人基本信息"><a href="#个人基本信息" class="headerlink" title="个人基本信息"></a>个人基本信息</h2><p>请写清姓名、电话、邮箱这三项内容，并保证联系方式畅通。电话用来向你发通知，邮箱用来发Offer，如果这两种联系方式都联系不上，对不起，你的工作机会没了。</p><p>其他信息例如籍贯、政治面貌、民族等，没有特殊要求的话不用写，我们不关心这些事情。如果应聘国企或事业单位，而且是党员或预备党员的话，可以把党员身份写上。</p><p>如果有软件开发相关的社交媒体账号，例如GitHub账号、CSDN账号、个人博客，而且有一定的成果，那么请务必写到简历中，这会成为一个重大加分项。但是，如果没有，千万别拿这些东西装X——我们会核实你的账号，发现没有什么实质内容的话，例如只有helloworld，或者只是些fork仓库或转载文章，那么社交媒体账号会成为扣分项。</p><h2 id="照片"><a href="#照片" class="headerlink" title="照片"></a>照片</h2><p>建议不要放照片，因为脸不是判断你适不适合工作的因素。</p><p>如果放照片，请放一张好看的照片。假如照片很难看，或者PS/美颜痕迹明显，那么你的第一印象就会崩坏，甚至会直接把我们“劝退”。</p><h2 id="年龄"><a href="#年龄" class="headerlink" title="年龄"></a>年龄</h2><p>注意：“不限年龄”或者不提年龄限制，不代表没有年龄限制。为规避法律风险，避免被举报就业歧视，招聘者往往会采用更加隐蔽的手段来进行限制，例如把年龄不合适的人直接筛掉。</p><p>软件行业是青春饭，30岁以下的年轻人，人傻、肯干、学习能力强，可以少发工资，而且简单工作的话年轻人稍微学习学习就能掌握，所以初中级岗位倾向于招年轻人。为了省钱，很多公司还会设法逼走年龄较大的员工，也就是所谓的“35岁危机”。</p><p>如果年龄超过30还想投递简历，除非应聘高级岗位，或者有稀缺技能，或者项目/行业经验非常出色，而且愿意少挣钱，否则没戏。在初中级岗位中，年长者比不过年轻人的。如果已经有10年或以上经验，建议找熟人内推，或者让猎头挖，不要再用普通招聘形式找工作。</p><h2 id="性别"><a href="#性别" class="headerlink" title="性别"></a>性别</h2><p>注意：“不招女性”也是就业歧视行为，而且明显违反劳动法，只要去劳动仲裁挥一挥女拳，公司必输。因此有些招聘者不会直说“不招女性”，而是把女性投递的简历直接筛掉，避免引来女拳麻烦。</p><p>因为人们对女性有着刻板印象，加上害怕女性怀孕（已经有孩子？那还要二胎吗？）、休产假影响团队整体工作，女性找工作本身就吃亏，所以要更加注意简历中项目经验的优化。</p><h2 id="教育信息"><a href="#教育信息" class="headerlink" title="教育信息"></a>教育信息</h2><p>请正确填写教育信息。学历从大专/大本开始往上写。虽然你学过的大学知识已经还给了老师，但是你的两个证（毕业证、学位证）还是有用的，不要弄丢。</p><h3 id="学历"><a href="#学历" class="headerlink" title="学历"></a>学历</h3><p>学历歧视也是存在的。通常情况下，不仅只接受本科生或研究生（博士生年龄太大，除非算法岗位，否则对应聘者和招聘者来说都不划算），而且只接受重点大学毕业生。本科还得是全日制的，因为光是本科生就够HR忍受的了。尽管大专、专升本或非全日制学生也有工作能力强的，但通常会被无视，而且应聘要求不会说得太明确，免得被举报。</p><p>从统计学意义上讲，学生个人素质通常是“重点大学&gt;普通大学&gt;三本专科”，从个人言谈举止方面也能看出比较明显的区别。当然，这只是一般规律：我们也认识到，即便是二本、三本、专科学校的毕业生，也能成为公司的业务或技术骨干，而985学校毕业生也有工作不认真、爱给同事挖坑的。所以，我们会考虑学校，但不会把学校当作唯一考察因素。</p><p>我们招聘时不太考虑专业，无论是否计算机软件专业都可以考虑。有些学生虽然非计算机专业毕业，但他们出于个人兴趣爱好选择了软件行业，这类人的个人能力往往比科班出身的人还强。但是，由于非计算机专业学生可能只学过写代码，底子较差，工程意识薄弱，在面试时要注意考察数据结构与算法之类的基础知识。相对的，这类人找工作之前也要补一下相关知识。</p><p>最后学历千万不要隐瞒或造假，如果背景调查时发现实际学历与简历内容不一致，那么不好意思，拜拜。</p><h3 id="培训班"><a href="#培训班" class="headerlink" title="培训班"></a>培训班</h3><p>如果参加过社会培训班，建议调整一下工作的时间节点，把这段经历隐藏掉。如果只参加过社会培训班，没有实际工作经验，那么请节哀，因为有经验的招聘者能看出来你只去过培训班，没有实际工作经历。</p><p>由于培训班培训内容经常与行业实际脱节，而且我们认为花钱进补习班=学习能力差，所以我们不喜欢招参加过培训班的人，甚至会直接将有培训班经历的人给Pass掉。</p><h3 id="在校期间表现"><a href="#在校期间表现" class="headerlink" title="在校期间表现"></a>在校期间表现</h3><p>如果毕业时间不长，而且在大学期间拿过ACM区域赛、全国数学建模竞赛、美国数学建模比赛、飞思卡尔智能车大赛等含金量较高的奖项，或者已经通过英语六级与更高水平的考试，建议将其写到简历上。我们会认为这类人比较有潜力。</p><p>其他表现没必要往简历上写。走向社会，学校期间的表现都是浮云了。</p><h2 id="工作单位"><a href="#工作单位" class="headerlink" title="工作单位"></a>工作单位</h2><p>在工作单位方面，我们关心：</p><ul><li>工作单位与行业：大厂出身更容易吸引人，而外包公司或小公司出身会让人敬而远之。<ul><li>外包公司：因为外包员工经常做技术含量不高的低级工作，无论工作多少年都只能折算成一年工作经验，除非项目经验感人，否则倾向于Pass。</li><li>小公司、创业公司或非软件公司：在这类公司工作的人，找工作时可能也会遇到困难，因为他们通常没经历过正规开发流程，缺乏规范意识。在面试时要注意考察他们的质量把控情况。</li></ul></li><li>跳槽频率：假如你频繁跳槽，一年跑一次，甚至不到一年就跑路，你说我们还敢招你吗？<ul><li>如果是不可控原因被迫跳槽，例如公司倒闭，建议标在简历上，以免被当成频繁跑路。</li></ul></li></ul><p>工作时间不要有断档。如果确实因为脱产进修、裸辞在家或出门环游世界等原因产生了空档，请把空档时间和原因写出来，否则会认为你“逆水行舟，不进则退”。</p><p>社招简历，除非是大厂，实习经验写不写都行，因为我们都清楚实习生其实没做什么实际工作。请用最近一两年的项目经历来证明自己工作能力。</p><p>请不要编造或隐瞒工作单位。公司会在你入职前后对你进行背景调查，核实工作经历，有可疑之处的话就拒绝录用你，以免遇到法律问题。</p><p>另外建议投简历之前在知乎、看准网等平台对即将投递简历的公司进行背景调查，免得刚逃出一个坑，又在不经意间跳进下一个坑。</p><h2 id="项目信息"><a href="#项目信息" class="headerlink" title="项目信息"></a>项目信息</h2><p>项目信息是简历的重点。我们需要通过你的项目信息来判断你的阅历与能力，例如：</p><ul><li>你的语言表达能力、总结提练能力如何？</li><li>有没有做过大型项目？</li><li>是否熟悉大型系统会遇到的问题（数据量大、并发量高，等等）？</li><li>有没有经历过完整、规范的工作流程？</li><li>独立完成，还是团队协作完成？</li><li>在项目中是凑数、普通成员，还是核心成员或救火队员？</li><li>曾经参与过哪些行业，是否与本公司一致？</li><li>实践过哪些技术栈（Vue/React，Spring Boot……）？只是肤浅地增删改查，还是深入研究、优化完善？</li><li>只做过开发工作，还是做过管理工作，或是多面手？</li><li>有没有个人思考？</li><li>……</li></ul><p>对于每个项目，请在不泄露商业机密的前提下简短地介绍一下项目是做什么的，否则我们这些外人会看得一头雾水。然后不要忘记写一下自己在项目中的角色与工作内容，让我们意识到你不是来“打酱油”的。</p><p>很多系统，从本质上讲就是一大堆的增删改查，或者说是“数据库前端”，因此工作内容不要只写“开发XX模块”，否则会被认为只做了些微小的增删改查工作。工作内容应当尽量遵循“STAR法则”（情境、任务、行动、结果）来写，让人知道你不是机械地执行命令，而是有针对性地解决了实际问题：</p><ul><li>情境：需要解决什么问题，或者遇到了什么事情</li><li>任务：你的目标是什么</li><li>行动：你做了什么事情</li><li>结果：最后达到了什么效果。如果能量化，那么务必提供一个有说服力的数字，例如系统响应时间从2s降低到200ms。</li></ul><p>举一个具体例子：“开发XX功能，用到了Redis”，这没什么意思，因为很多项目都会用这个东西。但是，如果你改写“针对项目XX功能具有瞬时高并发特点，使用Redis实现XX，解决XX问题”，那么就会成为一个亮点。<a href="/2020/08/20/resume-improvement/">后续</a>会专门介绍如何优化你的项目经验。</p><p>项目经历也可以稍微吹吹牛。假如你读过其他人写的代码，熟悉了它的内部逻辑，换成自己写，大体上也能搞出来，那么你完全可以“剽窃”他人的劳动成果，将其据为己有，反正我们又不可能去核实真假。无论实际开发工作是不是你做的，只要面试时候能把事情说得像你做的一样就行。</p><p>项目经历请按从新到旧的顺序写。两三年的事情可能已经记不清，而且当时你工作可能还没那么熟练，所以我们面试官也没必要再深究了。</p><p>在实际招聘过程中，我们发现大部分人未能正确地拼写他们所用的技术框架或工具，例如把“Spring Boot”写成“springboot”、“Springboot”，把“MySQL”写成“mysql”、“Mysql”、“MySql”……虽然很多招聘者并不会在意这个事情，但是花点时间查阅正确拼写肯定没有坏处。至少我们会觉得你更加专业。</p><h2 id="薪资"><a href="#薪资" class="headerlink" title="薪资"></a>薪资</h2><p>建议不要写任何有关薪资的内容，包括起始薪资、当前薪资和期望薪资。</p><ul><li>如果薪资写得低了，那么谈薪资的时候，我们会尽量在你写的范围往下压，这样你会吃亏。</li><li>如果薪资写得高了，我们会直接Pass你的简历（工资开不起），或者在面试的时候为难你，以便找理由压低工资，同样会让你吃亏。</li></ul><p>非要写薪资的话，如何写期望薪资才合适呢？先通过同学、同事、招聘网站等渠道，调查一下所在城市的行业平均收入水平，再估计一下自己实际能力，然后写一个区间，而且最低值不要低于平均水平。例如期望值15k，你写成17～20k（当然你要有这个水平），谈判时没有暴露心理预期，而且谈判失利，只得到16k，那么你实际上还赚了一千块。</p><h2 id="个人技能"><a href="#个人技能" class="headerlink" title="个人技能"></a>个人技能</h2><p>个人技能是一个“锦上添花”的东西。项目经历这个“锦”不好看的话，个人技能这些“花”也不会起太大作用。这个东西你可以认为是给那些外行HR们进行关键词匹配用的，对内行人来说作用不大。</p><p>根据掌握程度分类，通常分为三种程度：精通、熟悉、了解。除非你真的精通到了底层的程度，否则请写成“熟悉”。不熟悉的东西请写成“了解”。因为这些东西很可能会成为面试问题，所以不要写自己不熟悉的东西，以免面试翻车。</p><p>技能有容易上手的，也有难于上手的。例如XML、JSON数据格式或Postman工具用几分钟就能学会，而Linux系统操作技能需要花一些时间来积累，所以说自己熟悉JSON就没什么实际意义，而说自己熟悉Linux就会高人半等。尽量不要写那类容易上手的东西，没有意义，写多了还会让人找不到你的特长，结果只能是减分。</p><p>不要简单地“熟悉XX”、“了解XX”就结束了，后面要再写点东西，例如“熟悉JavaScript，熟悉原型链、Promise等原理”，这样才能说明你真熟悉JavaScript。另外个人技能不用局限于具体的工具或框架，像英语水平好、热爱研究开源软件、使用Google搜索这类事情都可以写（当然要和软件开发工作相关），只要简历和面试能自圆其说就行。</p><h2 id="自我评价"><a href="#自我评价" class="headerlink" title="自我评价"></a>自我评价</h2><p>别给自己做评价！</p><p>在见过各种年轻员工的工作能力和工作态度之后，我们眼里的自我评价是这样的——</p><ul><li>已通过英语四级——英语水平差，六级没过</li><li>有责任心，工作认真负责——员工做好本职工作，有什么可夸的？</li><li>学习能力强——实际上什么都不会，有事情都是去问百度</li><li>爱好广泛——没有特长</li><li>热爱编程——只会编程，不会别的事情（例如写文档、与用户沟通），无法胜任工作</li><li>自我驱动力强——天天刷微博、抖音，你敢说你自我驱动力强？</li><li>富有团队精神——个人能力差，工作需要“抱大腿”</li><li>热爱运动——技术水平烂，所以拿日常生活充数</li><li>能吃苦，肯加班——这可是你说的，后边不要食言！</li><li>愿与公司共同进步——找工作太难了，我今天放下身段，不图别的，只求能被贵司的HR大人录用</li><li>实现人生价值——钱给够才行，否则不会好好干活的（我们的想法：你先好好干活，我们才能给你涨工资）</li></ul><p>以上是玩笑。严肃地讲，因为大家写的基本上都是些固定的客套话，都会抱着谦虚的态度，所以“自我评价”没什么实际意义，我们也不会特意看，只会把说大话和瞎抱怨的简历给Pass掉。</p><h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><p>简历中不要出现错别字，不要把英语单词拼错，要使用规范汉字与规范标点符号，并且要符合中文语法，否则你的简历容易被直接Pass掉。要想避免这类细节错误，最简单的方法就是写完之后从头到尾认真检查两遍。</p><h2 id="最后一步"><a href="#最后一步" class="headerlink" title="最后一步"></a>最后一步</h2><p>请把简历转成PDF格式之后再发送，原因见前文解释。</p><h1 id="不要问我们收没收到简历，也不要傻等回复"><a href="#不要问我们收没收到简历，也不要傻等回复" class="headerlink" title="不要问我们收没收到简历，也不要傻等回复"></a>不要问我们收没收到简历，也不要傻等回复</h1><p>如果是研发部门直接招聘，那么你的简历发过来之后就会由研发部门直接筛选。如果是公司人力部门招聘，他们会对简历进行一个初选，筛掉看起来不靠谱的简历，再把看起来靠谱的简历交给研发部门精选。所以</p><ul><li>不要主动问收没收到简历。正常情况下，只要你的简历没有被当成垃圾邮件，那么你的简历肯定被收到了，但处置方法不同团队做法会不一样。你要是问我收没收到，这个我真不知道，而且这种事也不值得去浪费同事时间特意检查。</li><li>不要傻等我们回复。如果你的简历看起来合适，我们会很快联系你面试。然而大部分人的简历并不匹配，有些人的简历还是垃圾，这些简历我们会直接扔到垃圾箱里，无暇挨个回复。因此投完简历之后，应该马上去下一家公司投简历，不要一棵树上吊死。</li></ul><p>如果有事情，正常情况下应该会在工作日的白天联系你，因为HR不加班。碰到晚上或周末联系的，大概率是996公司，或者公司太小没有专业HR，建议敬而远之。BOSS直聘或看准网这样的APP除外，因为他真的有可能是晚上刷抖音的时候顺便看了一下简历。</p><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><strong>作为招聘者，筛选简历的关注点</strong></li><li><a href="/2020/08/20/resume-improvement/">来自招聘者的建议——如何优化简历</a></li><li><a href="/2020/08/29/bad-resume/">迷惑简历大赏</a></li><li>关于面试问题设计</li><li>面试禁忌</li></ul><h1 id="扩展阅读"><a href="#扩展阅读" class="headerlink" title="扩展阅读"></a>扩展阅读</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9wcm9ncmFtLXRoaW5rLmJsb2dzcG90LmNvbS8yMDA5LzA0L2RlZmVjdC1vZi1oaXJlLmh0bWw=">招聘的误区<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9wcm9ncmFtLXRoaW5rLmJsb2dzcG90LmNvbS8yMDExLzAzL2hpcmluZy1leHBlcmllbmNlLTAuaHRtbA==">俺的招聘经验 - 编程随想的博客<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;因公司业务发展，需要招聘一些初、中级Java开发人员。本系列文章将面向求职者，以招聘者的视角来进行讨论，希望能为疫情期间苦于找工作的求职者带来一些启发。&lt;/p&gt;
&lt;p&gt;由于不同公司情况不同，有着急的，有不着急的，有舍得花钱的，有比周扒皮还抠门的，因此本系列文章意见仅供参考。&lt;/p&gt;</summary>
    
    
    
    <category term="工作日记" scheme="https://plusnan.me/categories/%E5%B7%A5%E4%BD%9C%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="招聘" scheme="https://plusnan.me/tags/%E6%8B%9B%E8%81%98/"/>
    
    <category term="简历" scheme="https://plusnan.me/tags/%E7%AE%80%E5%8E%86/"/>
    
  </entry>
  
  <entry>
    <title>在macOS Catalina系统运行osu!</title>
    <link href="https://plusnan.me/2020/05/01/osu-on-mbp/"/>
    <id>https://plusnan.me/2020/05/01/osu-on-mbp/</id>
    <published>2020-04-30T16:00:00.000Z</published>
    <updated>2021-02-06T16:25:54.494Z</updated>
    
    <content type="html"><![CDATA[<p>如果有个Mac，而且不想切换双系统，也不想开虚拟机，如何在Mac系统运行osu？</p><a id="more"></a><h1 id="方案一：osu-lazer"><a href="#方案一：osu-lazer" class="headerlink" title="方案一：osu!lazer"></a>方案一：osu!lazer</h1><p>osu!lazer是osu的开源版本。peppy的计划是重新开发osu，待全部稳定之后便取代原版。尽管该计划已经咕了好几年，从未达到取代原版的程度，但是大体上已经可以玩了，而且目前lazer版已支持Linux、Mac、Android、iOS等系统。</p><p>可以通过brew安装：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install osu-development</span><br></pre></td></tr></table></figure><br>手工下载的话，下载地址为<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3BweS9vc3UvcmVsZWFzZXM=">https://github.com/ppy/osu/releases<i class="fa fa-external-link-alt"></i></span>，其中的osu.app.zip就是Mac版。下载之后解压，然后将osu.app拖动到“应用程序”中即可。</p><h2 id="与稳定版主要区别"><a href="#与稳定版主要区别" class="headerlink" title="与稳定版主要区别"></a>与稳定版主要区别</h2><ul><li>界面风格变化很大。</li><li>目前不太支持自定义皮肤。</li><li>游戏成绩是Score v2，所以不计入个人Profile。</li><li>Editor功能不完善。</li><li>联机功能还不太灵活，需要事先把曲子选好，中途不能换。</li><li>osu!direct现在免费开放，不用捐钱即可使用。</li></ul><h2 id="坑"><a href="#坑" class="headerlink" title="坑"></a>坑</h2><p>osu不走代理，所以在中国登录账号或者使用osu!direct时网速会很慢，需要安装Proxifier让应用强制走代理。配置规则时，应用名为<code>osu!</code>。</p><h1 id="方案二：稳定版，懒人包（推荐）"><a href="#方案二：稳定版，懒人包（推荐）" class="headerlink" title="方案二：稳定版，懒人包（推荐）"></a>方案二：稳定版，懒人包（推荐）</h1><p>有人已经把Wineskin、wine32on64和osu封装好，做成了懒人包，可前往论坛下载（<span class="exturl" data-url="aHR0cHM6Ly9vc3UucHB5LnNoL2NvbW11bml0eS9mb3J1bXMvdG9waWNzLzY4MjE5Nz9zdGFydD03MzY3MjM5">下载地址<i class="fa fa-external-link-alt"></i></span>）。下载完成后，解压，再将 osu!.app 移动到应用程序中即可。</p><h2 id="第一次启动"><a href="#第一次启动" class="headerlink" title="第一次启动"></a>第一次启动</h2><p>第一次启动之前，需要重启电脑，并在开机时按住<kbd>Command+R</kbd>，进入Recovery模式关闭SIP，否则 wine 无法启动。</p><p>在Recovery模式操作步骤如下：</p><ol><li>登录</li><li>点击“实用工具”菜单中的“终端”</li><li>输入以下命令<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csrutil <span class="built_in">disable</span></span><br></pre></td></tr></table></figure></li><li>重启电脑</li></ol><h3 id="如果有强迫症，不想关闭SIP"><a href="#如果有强迫症，不想关闭SIP" class="headerlink" title="如果有强迫症，不想关闭SIP"></a>如果有强迫症，不想关闭SIP</h3><p>如果不想关闭SIP，那么也可以修改内核启动参数。</p><p>也是进入Recovery模式，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvram boot-args=<span class="string">&quot;no32exec=0&quot;</span></span><br></pre></td></tr></table></figure><p>如果在主系统修改，那么需要把SIP关掉，否则会提示<code>nvram: Error setting variable -&#39;boot-args&#39;: (iokit/common) not permitted</code>。</p><h2 id="已知问题"><a href="#已知问题" class="headerlink" title="已知问题"></a>已知问题</h2><p>每次启动都会Crash，然后每次都要重新检查update。不想被中国网络卡到抓狂的话需要挂个Proxifier，强制让osu走代理。</p><h1 id="方案三：手工安装（不推荐）"><a href="#方案三：手工安装（不推荐）" class="headerlink" title="方案三：手工安装（不推荐）"></a>方案三：手工安装（不推荐）</h1><p>因为涉及wine，所以配置会很麻烦。强烈建议不要手工安装，除非你喜欢像折腾Linux一样折腾Mac。</p><p>不过，幸亏用的是Mac系统，所以不涉及没声音（缺少libalsa等库）、中日韩文字无法显示（缺字体）等问题。</p><h2 id="CrossOver-Stable-Fallback"><a href="#CrossOver-Stable-Fallback" class="headerlink" title="CrossOver + Stable-Fallback"></a>CrossOver + Stable-Fallback</h2><p>安装步骤如下：</p><h3 id="第一步：安装CrossOver"><a href="#第一步：安装CrossOver" class="headerlink" title="第一步：安装CrossOver"></a>第一步：安装CrossOver</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew cask install crossover</span><br></pre></td></tr></table></figure><p>如果<span class="exturl" data-url="aHR0cHM6Ly93d3cuY29kZXdlYXZlcnMuY29t">从官网下载<i class="fa fa-external-link-alt"></i></span>，那么务必挂个梯子，让自己变外国IP，然后再把浏览器语言设置成外国话，否则官网会强制跳转到臭名昭著的思杰马克丁的界面。想购买正版，或者想通过买正版来为Wine项目捐款的人更要注意这一点，否则钱就让马克丁给黑掉了。</p><p>CrossOver试用期过期的话，只要：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rm -f ~/Library/Preferences/com.codeweavers.CrossOver.plist</span><br></pre></td></tr></table></figure><br>试用期就会重新变回14天。</p><p>或者修改这个文件，将FirstRunDate改成9102年，然后就可以无限期试用了。</p><h3 id="第二步：新建容器"><a href="#第二步：新建容器" class="headerlink" title="第二步：新建容器"></a>第二步：新建容器</h3><p>需要安装 .Net Framework 4.5 或更高版本。在安装4.5时安装程序会卡死，只要在卡住不动之后稍微等一会儿，再用任务管理器把Setup.exe、ngen.exe、mscorsvw.exe等进程关掉，安装就完成了。</p><p>后面假设容器名称为<code>osu</code>，容器所在目录为<code>~/Library/Application Support/CrossOver/Bottles/osu</code>。</p><h3 id="第三步：安装osu"><a href="#第三步：安装osu" class="headerlink" title="第三步：安装osu"></a>第三步：安装osu</h3><p><span class="exturl" data-url="aHR0cHM6Ly9vc3UucHB5LnNoLw==">从官网下载<i class="fa fa-external-link-alt"></i></span>。直接启动安装程序是起不来的，而且不出现任何画面。需要加环境变量<code>LC_ALL=C</code>之后安装程序才能正常启动。</p><p>把安装程序放在“下载”目录，然后去终端输入命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WINEPREFIX=<span class="string">&quot;<span class="variable">$HOME</span>/Library/Application Support/CrossOver/Bottles/osu&quot;</span> LC_ALL=C /Applications/CrossOver.app/Contents/SharedSupport/CrossOver/bin/wineloader32on64 winewrapper.exe --new-console --start -- ~/Downloads/osu\!install.exe</span><br></pre></td></tr></table></figure><br>因为在中国下载文件很慢，而且后面要改配置、重新下载，所以不用等安装全部完成。感觉差不多了就可以直接叉掉安装程序。</p><h3 id="第四步：切换成旧版"><a href="#第四步：切换成旧版" class="headerlink" title="第四步：切换成旧版"></a>第四步：切换成旧版</h3><p>太新的版本是跑不起来的，会在显卡驱动方面报错，提示<code>osu! was unable to obtain a graphics context</code>。因此，你需要修改<code>osu!.cfg</code>，让它重新安装旧版：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim <span class="string">&quot;<span class="variable">$HOME</span>/Library/Application Support/CrossOver/Bottles/osu/drive_c/users/crossover/Local Settings/Application Data/osu\!/osu\!.cfg&quot;</span></span><br></pre></td></tr></table></figure><p>将<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ReleaseStream &#x3D; Stable40</span><br></pre></td></tr></table></figure><br>改成<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ReleaseStream &#x3D; Stable</span><br></pre></td></tr></table></figure></p><h3 id="第五步：启动-osu"><a href="#第五步：启动-osu" class="headerlink" title="第五步：启动 osu!"></a>第五步：启动 osu!</h3><p>修改完成后，重新启动 osu!</p><p>这次可以直接在CrossOver的“运行命令”中启动osu，并将启动方式保存下来。路径为<code>drive_c/users/crossover/Local Settings/Application Data/osu!/osu!.exe</code>。</p><p>启动osu之后，系统会自动重新下载各个文件。然而，有两个文件体积比较大，分别在30MB左右，而且中国网络比较卡，所以会需要很长时间。如果卡半天下不动，可选择把别人装好的内容拷到自己电脑上（注意里面需要包含类似<code>osu!ui.dll</code>的文件），放到<code>~/Library/Application Support/CrossOver/Bottles/osu/drive_c/users/crossover/Local Settings/Application Data/osu!</code>。</p><p>或者也可以安装Proxifier，让<code>wineloader32on64</code>进程强制走代理。</p><h3 id="第六步：应用设置"><a href="#第六步：应用设置" class="headerlink" title="第六步：应用设置"></a>第六步：应用设置</h3><p>进入osu之后，你需要立刻修改分辨率设置，将其改成屏幕一半，例如15寸MacBook Pro需要改成1680x1050，否则操作起来会不正常（例如界面卡死、数位板只能划到屏幕一半等）。</p><h3 id="第七步：导入曲包、皮肤"><a href="#第七步：导入曲包、皮肤" class="headerlink" title="第七步：导入曲包、皮肤"></a>第七步：导入曲包、皮肤</h3><p>在CrossOver使用“运行命令”时，点击“将指令保存到面板”按钮，CrossOver会为osu生成一个app。记下这个app的位置。</p><p>右击osz、osk文件，选择“打开方式”、“其它”。下方“启用”选择“所有应用程序”，并勾选“始终以此方式打开”，然后找到刚才生成的app，即可直接通过双击导入曲包和皮肤了。</p><h3 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h3><p>因为版本太老，成绩同样不会计入Profile。</p><h2 id="魔改版Wine-Stable"><a href="#魔改版Wine-Stable" class="headerlink" title="魔改版Wine + Stable"></a>魔改版Wine + Stable</h2><p>在CrossOver搞出了wine32on64这种东西之后，有人把它提取了出来。</p><p>基于魔改版Wine的配置步骤如下：</p><h3 id="第一步：关闭SIP-修改内核参数"><a href="#第一步：关闭SIP-修改内核参数" class="headerlink" title="第一步：关闭SIP / 修改内核参数"></a>第一步：关闭SIP / 修改内核参数</h3><p>重启电脑，并在开机时按住<kbd>Command+R</kbd>，进入Recovery模式关闭SIP。在Recovery模式中，操作步骤如下：</p><ol><li>登录</li><li>点击“实用工具”菜单中的“终端”</li><li>输入以下命令（二选一，推荐用nvram那个）<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">csrutil <span class="built_in">disable</span></span><br></pre></td></tr></table></figure>或<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvram boot-args=<span class="string">&quot;no32exec=0&quot;</span></span><br></pre></td></tr></table></figure></li><li>重启电脑。</li></ol><h3 id="第二步：下载魔改版Wine"><a href="#第二步：下载魔改版Wine" class="headerlink" title="第二步：下载魔改版Wine"></a>第二步：下载魔改版Wine</h3><p>前往<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0djZW54L1dpbmVza2luU2VydmVyL3JlbGVhc2Vz">https://github.com/Gcenx/WineskinServer/releases<i class="fa fa-external-link-alt"></i></span>，下载<code>WS11WineCX19.0.1.tar.7z</code>，随便找个地方解压，例如<code>~</code>。</p><p>在Finder中进入<code>~/wswine.bundle/bin</code>（wswine.bundle需要右击，然后点击“显示包内容”才能进去），挨个按Control键启动一下，触发一下“是否允许启动”的警告，否则Mac系统会拒绝运行这几个程序。</p><p>初始化环境变量：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> WINEPREFIX=~/.wine</span><br><span class="line"><span class="built_in">export</span> WINEARCH=win32</span><br><span class="line"><span class="built_in">export</span> WINE=wine32on64</span><br><span class="line"><span class="built_in">export</span> PATH=~/wswine.bundle/bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><br>初始化一下wine：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wine32on64 taskmgr</span><br></pre></td></tr></table></figure><h3 id="第三步：安装并配置winetricks"><a href="#第三步：安装并配置winetricks" class="headerlink" title="第三步：安装并配置winetricks"></a>第三步：安装并配置winetricks</h3><p>在上面终端的基础上继续执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install winetricks</span><br><span class="line">winetricks dotnet45</span><br></pre></td></tr></table></figure><p>程序会先安装.Net Framework 4.0，然后再安装4.5。4.0可以正常安装，但是4.5安装程序会卡进度条。这时候可以稍微等一会，然后再开个终端，用<code>wine32on64 taskmgr</code>启动任务管理器，把Setup.exe、ngen.exe、mscorsvw.exe几个进程直接杀掉。</p><p>经过测试，发现一件神奇的事情：尽管4.5未能成功安装，但是只安装4.0，不让4.5安装程序卡进度条的话，osu是启动不了的。</p><h3 id="第四步：安装osu"><a href="#第四步：安装osu" class="headerlink" title="第四步：安装osu!"></a>第四步：安装osu!</h3><p><span class="exturl" data-url="aHR0cHM6Ly9vc3UucHB5LnNoLw==">从官网下载安装程序<i class="fa fa-external-link-alt"></i></span>。假设放到<code>~/Downloads</code>，继续执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wine32on64 ~/Downloads/osu\!install.exe</span><br></pre></td></tr></table></figure><p>同样要挂Proxifier，强制让wine走代理，否则下载速度非常慢。</p><h3 id="第五步：启动"><a href="#第五步：启动" class="headerlink" title="第五步：启动"></a>第五步：启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wine32on64 ~/.wine/drive_c/users/crossover/Local\ Settings/Application\ Data/osu\!/osu\!.exe</span><br></pre></td></tr></table></figure><p>下载完成后就可以正常玩了。因为每次敲命令太麻烦，可以在自己的<code>~/.bashrc</code>或<code>~/.zshrc</code>等配置文件（根据自己所用shell设置）增加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> WINEPREFIX=~/.wine</span><br><span class="line"><span class="built_in">export</span> WINEARCH=win32</span><br><span class="line"><span class="built_in">export</span> WINE=wine32on64</span><br><span class="line"><span class="built_in">export</span> PATH=~/wswine.bundle/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">alias</span> osu=<span class="string">&quot;wine32on64 <span class="variable">$HOME</span>/.wine/drive_c/users/crossover/Local Settings/Application Data/osu\!/osu\!.exe&quot;</span></span><br></pre></td></tr></table></figure><p>下次进入终端时，输入<code>osu</code>即可启动，在命令后面加上曲包或皮肤文件路径即可导入。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly9vc3UucHB5LnNoL2NvbW11bml0eS9mb3J1bXMvdG9waWNzLzY4MjE5Nw==">https://osu.ppy.sh/community/forums/topics/682197<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0djZW54L1dpbmVza2luU2VydmVy">https://github.com/Gcenx/WineskinServer<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9hcHBkYi53aW5laHEub3JnL29iamVjdE1hbmFnZXIucGhwP3NDbGFzcz12ZXJzaW9uJmFtcDtpSWQ9MjgwMjU=">https://appdb.winehq.org/objectManager.php?sClass=version&amp;iId=28025<i class="fa fa-external-link-alt"></i></span></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;如果有个Mac，而且不想切换双系统，也不想开虚拟机，如何在Mac系统运行osu？&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://plusnan.me/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="wine" scheme="https://plusnan.me/tags/wine/"/>
    
    <category term="osu!" scheme="https://plusnan.me/tags/osu/"/>
    
  </entry>
  
  <entry>
    <title>Web应用中文乱码实验（二）：HTTP Request中文编码测试</title>
    <link href="https://plusnan.me/2020/03/21/luanma-2/"/>
    <id>https://plusnan.me/2020/03/21/luanma-2/</id>
    <published>2020-03-20T16:00:00.000Z</published>
    <updated>2020-06-21T01:38:48.903Z</updated>
    
    <content type="html"><![CDATA[<p>本文借助Wireshark抓包软件，研究这样一个问题：含有中文的各类HTTP请求，从浏览器【发送】出去之后、被Tomcat等中间件接收之前，它的内部用了什么编码呢？</p><a id="more"></a><h1 id="约定"><a href="#约定" class="headerlink" title="约定"></a>约定</h1><p>为便于讨论，本文作出以下约定：</p><ul><li>GBK：忽略GB2312、GBK、GB18030等中国编码的内部差异，统一使用GBK表示。假设Windows系统默认使用GBK编码。</li><li>现代浏览器：指除了IE以外的、版本不太老的其他浏览器，例如Chrome、Firefox、Safari，以及用了Chromium等内核的国产浏览器。国产浏览器通常是双内核，其IE内核模式则排除在外。</li><li>IE：默认包含国产浏览器的IE内核模式。有特殊说明的除外。</li><li>Linux：本文使用Mac系统进行测试，并假设Mac与Linux一样，而且实际上结论就是一样的。</li></ul><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="简易HTTP-Server"><a href="#简易HTTP-Server" class="headerlink" title="简易HTTP Server"></a>简易HTTP Server</h2><p>为了排除Java与Tomcat的各种干扰，我们用另一种语言——Node.js来实现一个简易的HTTP Server。在Node.js中字符串内部以UTF-8编码存储（备注：这句话不正确，实际上和Java一样也是UTF-16），而且本文所用的express也会默认让Content-Type使用UTF-8：</p><p>server.js：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Buffer = <span class="built_in">require</span>(<span class="string">&#x27;buffer&#x27;</span>).Buffer;</span><br><span class="line"><span class="keyword">const</span> express = <span class="built_in">require</span>(<span class="string">&#x27;express&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> bodyParser = <span class="built_in">require</span>(<span class="string">&#x27;body-parser&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 让express不对用户传入参数作任何解析</span></span><br><span class="line">app.use(bodyParser.text(&#123; <span class="attr">type</span>: <span class="string">&#x27;*/*&#x27;</span> &#125;));</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> object2str = <span class="function">(<span class="params">obj</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> output = [];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">if</span> (obj[key]) &#123;</span><br><span class="line">                <span class="keyword">let</span> value = obj[key].toString();</span><br><span class="line">                <span class="keyword">let</span> keyBuffer = Buffer.from(key);</span><br><span class="line">                <span class="keyword">let</span> valueBuffer = Buffer.from(value);</span><br><span class="line"></span><br><span class="line">                output.push(<span class="string">`<span class="subst">$&#123;key&#125;</span> = <span class="subst">$&#123;value&#125;</span>`</span>);</span><br><span class="line">                output.push(<span class="string">`\t<span class="subst">$&#123;keyBuffer.toString(<span class="string">&#x27;hex&#x27;</span>)&#125;</span> = <span class="subst">$&#123;valueBuffer.toString(<span class="string">&#x27;hex&#x27;</span>)&#125;</span>`</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> obj === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">        output.push(obj);</span><br><span class="line">        output.push(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">        output.push(Buffer.from(obj).toString(<span class="string">&#x27;hex&#x27;</span>)); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> output.join(<span class="string">&#x27;\n&#x27;</span>);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> handler = <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.header(&#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/plain&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> output = [];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 将用户传入的参数原样输出</span></span><br><span class="line">    output.push(<span class="string">`<span class="subst">$&#123;req.method&#125;</span> <span class="subst">$&#123;req.originalUrl&#125;</span>`</span>);</span><br><span class="line">    output.push(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    output.push(<span class="string">&#x27;Query:&#x27;</span>);</span><br><span class="line">    output.push(object2str(req.query));</span><br><span class="line">    output.push(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    output.push(<span class="string">&#x27;Params:&#x27;</span>);</span><br><span class="line">    output.push(object2str(req.params));</span><br><span class="line">    output.push(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    output.push(<span class="string">&#x27;Body:&#x27;</span>);</span><br><span class="line">    output.push(object2str(req.body));</span><br><span class="line">    output.push(<span class="string">&#x27;&#x27;</span>);</span><br><span class="line"></span><br><span class="line">    res.send(output.join(<span class="string">&#x27;\n&#x27;</span>));</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> createForm = <span class="function">(<span class="params">encoding</span>) =&gt;</span> <span class="string">`</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;meta charset=&quot;<span class="subst">$&#123;encoding&#125;</span>&quot; /&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;TEST&lt;/title&gt;</span></span><br><span class="line"><span class="string">        &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js&quot;&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;h2&gt;GET Form&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        &lt;form action=&quot;/get&quot; method=&quot;GET&quot;&gt;</span></span><br><span class="line"><span class="string">            Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;input type=&quot;submit&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;h2&gt;POST Form&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        &lt;form action=&quot;/post&quot; method=&quot;POST&quot;&gt;</span></span><br><span class="line"><span class="string">            Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;input type=&quot;submit&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;h2&gt;POST Form (multipart/form-data)&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        &lt;form action=&quot;/post&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot;&gt;</span></span><br><span class="line"><span class="string">            Name: &lt;input type=&quot;text&quot; name=&quot;name&quot;&gt;</span></span><br><span class="line"><span class="string">            &lt;input type=&quot;submit&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;h2&gt;Ajax Form&lt;/h2&gt;</span></span><br><span class="line"><span class="string">        Name: &lt;input type=&quot;text&quot; id=&quot;text&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;button type=&quot;button&quot; onclick=&quot;ajaxTest(&#x27;get&#x27;)&quot;&gt;Ajax GET&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;button type=&quot;button&quot; onclick=&quot;ajaxTest(&#x27;post&#x27;)&quot;&gt;Ajax POST&lt;/button&gt;</span></span><br><span class="line"><span class="string">        &lt;button type=&quot;button&quot; onclick=&quot;ajaxTest2()&quot;&gt;Ajax GET 2&lt;/button&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">            function ajaxTest(type) &#123;</span></span><br><span class="line"><span class="string">                $.ajax(&#123;</span></span><br><span class="line"><span class="string">                    url: &#x27;/&#x27; + type,</span></span><br><span class="line"><span class="string">                    type: type,</span></span><br><span class="line"><span class="string">                    data: &#123;</span></span><br><span class="line"><span class="string">                        name: $(&#x27;#text&#x27;).val()</span></span><br><span class="line"><span class="string">                    &#125;,</span></span><br><span class="line"><span class="string">                    success: function (data) &#123;</span></span><br><span class="line"><span class="string">                        alert(data);</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            function ajaxTest2() &#123;</span></span><br><span class="line"><span class="string">                var text = $(&#x27;#text&#x27;).val();</span></span><br><span class="line"><span class="string">                $.ajax(&#123;</span></span><br><span class="line"><span class="string">                    url: &#x27;/get/&#x27; + text + &#x27;?name=&#x27; + text,</span></span><br><span class="line"><span class="string">                    type: &#x27;get&#x27;,</span></span><br><span class="line"><span class="string">                    success: function (data) &#123;</span></span><br><span class="line"><span class="string">                        alert(data);</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;);</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br><span class="line"><span class="string">`</span>;</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/&#x27;</span>, handler);</span><br><span class="line">app.get(<span class="string">&#x27;/get&#x27;</span>, handler);</span><br><span class="line">app.get(<span class="string">&#x27;/get/:name&#x27;</span>, handler);</span><br><span class="line">app.post(<span class="string">&#x27;/post&#x27;</span>, handler);</span><br><span class="line">app.post(<span class="string">&#x27;/post/:name&#x27;</span>, handler);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/form/utf-8&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 框架会自动追加 charset=utf-8</span></span><br><span class="line">    res.send(createForm(<span class="string">&#x27;utf-8&#x27;</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">&#x27;/form/gbk&#x27;</span>, <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">    res.header(&#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html; charset=gbk&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 必须send一个Buffer，不能send一个string，否则框架会按UTF-8处理</span></span><br><span class="line">    res.send(Buffer.from(createForm(<span class="string">&#x27;gbk&#x27;</span>)));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8000</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`Listening at http://0.0.0.0:8000... Press Ctrl+C to stop.`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><br>使用npm安装express与body-parser。准备完毕后，使用<code>node server.js</code>运行服务器。</p><p>该HTTP Server功能如下：</p><ul><li><code>/get</code>：显示GET请求参数</li><li><code>/post</code>：显示POST请求内容</li><li><code>/get/xxx</code>：重复get后面的内容</li><li><code>/post/xxx</code>：重复post后面的内容</li><li><code>/form/gbk</code>：显示一个以GBK编码展示的表单，系统入口</li><li><code>/form/utf-8</code>：显示一个以UTF-8编码展示的表单，系统入口</li></ul><h2 id="识别字符编码"><a href="#识别字符编码" class="headerlink" title="识别字符编码"></a>识别字符编码</h2><p><code>中文</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">UTF-8：</span><br><span class="line">e4 b8 ad e6 96 87</span><br><span class="line">-------- --------</span><br><span class="line">   中       文</span><br><span class="line"></span><br><span class="line">GBK：</span><br><span class="line">d6 d0 ce c4</span><br><span class="line">----- -----</span><br><span class="line">  中    文</span><br></pre></td></tr></table></figure><h2 id="Wireshark"><a href="#Wireshark" class="headerlink" title="Wireshark"></a>Wireshark</h2><p>Wireshark是一款支持多种协议的抓包软件。使用该软件抓包时，我们可以看到数据包的二进制信息，从而判断请求用了哪种编码。</p><p>安装并启动Wireshark，可看到选择设备的窗口：</p><p><img src="/img/2020-03-21-luanma-2/wireshark-1.png" alt=""></p><p>双击某个网卡，程序就会捕获经过某个网卡的各类网络流量。由于访问的是本机运行的HTTP Server，我们需要双击“Loopback”。</p><p>进入捕获界面，在过滤条件中输入<code>http</code>，即可过滤出本机访问本机的HTTP流量：</p><p><img src="/img/2020-03-21-luanma-2/wireshark-2.png" alt=""></p><p>本次测试使用两个操作系统，一个是Mac（本机），另一个是Windows（虚拟机），选择Capture的网卡时，均选择“Loopback”。</p><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>我们测试以下几种情形：</p><ul><li>GET请求：<ul><li>在浏览器地址栏直接输入URL、查询参数</li><li>在UTF-8/GBK编码页面通过&lt;form&gt;输入查询参数</li></ul></li><li>POST请求：在UTF-8/GBK编码页面通过&lt;form&gt;输入参数</li><li>使用jQuery的$.ajax发送GET/POST请求</li></ul><p>测试环境：</p><ul><li>操作系统：Linux/Mac、Windows</li><li>浏览器：IE8、IE11、新版Chrome（版本&gt;70）、旧版Chrome（版本49）、新版Firefox（版本&gt;70）、旧版Firefox（版本&lt;20）、360浏览器（版本12，Windows）</li><li>其他软件：curl、Postman</li></ul><h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>测试结论如下。除IE外，其他浏览器不受操作系统影响。</p><h2 id="GET请求，地址栏直接输入网址"><a href="#GET请求，地址栏直接输入网址" class="headerlink" title="GET请求，地址栏直接输入网址"></a>GET请求，地址栏直接输入网址</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> http :&#x2F;&#x2F; 127.0.0.1:8000 &#x2F; get &#x2F; 中文 ? name &#x3D; 中文</span><br><span class="line"> -----------------------------------   -----------</span><br><span class="line">                 URL                     请求参数</span><br><span class="line"></span><br><span class="line">%E4%B8%AD%E6%96%87 -&gt; URL Encoded（按UTF-8编码）</span><br><span class="line">%D6%D0%CE%C4 -&gt; URL Encoded（按GBK编码）</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>测试环境</th><th>URL编码</th><th>请求参数编码</th></tr></thead><tbody><tr><td>现代浏览器</td><td>UTF-8, URL encoded</td><td>UTF-8, URL encoded</td></tr><tr><td>IE（排除国产浏览器）</td><td>UTF-8, URL encoded</td><td>跟随系统（GBK），未进行URL encode*</td></tr><tr><td>360浏览器兼容模式</td><td>UTF-8, URL encoded</td><td>UTF-8, URL encoded</td></tr></tbody></table></div><p><small>* 这是系统默认情况。用户可以在“Internet选项”的“高级”标签中勾选“发送（非）Intranet URL 的 UTF-8 查询字符串”设置，让IE在发送请求参数时也采用UTF-8编码。</small></p><h2 id="lt-form-gt-表单提交"><a href="#lt-form-gt-表单提交" class="headerlink" title="&lt;form&gt;表单提交"></a>&lt;form&gt;表单提交</h2><div class="table-container"><table><thead><tr><th>测试环境</th><th>GET</th><th>POST，默认情况（application/x-www-form-urlencoded）</th><th>POST，multipart/form-data</th></tr></thead><tbody><tr><td>所有测试环境</td><td>遵循页面编码（Content-Type），URL encoded</td><td>遵循页面编码（Content-Type），URL encoded</td><td>遵循页面编码（Content-Type），但不进行URL encode</td></tr></tbody></table></div><p>以上均不受操作系统影响。由于与页面编码一致，通常不会遇到坑。</p><p>如果是GBK表单，而且用户输入了GBK无法表示的文字（例如emoji），浏览器会在提交之前转为HTML特殊字符编码（例如&amp;#127770;）。</p><h2 id="jQuery的-ajax"><a href="#jQuery的-ajax" class="headerlink" title="jQuery的$.ajax"></a>jQuery的$.ajax</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 中文①：在URL中使用中文</span></span><br><span class="line"><span class="comment">// 中文②：直接在url参数中拼接中文的查询参数</span></span><br><span class="line"><span class="comment">// 中文③：在data参数中使用中文</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/get/中文①&#x27;</span> + <span class="string">&#x27;?name=&#x27;</span> + <span class="string">&#x27;中文②&#x27;</span>,</span><br><span class="line">    data: <span class="string">&#x27;中文③&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><div class="table-container"><table><thead><tr><th>测试环境</th><th>中文①</th><th>中文②</th><th>中文③</th></tr></thead><tbody><tr><td>现代浏览器（旧版本火狐除外）</td><td>UTF-8, URL encoded</td><td>跟随页面Content-Type，URL encoded</td><td>UTF-8, URL encoded</td></tr><tr><td>旧版本火狐</td><td>UTF-8, URL encoded</td><td>UTF-8, URL encoded</td><td>UTF-8, URL encoded</td></tr><tr><td>IE</td><td>UTF-8, URL encoded</td><td>跟随系统（GBK），未进行URL编码*</td><td>UTF-8, URL encoded</td></tr></tbody></table></div><p><small>* 这是系统默认情况。用户可以在“Internet选项”的“高级”标签中勾选“发送（非）Intranet URL 的 UTF-8 查询字符串”设置，让IE在发送请求参数时也采用UTF-8编码。</small></p><p>由上表可以得知，应当避免在“中文②”位置上面拼接查询参数。躲掉这个坑之后，$.ajax总是UTF-8编码。</p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul><li>应避免在URL上面拼接中文字符。</li><li>全面使用UTF-8，可避免编码转换引发的问题。</li><li>如果全面使用GBK，应注意到：某些场景下，浏览器会将字符串以UTF-8编码进行URL encode然后再发送到服务器上。服务器方面需留意URL decode与编码转换的问题。</li></ul><h1 id="附录：部分测试截图"><a href="#附录：部分测试截图" class="headerlink" title="附录：部分测试截图"></a>附录：部分测试截图</h1><h2 id="GET请求，直接输入URL"><a href="#GET请求，直接输入URL" class="headerlink" title="GET请求，直接输入URL"></a>GET请求，直接输入URL</h2><p><code>http://127.0.0.1:8000/get/中文</code></p><p><img src="/img/2020-03-21-luanma-2/get-1.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/get-1-data.png" alt=""></p><p>按UTF-8进行了URL encode。</p><p>&nbsp;</p><p><code>http://127.0.0.1:8000/get?name=中文</code>（现代浏览器）</p><p><img src="/img/2020-03-21-luanma-2/get-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/get-2-data.png" alt=""></p><p>同样按UTF-8进行了URL encode。</p><p>&nbsp;</p><p><code>http://127.0.0.1:8000/get?name=中文</code>（IE）</p><p><img src="/img/2020-03-21-luanma-2/get-3.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/get-3-data.png" alt=""></p><p>IE未对“中文”二字进行URL encode，直接以GBK编码原文发送出去了。</p><p>&nbsp;</p><h2 id="提交-lt-form-gt-表单（通常情况）"><a href="#提交-lt-form-gt-表单（通常情况）" class="headerlink" title="提交&lt;form&gt;表单（通常情况）"></a>提交&lt;form&gt;表单（通常情况）</h2><h3 id="UTF-8页面"><a href="#UTF-8页面" class="headerlink" title="UTF-8页面"></a>UTF-8页面</h3><p>UTF-8表单：<code>http://127.0.0.1:8000/form/utf-8</code></p><p>在GET区输入“中文”二字并提交：</p><p><img src="/img/2020-03-21-luanma-2/get-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/get-2-data.png" alt=""></p><p>与直接输入网址是一致的。</p><p>&nbsp;</p><p>在POST区输入“中文”二字并提交：</p><p><img src="/img/2020-03-21-luanma-2/post-1.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/post-1-data.png" alt=""></p><p>浏览器也进行了URL encode。</p><p>&nbsp;</p><h3 id="GBK页面"><a href="#GBK页面" class="headerlink" title="GBK页面"></a>GBK页面</h3><p>切换到GBK表单：<code>http://127.0.0.1:8000/form/gbk</code></p><p>在GET区输入“中文”二字并提交：</p><p><img src="/img/2020-03-21-luanma-2/get-4.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/get-4-data.png" alt=""></p><p>浏览器按GBK编码进行了URL encode，与直接输入网址的现象不同了。</p><p>&nbsp;</p><p>在POST区输入“中文”二字并提交：</p><p><img src="/img/2020-03-21-luanma-2/post-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/post-2-data.png" alt=""></p><p>浏览器也按GBK编码进行了URL encode。</p><p>&nbsp;</p><h2 id="提交-lt-form-gt-表单（multipart-form-data）"><a href="#提交-lt-form-gt-表单（multipart-form-data）" class="headerlink" title="提交&lt;form&gt;表单（multipart/form-data）"></a>提交&lt;form&gt;表单（multipart/form-data）</h2><p>UTF-8表单：<code>http://127.0.0.1:8000/form/utf-8</code></p><p><img src="/img/2020-03-21-luanma-2/post-3.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/post-3-data.png" alt=""></p><p>&nbsp;</p><p>切换到GBK表单：<code>http://127.0.0.1:8000/form/gbk</code></p><p><img src="/img/2020-03-21-luanma-2/post-4.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/post-4-data.png" alt=""></p><p>都是原封不动地将文字发出去了。</p><p>&nbsp;</p><h2 id="ajax"><a href="#ajax" class="headerlink" title="$.ajax"></a>$.ajax</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 中文①：在URL中使用中文</span></span><br><span class="line"><span class="comment">// 中文②：直接在url参数中拼接中文的查询参数</span></span><br><span class="line"><span class="comment">// 中文③：在data参数中使用中文</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">    url: <span class="string">&#x27;/get/中文①&#x27;</span> + <span class="string">&#x27;?name=&#x27;</span> + <span class="string">&#x27;中文②&#x27;</span>,</span><br><span class="line">    data: <span class="string">&#x27;中文③&#x27;</span>,</span><br><span class="line">    ...</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="中文①与中文②（Ajax-Get-2按钮）"><a href="#中文①与中文②（Ajax-Get-2按钮）" class="headerlink" title="中文①与中文②（Ajax Get 2按钮）"></a>中文①与中文②（Ajax Get 2按钮）</h3><h4 id="UTF-8"><a href="#UTF-8" class="headerlink" title="UTF-8"></a>UTF-8</h4><p><img src="/img/2020-03-21-luanma-2/ajax-1.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-1-data.png" alt=""></p><p>均按UTF-8进行了URL encode。</p><p>&nbsp;</p><p>换成IE浏览器时：</p><p><img src="/img/2020-03-21-luanma-2/ajax-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-2-data.png" alt=""></p><p>后面的请求参数并不是UTF-8，而是GBK，并且未进行URL encode。</p><p>&nbsp;</p><h4 id="GBK"><a href="#GBK" class="headerlink" title="GBK"></a>GBK</h4><p><img src="/img/2020-03-21-luanma-2/ajax-3.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-3-data.png" alt=""></p><p>URL仍然是UTF-8 + URL encode，而请求参数是GBK + URL encode。</p><p>&nbsp;</p><p>换成IE浏览器时：</p><p><img src="/img/2020-03-21-luanma-2/ajax-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-2-data.png" alt=""></p><p>和上面UTF-8表单一样，后面的请求参数是未经过URL encode的GBK。</p><p>&nbsp;</p><p>对于旧版本的Firefox浏览器：</p><p><img src="/img/2020-03-21-luanma-2/ajax-4.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-4-data.png" alt=""></p><p>即使页面编码是GBK，URL和请求参数仍然都是UTF-8 + URL encode。</p><p>&nbsp;</p><h3 id="中文③（Ajax-GET与Ajax-POST按钮）"><a href="#中文③（Ajax-GET与Ajax-POST按钮）" class="headerlink" title="中文③（Ajax GET与Ajax POST按钮）"></a>中文③（Ajax GET与Ajax POST按钮）</h3><p><img src="/img/2020-03-21-luanma-2/ajax-5.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/ajax-6.png" alt=""></p><p>无论页面是UTF-8还是GBK，ajax发送出去的都是UTF-8 + URL encode。IE也是如此。</p><p>&nbsp;</p><h2 id="其他工具"><a href="#其他工具" class="headerlink" title="其他工具"></a>其他工具</h2><h3 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h3><p>shell编码：UTF-8</p><p><code>curl http://127.0.0.1:8000/get/中文</code></p><p><img src="/img/2020-03-21-luanma-2/curl-1.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/curl-1-data.png" alt=""></p><p>&nbsp;</p><p><code>curl &#39;http://127.0.0.1:8000/get?name=中文&#39;</code></p><p><img src="/img/2020-03-21-luanma-2/curl-2.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/curl-2-data.png" alt=""></p><p>&nbsp;</p><p><code>curl -X POST -d &#39;name=中文&#39; http://127.0.0.1:8000/post</code></p><p><img src="/img/2020-03-21-luanma-2/curl-3.png" alt=""></p><p><img src="/img/2020-03-21-luanma-2/curl-3-data.png" alt=""></p><p>现象：curl把汉字原封不动地发送给了服务器，但由于汉字不符合RFC 1738的URL字符的规范，服务器程序无法正确处理。</p><p>&nbsp;</p><h3 id="Postman"><a href="#Postman" class="headerlink" title="Postman"></a>Postman</h3><p>我们再看一下接口调试软件Postman是按哪种编码处理的：</p><p><code>GET http://127.0.0.1:8000/get/中文</code></p><p><img src="/img/2020-03-21-luanma-2/postman-1.png" alt=""></p><p>&nbsp;</p><p><code>GET http://127.0.0.1:8000/get?name=中文</code></p><p><img src="/img/2020-03-21-luanma-2/postman-2.png" alt=""></p><p>&nbsp;</p><p><code>POST http://127.0.0.1:8000/post</code> (application/x-www-form-urlencoded)</p><p><img src="/img/2020-03-21-luanma-2/postman-3.png" alt=""></p><p>&nbsp;</p><p><code>POST http://127.0.0.1:8000/post</code> (application/json)</p><p><img src="/img/2020-03-21-luanma-2/postman-4.png" alt=""></p><p>现象：无论Mac还是Windows，Postman均按UTF-8处理了。以multipart/form-data、application/json等形式发送时，不会也不应该进行URL encode。</p><p>&nbsp;</p><h2 id="emoji🌚"><a href="#emoji🌚" class="headerlink" title="emoji🌚"></a>emoji🌚</h2><p>传入一个Emoji会发生什么事情呢？</p><p><img src="/img/2020-03-21-luanma-2/emoji-1.png" alt=""></p><p>&nbsp;</p><p><img src="/img/2020-03-21-luanma-2/emoji-2.png" alt=""></p><p>通常情况下，和普通汉字的行为是一样的。</p><p>&nbsp;</p><p><img src="/img/2020-03-21-luanma-2/emoji-3.png" alt=""></p><p>这种情况本来是按GBK编码传递原文来着。由于GBK编码无法表示“🌚”这个字，于是变成了问号。</p><p>&nbsp;</p><p><img src="/img/2020-03-21-luanma-2/emoji-4.png" alt=""></p><p>在GBK表单中输入“🌚”字，浏览器将其转换成了“&amp;#127770;”。</p><p>&nbsp;</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDEwLzAyL3VybF9lbmNvZGluZy5odG1s">关于URL编码<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuaWJtLmNvbS9kZXZlbG9wZXJ3b3Jrcy9jbi93ZWIvd2EtbG8tZWNvZGluZy1yZXNwb25zZS1wcm9ibGVtL2luZGV4Lmh0bWw=">深入分析 web 请求响应中的编码问题<i class="fa fa-external-link-alt"></i></span></li></ul><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><a href="/2020/03/15/luanma-1/">乱码现象概述</a></li><li><strong>HTTP Request中文编码测试</strong></li><li><a href="/2020/04/05/luanma-3/">Tomcat中文编码测试（Linux/Mac）</a></li><li><a href="/2020/04/06/luanma-3.5/">Tomcat中文编码测试（Windows）</a></li><li>MySQL中文编码测试</li><li>补救措施<ul><li>GBK页面，如何处理Ajax中文乱码问题</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文借助Wireshark抓包软件，研究这样一个问题：含有中文的各类HTTP请求，从浏览器【发送】出去之后、被Tomcat等中间件接收之前，它的内部用了什么编码呢？&lt;/p&gt;</summary>
    
    
    
    <category term="闲谈" scheme="https://plusnan.me/categories/%E9%97%B2%E8%B0%88/"/>
    
    
    <category term="乱码" scheme="https://plusnan.me/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>Web应用中文乱码实验（一）：乱码现象概述</title>
    <link href="https://plusnan.me/2020/03/15/luanma-1/"/>
    <id>https://plusnan.me/2020/03/15/luanma-1/</id>
    <published>2020-03-14T16:00:00.000Z</published>
    <updated>2020-06-21T01:38:03.131Z</updated>
    
    <content type="html"><![CDATA[<p>编码转换和乱码问题令人头大。在理清编码问题之前，需要先认识一下各种乱码的样子。<br><a id="more"></a></p><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>为方便讨论与理解，本系列文章会故意忽略一些不太要紧的细节，甚至把一些事情说错。要知道，有些事情吧，它确实不是那回事，但是，我们的目的不是写一篇内容准确的学术论文，而是识别出一些软件开发过程中的坑，免得在字符编码方面把自己绕进去，浪费时间，所以你当作是那回事就行了。</p><p>欲知乱码背后的真相，请用Google搜索其他资料，并且别忘了找一款二进制编辑器来观察文件内部编码。</p><h2 id="关于GB2312-GBK-GB18030"><a href="#关于GB2312-GBK-GB18030" class="headerlink" title="关于GB2312/GBK/GB18030"></a>关于GB2312/GBK/GB18030</h2><ul><li>中华人民共和国最新的国家标准是GB18030</li><li>先前所用标准是GB2312</li><li>另外一个不属于国家标准但常用的编码是GBK，相当于一个事实上的标准。</li></ul><p>由于这三个编码大体上是向下兼容的，在本系列文章中，我们会忽略<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzE5Njc3NjE5">它们的内部差异<i class="fa fa-external-link-alt"></i></span>，统一称为GBK。</p><h2 id="Java的默认编码"><a href="#Java的默认编码" class="headerlink" title="Java的默认编码"></a>Java的默认编码</h2><p>Java的默认编码比较坑，它和操作系统有关系。我们需要先按照以下方式来理解它的默认编码：</p><ul><li>Windows系统默认使用GBK编码，Java字符串内部也是GBK</li><li>Linux/Mac系统默认使用UTF-8编码，Java字符串内部同样是UTF-8</li></ul><p>以上只是一种理解方式。实际上，Java内部（版本9之前）使用UTF-16 LE存储字符串，而getBytes()时才会参考JVM启动参数<code>-Dfile.encoding</code>（没有的话就看操作系统环境），并且这个转换过程是透明的，我们感知不到。</p><h1 id="编码类型"><a href="#编码类型" class="headerlink" title="编码类型"></a>编码类型</h1><p>让我们看一下各种默认编码：</p><p><small style="letter-spacing: -1pt;"><br>中国大陆标准是GBK；<br>Linux系统/Mac系统通常使用UTF-8编码；<br>（中国大陆的）Windows系统与程序通常使用GBK编码；<br>Java内部使用UTF-16编码；<br>在Windows中UTF-8还有带BOM头和不带BOM头的版本；<br>在Linux/Mac系统中，可将Java内部存储的字符串视为UTF-8；<br>在Windows系统中，需要将Java内部存储视为GBK；<br>Tomcat默认使用ISO-8859-1编码；<br>URL根据场合不同分别使用了GBK与UTF-8编码；<br>MySQL默认使用latin1；<br>日本Galgame经常使用Shift-JIS编码；<br>emoji（表情符号😂）需要使用UTF-8编码……</small></p><p>以上看起来很乱，而且确实很乱——真·乱码。</p><p>为了避免字符编码的坑，<strong>如果你的系统尚未投入正式开发，请把所有编码统一成UTF-8！</strong></p><ul><li>另外需注意，MySQL是<code>utf8mb4</code>，不是那个有坑的<code>utf8</code>！</li></ul><p>如果系统已经上线，而且用了GBK编码，那就祈祷上线之前做过充分测试，然后用生僻字起名的人也没来找茬吧。</p><h1 id="如何理解乱码"><a href="#如何理解乱码" class="headerlink" title="如何理解乱码"></a>如何理解乱码</h1><h2 id="产生原因"><a href="#产生原因" class="headerlink" title="产生原因"></a>产生原因</h2><p>以“这是一段LuanMa乱码”为例。</p><p>用UTF-8编码（忽略BOM头）存储的话，文件内容是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e8 bf 99 e6 98 af e4 b8 80 e6 ae b5 4c 75 61 6e 4d 61 e4 b9 b1 e7 a0 81</span><br><span class="line">-------- -------- -------- --------                   -------- --------</span><br><span class="line">   这       是        一       段    L  u  a  n  M  a     乱       码</span><br></pre></td></tr></table></figure><br>用GBK编码存储的话，文件内容是这样的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d5 e2 ca c7 d2 bb b6 ce 4c 75 61 6e 4d 61 c2 d2 c2 eb</span><br><span class="line">----- ----- ----- -----                   ----- -----</span><br><span class="line">  这    是    一    段   L  u  a  n  M  a    乱    码</span><br></pre></td></tr></table></figure><br>如果内部是UTF-8，却按GBK编码处理，那么乱码就来了：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">e8 bf 99 e6 98 af e4 b8 ...</span><br><span class="line">----- ----- ----- ----- </span><br><span class="line">  杩    欐    槸     涓   ...</span><br></pre></td></tr></table></figure><br>如果内部按GBK存储，却按UTF-8处理，结果也一样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">d5   e2   ca  c7  d2 bb  b6   ce  4c ...</span><br><span class="line">--   --   --  --  -----  --   --  -- </span><br><span class="line">错误 错误 错误 错误    һ   错误 错误  L</span><br></pre></td></tr></table></figure><br>其中的“错误”表示无法按编码规则解析，会变成黑色菱形问号<code>�</code>(<code>ef bf bd</code>)。出现黑菱形的时候，数据就已经被破坏了。</p><h2 id="回答两个问题"><a href="#回答两个问题" class="headerlink" title="回答两个问题"></a>回答两个问题</h2><p>在看到乱码时，问自己两个问题：</p><ul><li>【原始字符串】的内部存储用了什么编码？</li><li>看到乱码的时候，是【谁】按照【哪种编码】【解析】了字符串的内部存储？</li></ul><p>无论是读取、写入还是传输，只要碰到乱码，就用这两个问题来询问自己，然后事情就会清楚一些。</p><h2 id="一些案例"><a href="#一些案例" class="headerlink" title="一些案例"></a>一些案例</h2><p>举一些Java（在Linux/Mac上运行）的案例：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String strNew = <span class="keyword">new</span> String(str.getBytes(<span class="string">&quot;GBK&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>我们假设原始字符串str的内部存储用了GBK编码。</li><li>【我们】按【UTF-8编码】【解析】了字符串str的内部存储。这样解析是错的，所以当然会产生乱码，程序代码也不应该这样写。</li></ul><p>&nbsp;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String strNew = <span class="keyword">new</span> String(str.getBytes(<span class="string">&quot;GBK&quot;</span>), <span class="string">&quot;GBK&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>我们假设原始字符串str的内部存储用了GBK编码。</li><li>我们按【GBK编码】【解析】了字符串str的内部存储。<ul><li><em>这样解析是对的，但是有意义吗？有，在Linux系统中Java内部用UTF-8存储字符串，这样实际上就把GBK内部存储无损地转成UTF-8内部存储了。</em></li></ul></li></ul><p>&nbsp;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">String strNew = <span class="keyword">new</span> String(str.getBytes(<span class="string">&quot;ISO-8859-1&quot;</span>), <span class="string">&quot;UTF-8&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>我们假设原始字符串str的内部存储用了ISO-8859-1编码。</li><li>【我们】按【UTF-8编码】【解析】了字符串str的内部存储，并保存到strNew中。<ul><li><em>理论上讲这样实现是错的，但是，由于用ISO-8859-1编码相当于使用原始的二进制存储，所以，只要原始二进制存储是按UTF-8存储的，这条语句就不会丢失数据，也不会产生乱码。</em></li></ul></li></ul><p>&nbsp;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.setCharacterEncoding(<span class="string">&quot;GBK&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>我们假设原始字符串（原始请求）的内部存储用了GBK编码。<ul><li><em>怎么用了GBK编码呢？<code>&lt;meta charset=&quot;GBK&quot;&gt;</code></em></li></ul></li><li>用户提交表单，向服务器发送请求时，让【request对象】按【GBK编码】【解析】原始请求。<ul><li><em>Tomcat呢？先假设它的配置是对的，没做过任何转换。</em></li></ul></li></ul><p>&nbsp;</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">&quot;GBK&quot;</span>);</span><br></pre></td></tr></table></figure><ul><li>要求response在内部存储使用GBK编码。</li><li>要求浏览器按GBK解析请求返回结果的内部存储。</li></ul><p>&nbsp;</p><p>先这样理解，后续有机会再详细讨论这些事。</p><h1 id="乱码现象"><a href="#乱码现象" class="headerlink" title="乱码现象"></a>乱码现象</h1><p>我们再认识一下各种乱码的样子，以后看到乱码之后大概就能猜测乱码原因了。</p><p>原文：这是一段LuanMa乱码</p><h2 id="一次转换"><a href="#一次转换" class="headerlink" title="一次转换"></a>一次转换</h2><div class="table-container"><table><thead><tr><th>现象描述</th><th>内容</th><th>这说明原文的内部存储是哪种编码</th><th>按哪种编码解析了</th><th>乱码内容的内部存储</th><th>备注</th></tr></thead><tbody><tr><td> 火星文</td><td>杩欐槸涓€娈礚uanMa涔辩爜</td><td>UTF-8</td><td>GBK</td><td>e8 bf 99 e6 98 af e4 b8 3f e6 ae b5 4c 75 61 6e 4d 61 e4 b9 b1 e7 a0 81</td><td>可以恢复大部分数据，但有损失（<code>3f</code>）</td></tr><tr><td> 黑色菱形问号</td><td>����һ��LuanMa����</td><td>GBK</td><td>UTF-8</td><td>ef bf bd ef bf bd ef bf bd ef bf bd d2 bb ef bf bd ef bf bd 4c 75 61 6e 4d 61 ef bf bd ef bf bd ef bf bd ef bf bd</td><td><code>ef bf bd</code>即无法解析时产生的“无效码”，无法恢复数据</td></tr><tr><td> 稀疏的拉丁字母</td><td>è¿æ¯ä¸æ®µLuanMaä¹±ç</td><td>UTF-8</td><td>ISO-8859-1</td><td>e8 bf 99 e6 98 af e4 b8 80 e6 ae b5 4c 75 61 6e 4d 61 e4 b9 b1 e7 a0 81</td><td>可以完整恢复数据</td></tr><tr><td> 稠密的拉丁字母</td><td>ÕâÊÇÒ»¶ÎLuanMaÂÒÂë</td><td>GBK</td><td>ISO-8859-1</td><td>d5 e2 ca c7 d2 bb b6 ce 4c 75 61 6e 4d 61 c2 d2 c2 eb</td><td>可以完整恢复数据</td></tr><tr><td> 问号</td><td>????LuanMa??</td><td>GBK / UTF-8</td><td>ISO-8859-1</td><td>3f 3f 3f 3f 4c 75 61 6e 4d 61 3f 3f</td><td>原始字符串就没有汉字，所以不可能恢复数据</td></tr></tbody></table></div><h2 id="二次转换（A→B→A）"><a href="#二次转换（A→B→A）" class="headerlink" title="二次转换（A→B→A）"></a>二次转换（A→B→A）</h2><p>在字符编码方面，“负负”叠加，结果不一定是“正”：</p><div class="table-container"><table><thead><tr><th>现象描述</th><th>内容</th><th>原始字符串的内部存储</th><th>你按哪种编码解析了</th><th>你又转换成了哪种编码 </th></tr></thead><tbody><tr><td> 锟斤拷</td><td>锟斤拷锟斤拷一锟斤拷LuanMa锟斤拷锟斤拷</td><td>GBK</td><td>UTF-8</td><td>GBK</td></tr><tr><td> 丢个别文字</td><td>这是�?段LuanMa乱码</td><td>UTF-8</td><td>GBK</td><td>UTF-8</td></tr></tbody></table></div><p>出现“锟斤拷”，是因为按UTF-8编码规则，解析内部存储是GBK的字符串时，部分字节无法解析，程序按照规范将那些无法解析的字节换成了<code>ef bf bd</code>。再将这串内容转回GBK时，就变成了“锟”（GBK：<code>ef bf</code>）或者“锟斤拷”（GBK：<code>ef bf   bd ef   bf bd</code>）。</p><p>出现“？”同样是因为按GBK编码规则无法解析，结果用“?”（<code>3f</code>）替代了。</p><p>“锟斤拷”或“?”都说明信息已经丢失，就算手持两把锟斤拷，口中疾呼烫烫烫，原始数据也找不回来了。由此可见，处理UTF-8和GBK两种编码时，必须把原始字符串的编码弄对，否则互转会丢失信息。</p><h2 id="二次转换（A→B→B）"><a href="#二次转换（A→B→B）" class="headerlink" title="二次转换（A→B→B）"></a>二次转换（A→B→B）</h2><p>如果已经做过A→B的转换，你对此不知情，又做了一遍A→B的转换：</p><div class="table-container"><table><thead><tr><th>现象描述</th><th>内容</th><th>A→B中的A</th><th>A→B中的B</th></tr></thead><tbody><tr><td> 火星文</td><td>鏉╂瑦妲告稉锟藉▓绀歶anMa娑旇京鐖�</td><td>UTF-8</td><td>GBK</td></tr><tr><td> ???</td><td>???????LuanMa????</td><td>GBK</td><td>UTF-8</td></tr></tbody></table></div><p>可以看到，无论是ABA，还是ABB，二次转换都会让乱码更乱。</p><p>遇到乱码，我们应该要做的是理清“内部存储是哪种编码”和“用哪种编码解析的”，而不是粗暴地再进行一遍转码。</p><h1 id="不一定是乱码的乱码"><a href="#不一定是乱码的乱码" class="headerlink" title="不一定是乱码的乱码"></a>不一定是乱码的乱码</h1><p>还有一种乱码，俗称“麻将牌”，样式为一个方块里面写入了几个数字（如下图所示）。这个不一定是乱码，有可能只是电脑系统缺字体。</p><p><img src="/img/2020-03-15-luanma-1/majiang.png" alt=""></p><p>把字体装好之后，如果麻将牌变成了火星文，那么才是真乱码，后续按火星文处理方式处理即可。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li><span class="exturl" data-url="aHR0cHM6Ly93d3cucnVhbnlpZmVuZy5jb20vYmxvZy8yMDEwLzAyL3VybF9lbmNvZGluZy5odG1s">关于URL编码<i class="fa fa-external-link-alt"></i></span></li><li><span class="exturl" data-url="aHR0cHM6Ly9nZXJtaW5hdGUuZ2l0aHViLmlvLzIwMTYvR0JLJUU0JUI4JThFVVRGLTglRTclQkMlOTYlRTclQTAlODElRTklOTQlOTklRTglQUYlQUYlRTglQkQlQUMlRTYlOEQlQTIlRTUlOTAlOEUlRUYlQkMlOEMlRTYlOTclQTAlRTYlQjMlOTUlRTYlODElQTIlRTUlQTQlOEQv">GBK与UTF-8编码错误转换后，无法再正确恢复<i class="fa fa-external-link-alt"></i></span></li></ul><h1 id="本系列文章"><a href="#本系列文章" class="headerlink" title="本系列文章"></a>本系列文章</h1><ul><li><strong>乱码现象概述</strong></li><li><a href="/2020/03/21/luanma-2/">HTTP Request中文编码测试</a></li><li><a href="/2020/04/05/luanma-3/">Tomcat中文编码测试（Linux/Mac）</a></li><li><a href="/2020/04/06/luanma-3.5/">Tomcat中文编码测试（Windows）</a></li><li>MySQL中文编码测试</li><li>补救措施<ul><li>GBK页面，如何处理Ajax中文乱码问题</li></ul></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;编码转换和乱码问题令人头大。在理清编码问题之前，需要先认识一下各种乱码的样子。&lt;br&gt;</summary>
    
    
    
    <category term="闲谈" scheme="https://plusnan.me/categories/%E9%97%B2%E8%B0%88/"/>
    
    
    <category term="乱码" scheme="https://plusnan.me/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>使用脚本快速从本地提取、替换生产服务器class文件</title>
    <link href="https://plusnan.me/2020/03/02/quick-replace-file/"/>
    <id>https://plusnan.me/2020/03/02/quick-replace-file/</id>
    <published>2020-03-01T16:00:00.000Z</published>
    <updated>2020-05-04T15:53:02.104Z</updated>
    
    <content type="html"><![CDATA[<p>生产环境遇到bug，需要紧急修改几个Java文件，然后尽快部署到生产系统中。如果代码中混有其他改动，无法完整打包，那么如何尽快提取出改完的class文件并快速地放到服务器的正确位置呢？</p><a id="more"></a><h1 id="从本机提取文件"><a href="#从本机提取文件" class="headerlink" title="从本机提取文件"></a>从本机提取文件</h1><p>先在自己的IDE中把代码改出来，编译，运行。避免打WAR包，否则还要费心思解压，而且有些系统（例如Mac）解出来之后时间戳还不对。</p><p>重新生成的class文件的修改时间肯定比其他class文件新，这样我们就能用一些脚本将它们挑出来了。</p><h2 id="Windows系统"><a href="#Windows系统" class="headerlink" title="Windows系统"></a>Windows系统</h2><p>使用PowerShell脚本。放在 D:\tiqu.ps1 中：<br><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">CmdletBinding</span>()]</span><br><span class="line"><span class="keyword">Param</span> (</span><br><span class="line">    [<span class="built_in">string</span>] </span><br><span class="line">    <span class="variable">$from</span> = <span class="string">&#x27;.&#x27;</span>, </span><br><span class="line"></span><br><span class="line">    [<span class="built_in">string</span>]</span><br><span class="line">    <span class="variable">$to</span> = <span class="string">&#x27;..\output&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    [<span class="type">AllowNull</span>()]</span><br><span class="line">    [<span class="built_in">string</span>]</span><br><span class="line">    <span class="variable">$time</span>,</span><br><span class="line"></span><br><span class="line">    [<span class="type">AllowNull</span>()]</span><br><span class="line">    [<span class="built_in">int</span>]</span><br><span class="line">    <span class="variable">$min</span>,</span><br><span class="line"></span><br><span class="line">    [<span class="built_in">int</span>]</span><br><span class="line">    <span class="variable">$flat</span> = <span class="number">0</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="variable">$time</span>) &#123;</span><br><span class="line">    <span class="variable">$minTime</span> = [<span class="built_in">DateTime</span>]::ParseExact(<span class="variable">$time</span>, <span class="string">&#x27;hh:mm&#x27;</span>, <span class="variable">$null</span>)</span><br><span class="line">&#125; <span class="keyword">elseif</span> (<span class="variable">$min</span>) &#123;</span><br><span class="line">    <span class="variable">$minTime</span> = (<span class="built_in">Get-Date</span>).AddMinutes(-<span class="variable">$min</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="variable">$minTime</span> = [<span class="built_in">DateTime</span>]::ParseExact(<span class="string">&#x27;00&#x27;</span>, <span class="string">&#x27;hh&#x27;</span>, <span class="variable">$null</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 新建文件夹</span></span><br><span class="line"><span class="built_in">New-Item</span> <span class="literal">-Path</span> <span class="variable">$to</span> <span class="literal">-ItemType</span> Directory <span class="literal">-Force</span> | <span class="built_in">Out-Null</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 搜索文件</span></span><br><span class="line"><span class="built_in">Push-Location</span> <span class="variable">$from</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$fileList</span> = <span class="built_in">Get-ChildItem</span> <span class="literal">-Path</span> . <span class="literal">-Recurse</span> | ? &#123;<span class="variable">$_</span>.LastWriteTime <span class="operator">-gt</span> <span class="variable">$minTime</span>&#125;</span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$file</span> <span class="keyword">in</span> <span class="variable">$fileList</span>) &#123;</span><br><span class="line">    <span class="variable">$relativePath</span> = <span class="built_in">Resolve-Path</span> <span class="literal">-Path</span> <span class="variable">$file</span>.FullName <span class="literal">-Relative</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$flat</span> <span class="operator">-eq</span> <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment"># 保持目录结构</span></span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="variable">$relativePath</span></span><br><span class="line">        <span class="variable">$newPath</span> = <span class="built_in">Join-Path</span> <span class="literal">-Path</span> <span class="variable">$to</span> <span class="literal">-ChildPath</span> <span class="variable">$relativePath</span></span><br><span class="line">        <span class="variable">$newDir</span> = <span class="built_in">Split-Path</span> <span class="literal">-Path</span> <span class="variable">$newPath</span></span><br><span class="line">        <span class="built_in">New-Item</span> <span class="literal">-Path</span> <span class="variable">$newDir</span> <span class="literal">-ItemType</span> Directory <span class="literal">-Force</span> | <span class="built_in">Out-Null</span></span><br><span class="line">        <span class="built_in">Copy-Item</span> <span class="literal">-Path</span> <span class="variable">$file</span>.FullName <span class="literal">-Destination</span> <span class="variable">$newDir</span> <span class="literal">-Force</span> | <span class="built_in">Out-Null</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment"># 不保持目录结构，直接复制</span></span><br><span class="line">        <span class="built_in">Write-Output</span> <span class="variable">$file</span>.Name</span><br><span class="line">        <span class="built_in">Copy-Item</span> <span class="literal">-Path</span> <span class="variable">$file</span>.FullName <span class="literal">-Destination</span> <span class="variable">$to</span> <span class="literal">-Force</span> | <span class="built_in">Out-Null</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Pop-Location</span></span><br></pre></td></tr></table></figure><br>操作时，启动PowerShell，输入</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到Web应用所在目录，IDEA通常是artifacts，Eclipse通常是WebRoot</span></span><br><span class="line"><span class="built_in">cd</span> X:\xxxxxx\out\artifacts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取5分钟之前到现在修改的文件，放到 ..\临时替换 目录中</span></span><br><span class="line">D:\tiqu.ps1 <span class="literal">-to</span> ..\临时替换 <span class="literal">-min</span> <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取从9:20到现在之间修改的文件，放到 ..\output 目录中</span></span><br><span class="line">D:\tiqu.ps1 <span class="literal">-time</span> <span class="number">09</span>:<span class="number">20</span> </span><br></pre></td></tr></table></figure><h2 id="Linux-Mac-Cygwin"><a href="#Linux-Mac-Cygwin" class="headerlink" title="Linux/Mac/Cygwin"></a>Linux/Mac/Cygwin</h2><p>将以下脚本放在<code>/usr/local/bin/tiqu</code>中，设置好<code>x</code>权限。</p><p>注意Mac系统自带getopt是BSD版本，功能比GNU版少，只支持一个字母的短参数，需另外安装gnu-getopt（后面假设安装到了<code>/usr/local/opt/gnu-getopt/bin/getopt</code>）。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="title">help</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;tiqu [options]&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;默认值：把当前目录、当天修改文件放到 out 目录中&quot;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --from=&lt;path&gt;, -f       指定待查找目录&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --to=&lt;path&gt;, -t         指定放置位置，如果没有则自动 mkdir&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --time=&lt;HH:mm&gt;          复制 HH:mm 之后修改的文件&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --min=&lt;min&gt;             复制从 min 分钟之前到现在的文件，和上面参数冲突&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --exclude=&lt;list&gt;, -e    复制时排除符合&lt;list&gt;规则的文件&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --exclude-from=&lt;file&gt;   复制时排除匹配了&lt;file&gt;规则配置列表文件的文件&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --flat, -b              把所有文件平摊到同一目录中，不要保持目录结构（默认值：保持目录结构）&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --help                  显示本帮助&quot;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">fromPath=<span class="string">&quot;.&quot;</span></span><br><span class="line">toPath=<span class="string">&quot;./out&quot;</span></span><br><span class="line">findTime=<span class="string">&quot;00:00&quot;</span></span><br><span class="line">findMin=-1</span><br><span class="line">excludeCmd=<span class="string">&quot;&quot;</span></span><br><span class="line">flat=0</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 苹果系统</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/usr/local/opt/gnu-getopt/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"> </span><br><span class="line">TEMP=`getopt -o hf:t:e:b --long <span class="built_in">help</span>,from:,to:,time:,min:,exclude:,exclude-from,flat -- <span class="string">&quot;<span class="variable">$@</span>&quot;</span>`</span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">set</span> -- <span class="string">&quot;<span class="variable">$TEMP</span>&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        -f|--from)</span><br><span class="line">            fromPath=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        -t|--to)</span><br><span class="line">            toPath=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        --time)</span><br><span class="line">            <span class="keyword">if</span> [[ <span class="string">&quot;<span class="variable">$2</span>&quot;</span> =~ ^[01]?[0-9]:[0-5][0-9]$ ]]; <span class="keyword">then</span></span><br><span class="line">                findTime=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> 错误：无效时间格式！</span><br><span class="line">                <span class="built_in">exit</span> 1</span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        --min)</span><br><span class="line">            findMin=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        -e|--exclude)</span><br><span class="line">            excludeCmd=<span class="string">&quot;--exclude=\&quot;<span class="variable">$2</span>\&quot;&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        --exclude-from)</span><br><span class="line">            excludeCmd=<span class="string">&quot;--exclude-from=\&quot;<span class="variable">$2</span>\&quot;&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        -b|--flat)</span><br><span class="line">            flat=1</span><br><span class="line">            <span class="built_in">shift</span> 1</span><br><span class="line">            ;;</span><br><span class="line">        -h|--<span class="built_in">help</span>)</span><br><span class="line">            <span class="built_in">help</span></span><br><span class="line">            <span class="built_in">exit</span> 0</span><br><span class="line">            ;;</span><br><span class="line">        --)</span><br><span class="line">            <span class="built_in">shift</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            <span class="comment"># echo &quot;Internal error!&quot;</span></span><br><span class="line">            <span class="comment"># exit 1</span></span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 计算时间</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$findMin</span> -eq -1 ]; <span class="keyword">then</span></span><br><span class="line">    IFS=: <span class="built_in">read</span> nowh nowm nows &lt;&lt;&lt; <span class="string">&quot;`date +%T`&quot;</span></span><br><span class="line">    IFS=: <span class="built_in">read</span> bh bm &lt;&lt;&lt; <span class="string">&quot;<span class="variable">$findTime</span>&quot;</span></span><br><span class="line"></span><br><span class="line">    nowh=<span class="variable">$&#123;nowh#0&#125;</span></span><br><span class="line">    nowm=<span class="variable">$&#123;nowm#0&#125;</span></span><br><span class="line">    bh=<span class="variable">$&#123;bh#0&#125;</span></span><br><span class="line">    bm=<span class="variable">$&#123;bm#0&#125;</span></span><br><span class="line"> </span><br><span class="line">    findMin=$(((nowh*<span class="number">60</span>+nowm)-(bh*<span class="number">60</span>+bm)))</span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$findMin</span> -lt 0 ]; <span class="keyword">then</span></span><br><span class="line">        findMin=0</span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line">findMin=$((-findMin))</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 将toPath转成绝对路径</span></span><br><span class="line">mkdir -p <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span></span><br><span class="line">toPath=<span class="string">&quot;`pwd`&quot;</span></span><br><span class="line"><span class="built_in">cd</span> -</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用rsync复制文件</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$fromPath</span>&quot;</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$flat</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">    <span class="comment"># 保持目录结构</span></span><br><span class="line">    find . -<span class="built_in">type</span> f -mmin <span class="variable">$findMin</span> -<span class="built_in">exec</span> rsync -aR &#123;&#125; <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span> \;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="comment"># 不要保持目录结构</span></span><br><span class="line">    find . -<span class="built_in">type</span> f -mmin <span class="variable">$findMin</span> -<span class="built_in">exec</span> rsync -a &#123;&#125; <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span> \;</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 展示已复制文件</span></span><br><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span></span><br><span class="line">find .</span><br></pre></td></tr></table></figure><p>操作时：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 进入到Web应用所在目录，IDEA通常是artifacts，Eclipse通常是WebRoot</span></span><br><span class="line"><span class="built_in">cd</span> xxxxxx/out/artifacts</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取5分钟之前到现在修改的文件，放到 ../临时替换 目录中</span></span><br><span class="line">tiqu --to=../临时替换 --min=5</span><br><span class="line"></span><br><span class="line"><span class="comment"># 提取从9:20到现在之间修改到文件，放到 ./out 目录中</span></span><br><span class="line">tiqu --time=9:20 </span><br></pre></td></tr></table></figure><p>程序会自动搜索已修改文件，并且会按目录结构组织好，之后你就可以直接打包了。</p><h1 id="在服务器上替换（Linux）"><a href="#在服务器上替换（Linux）" class="headerlink" title="在服务器上替换（Linux）"></a>在服务器上替换（Linux）</h1><p>如果已经按目录结构整理好，直接解压替换（<code>unzip -o xxx.zip -d 应用所在目录</code>）便是。对于war包，可使用zip命令直接把文件替换到包里面（<code>cd xxx; zip -r war包 *</code>）。</p><p>如果提供的是散装的class文件，那么找目录会很费劲，可以借助脚本自动找目录，自动替换。可修改以下脚本中的MYBASE变量，然后保存到<code>/usr/local/bin/tihuan</code>中，加好<code>x</code>权限：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 应用所在位置。通常不会变化，可以写死在脚本里头。</span></span><br><span class="line">MYBASE=/opt/xxx</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">help</span></span>() &#123;</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;tihuan [options] 文件名1 文件名2 ...&quot;</span></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --to=&lt;path&gt;, -t         指定搜索目录（默认值：<span class="variable">$&#123;MYBASE&#125;</span>）&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --dry-run, -n           只生成命令，不要实际替换&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --force, -f             不用确认，直接动手替换&quot;</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">&quot;  --help                  显示本帮助&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 苹果系统</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="string">&quot;/usr/local/opt/gnu-getopt/bin:<span class="variable">$PATH</span>&quot;</span></span><br><span class="line"> </span><br><span class="line">TEMP=`getopt -o ht:nf --long <span class="built_in">help</span>,to:,dry-run,force -- <span class="string">&quot;<span class="variable">$@</span>&quot;</span>`</span><br><span class="line"><span class="built_in">eval</span> <span class="built_in">set</span> -- <span class="string">&quot;<span class="variable">$TEMP</span>&quot;</span></span><br><span class="line"></span><br><span class="line">toPath=<span class="string">&quot;<span class="variable">$MYBASE</span>&quot;</span></span><br><span class="line">dryrun=0</span><br><span class="line">force=0</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">true</span>; <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        -t|--to)</span><br><span class="line">            toPath=<span class="string">&quot;<span class="variable">$2</span>&quot;</span></span><br><span class="line">            <span class="built_in">shift</span> 2</span><br><span class="line">            ;;</span><br><span class="line">        -n|--dry-run)</span><br><span class="line">            dryrun=1</span><br><span class="line">            <span class="built_in">shift</span> 1</span><br><span class="line">            ;;</span><br><span class="line">        -f|--force)</span><br><span class="line">            force=1</span><br><span class="line">            <span class="built_in">shift</span> 1</span><br><span class="line">            ;;</span><br><span class="line">        -h|--<span class="built_in">help</span>)</span><br><span class="line">            <span class="built_in">help</span></span><br><span class="line">            <span class="built_in">exit</span> 0</span><br><span class="line">            ;;</span><br><span class="line">        --)</span><br><span class="line">            <span class="built_in">shift</span></span><br><span class="line">            <span class="built_in">break</span></span><br><span class="line">            ;;</span><br><span class="line">        *)</span><br><span class="line">            <span class="comment"># echo &quot;Internal error!&quot;</span></span><br><span class="line">            <span class="comment"># exit 1</span></span><br><span class="line">            ;;</span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">i=0</span><br><span class="line"><span class="keyword">for</span> file <span class="keyword">in</span> <span class="string">&quot;<span class="variable">$@</span>&quot;</span>; <span class="keyword">do</span></span><br><span class="line">    i=$((i+<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> ! [ -f <span class="string">&quot;<span class="variable">$file</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        &gt;&amp;2 <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 源文件不存在：<span class="variable">$&#123;file&#125;</span>&quot;</span></span><br><span class="line">        <span class="built_in">continue</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    fileName=`basename <span class="string">&quot;<span class="variable">$file</span>&quot;</span>`</span><br><span class="line"></span><br><span class="line">    find <span class="string">&quot;<span class="variable">$toPath</span>&quot;</span> -name <span class="string">&quot;<span class="variable">$fileName</span>&quot;</span> &gt; /tmp/tmpfilelist</span><br><span class="line">    list=`cat /tmp/tmpfilelist`</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ -n <span class="string">&quot;<span class="variable">$list</span>&quot;</span> ] &amp;&amp; [ <span class="string">&quot;<span class="variable">$list</span>&quot;</span> != <span class="string">&quot;\n&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 已找到&quot;</span></span><br><span class="line"></span><br><span class="line">        cat /tmp/tmpfilelist | <span class="keyword">while</span> <span class="built_in">read</span> target; <span class="keyword">do</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="variable">$target</span></span><br><span class="line">        <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$force</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> -n <span class="string">&quot;是否继续替换 [y/n]？&quot;</span></span><br><span class="line">            <span class="built_in">read</span> choice</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            choice=<span class="string">&quot;y&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$choice</span>&quot;</span> == <span class="string">&quot;y&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="keyword">if</span> [ <span class="variable">$dryrun</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 已进行替换&quot;</span></span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 请运行以下命令&quot;</span></span><br><span class="line">            <span class="keyword">fi</span></span><br><span class="line">            cat /tmp/tmpfilelist | <span class="keyword">while</span> <span class="built_in">read</span> target; <span class="keyword">do</span></span><br><span class="line">                <span class="keyword">if</span> [ <span class="variable">$dryrun</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">                    cp <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="string">&quot;<span class="variable">$target</span>&quot;</span></span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="built_in">echo</span> <span class="string">&quot;cp \&quot;<span class="variable">$file</span>\&quot; \&quot;<span class="variable">$target</span>\&quot;&quot;</span></span><br><span class="line">                <span class="keyword">fi</span></span><br><span class="line">            <span class="keyword">done</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 已放弃替换&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;[文件 #<span class="variable">$&#123;i&#125;</span>] 未找到文件，未进行替换&quot;</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">echo</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">rm /tmp/tmpfilelist 2&gt; /dev/null</span><br></pre></td></tr></table></figure><p>操作时：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 此处省略下载文件与备份操作。实际操作时注意备份！</span></span><br><span class="line"><span class="comment"># 以下根据实际情况二选一</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 展开（exploded）模式</span></span><br><span class="line">tihuan XXXXX.class</span><br><span class="line"></span><br><span class="line"><span class="comment"># war包模式</span></span><br><span class="line">mkdir tmp</span><br><span class="line">unzip -o war包 -d tmp</span><br><span class="line">tihuan --to=tmp XXXXX.class</span><br><span class="line"><span class="built_in">cd</span> tmp</span><br><span class="line">zip -r 原先的war包 *</span><br></pre></td></tr></table></figure></p><h1 id="后续操作"><a href="#后续操作" class="headerlink" title="后续操作"></a>后续操作</h1><ul><li>本文的操作应当只用于应急处置。问题处理好之后，代码该提交提交，基线该打patch打patch，忘了的话就是极大的隐患。</li><li>这次事情紧急，直接从开发库中取了文件。给不紧急的bug打patch时，一定要取基线代码，从基线上打，打完再合并回去。</li><li>每次正式升级之前一定要打基线，从基线取代码，打整包，生产环境配置文件用事先预备好的备份覆盖升级包，不要单独换文件！换文件升级，有第一次，就会有第二次。越是换文件，后面就越不敢打整包，几个星期以后，全世界就没有人知道生产环境与本地代码有什么区别了。</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;生产环境遇到bug，需要紧急修改几个Java文件，然后尽快部署到生产系统中。如果代码中混有其他改动，无法完整打包，那么如何尽快提取出改完的class文件并快速地放到服务器的正确位置呢？&lt;/p&gt;</summary>
    
    
    
    <category term="系统运维" scheme="https://plusnan.me/categories/%E7%B3%BB%E7%BB%9F%E8%BF%90%E7%BB%B4/"/>
    
    
    <category term="shell" scheme="https://plusnan.me/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>如何写好软件文档</title>
    <link href="https://plusnan.me/2020/02/20/how-to-write-document/"/>
    <id>https://plusnan.me/2020/02/20/how-to-write-document/</id>
    <published>2020-02-19T16:00:00.000Z</published>
    <updated>2021-02-06T16:22:22.081Z</updated>
    
    <content type="html"><![CDATA[<p>不写文档会挨骂，写烂文档更挨骂，写好文档，才能少挨骂。</p><a id="more"></a><h1 id="明确受众"><a href="#明确受众" class="headerlink" title="明确受众"></a>明确受众</h1><p>开始动笔之前，先问领导与自己：<strong>文档是写给谁看的？</strong></p><p>受众不同，文档的侧重点也要有所不同。</p><p>写给技术人员，文档的语言要尽可能精确，而且要明白他们关心的是什么内容。例如同样是写接口手册，开发人员文档要把重点放在接口规范方面，而运维文档要把重点放在接口服务的监控与维护方面。</p><p>写给用户时，文档的语言要直观，不必特别精确，能用通俗的语言描述，就不要用技术的语言描述；能用结构示意图、流程图、折线图、条形图、饼图等图片形式描述，就要避免用密密麻麻的文字描述。总之要让新手看得懂。至于特殊情况，能不提就不提，毕竟正常情况他们还不一定能看得懂呢。</p><h1 id="明确形式"><a href="#明确形式" class="headerlink" title="明确形式"></a>明确形式</h1><p>要确认好文档以什么形式展现：设计文档、操作说明书、汇报PPT？</p><p>特别是刚参加工作、没写过文档的新人，经常会犯些低级错误——明明让写需求文档，把系统具体实现写进去了；让写操作手册，却从需求文档复制粘贴，写了一堆业务规则，看完仍然不知道系统该点什么按钮；让做PPT，页面文字密密麻麻，别说投影，看屏幕都觉得累……</p><p>除了文件的格式，内容也要考虑好形式。例如设计文档要重点讲系统的功能实现，而操作说明书则要避免提及系统的内部原理，重点讲用户眼睛能看到的外部现象。还有技术文档要关注细节，而商务文档要注重表达形式，弱化细节。</p><h1 id="注意规范"><a href="#注意规范" class="headerlink" title="注意规范"></a>注意规范</h1><p>团队通常会制定文档模板和规范，有些文档还受国家或行业规范制约。开始编辑之前，先找领导同事要一份现成模板，然后再动手。不要随便自己找模板，不要违反文档规范。</p><p>文档要特别注意格式！例如：</p><ul><li>不要有错别字</li><li>英语单词拼写要正确，例如是MySQL而非mysql、MySql、MYSQL</li><li>标点符号要正确，特别是不要在中文中使用英文标点</li><li>字体、字号要统一</li><li>不要有多余空白</li><li>该对齐的地方要对齐</li></ul><p>关于格式方面的规则，可参考阮一峰《<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3J1YW55Zi9kb2N1bWVudC1zdHlsZS1ndWlkZQ==">中文技术文档的写作规范<i class="fa fa-external-link-alt"></i></span>》。</p><h1 id="表达准确"><a href="#表达准确" class="headerlink" title="表达准确"></a>表达准确</h1><p>即使不使用精确的技术语言，语言表达仍然要保持准确，以免产生分歧。</p><h2 id="准确地领会任务目的"><a href="#准确地领会任务目的" class="headerlink" title="准确地领会任务目的"></a>准确地领会任务目的</h2><p>当领导在微信里发了一句“写清什么功能在哪里如何实现”，实际上你收到的是一个含糊的要求，需要与领导进行确认：这个要求的目的是什么？“哪里”是什么含义？指的是一个功能模块，还是一个操作步骤，还是一个文档的位置？“如何”又是什么含义？是某一套开发框架，还是一套业务流程，还是一句简单的“用Java开发”？</p><h2 id="避免模棱两可的语言表达"><a href="#避免模棱两可的语言表达" class="headerlink" title="避免模棱两可的语言表达"></a>避免模棱两可的语言表达</h2><p>例如“接口”，是指Java的interface呢，还是后端调用的API呢，还是浏览器调用的API呢，还是指用户输入输出的界面呢，或者是物理的插头插座？如果无法从上下文看出接口具体在指什么东西，那么就要界定好“接口”的具体含义。</p><p>除了模棱两可的话，还要避免“正确的废话”。例如“该接口应当在需要的功能中进行调用”，道理正确，在开发规范中写这句话没问题，但是在设计文档中写这句话就不具备可操作性——“需要的功能”有哪些？如果没有该怎么办？难道是“不应当在不需要的功能中进行调用”吗？当然解决方法也简单，就是要“具体”，明确哪些功能是“需要的功能”，举出实际案例，这样这句话就有意义了。</p><h2 id="注意符合目标读者的语言体系"><a href="#注意符合目标读者的语言体系" class="headerlink" title="注意符合目标读者的语言体系"></a>注意符合目标读者的语言体系</h2><p>面向用户的文档，要更加注意用户的语言体系。例如开发政府系统，你把“报备”误写成“审批”，虽然在系统实现上都是把数据库表格里的CURRENT_STATE字段给UPDATE成完全相同的字符，没有任何技术上的区别，但在用户眼里这就是一个设计缺陷，因为“报备”和“审批”是两种性质完全不同的操作，具体来讲，在系统之外的人工流程，以及用户在点击操作按钮之后需要承担的责任都是不一样的。</p><h1 id="先完成后优化"><a href="#先完成后优化" class="headerlink" title="先完成后优化"></a>先完成后优化</h1><p>刚刚走出校园就进入职场的新人容易犯一个错误：总想着把工作做好再提交。</p><p>这正是职场大忌！假如你不熟悉工作，又没有及时与领导沟通，等你费尽九牛二虎之力勉强在deadline之前完成，领导却发现你写出来的东西根本不符合要求，那时候领导的心情一定是非常激动的，你以后的工作也会充满（负面）挑战。</p><p>工作质量很重要，用合适的方法按时完成同样重要。特别是职场新人，干活应当这样干：</p><ol><li>接到任务后，先稍微想一下整体思路，和分配任务的领导确认一下自己思路对不对。</li><li>不定期跟领导反馈自己做得怎么样，遇到问题及时找领导同事问。</li><li>不要糊弄，但是也要优先保证总体进度，先把“垃圾”堆出来，做出一个大体上说得过去的东西，然后再优化细节。职场上很难弄出完美的东西，只能是不断优化，早些把垃圾堆好，优化的空间就相对大一些。（本条不适用于纯粹压榨人的公司）</li></ol><h1 id="多读、多改"><a href="#多读、多改" class="headerlink" title="多读、多改"></a>多读、多改</h1><p>初稿肯定会有不少语文方面的问题，句子不通顺，语义不清楚，前后逻辑不连贯。因此，写完之后要通读文档，PPT的话还要试着讲一下，将整个文档顺一顺，大小毛病改一改，然后再从头检查一遍，重复以上几个步骤，直到大体满意为止。</p><p>直接提交不行吗？当然不行了！明明是自己能挑出来改好的低级错误，却放着交给别人检查，这就是在浪费别人时间，而且会让人觉得你工作态度不好。虽然你努力完善的结果可能也是返工，但返工原因由低级的格式问题变成高级的业务问题，至少不会让人太扫兴。</p><h1 id="版本管理"><a href="#版本管理" class="headerlink" title="版本管理"></a>版本管理</h1><p>文档应做好版本管理。</p><p>即便无法版本管理（例如净是些照片、Word、Excel、PowerPoint文件），至少要有个固定地方集中存放，而不是乱七八糟散落在邮箱附件、微信聊天记录、QQ群文件、张三电脑C盘、李四电脑D盘……特别是与外界沟通协调的文件，如果不集中管理，日后需要追查记录时便无处可寻，让人觉得管理混乱。</p><p>文档要分门别类存放。就算要偷懒，至少文件名要有个规范（关键词、日期时间等），免得找不到。有心思的话，可以进一步基于ES搞一个搜索引擎（<code>TODO</code> 暂时未找到现成案例，待补完）。</p><p>对于内部开发文档，个人提倡使用纯文本与Markdown格式，不要使用Word格式。Word格式需要浪费时间排版，难以搜索，而且很难管理版本，而Markdown格式简洁明了，便于全文搜索，并且可以直接扔到SVN/Git仓库里面进行版本管理。</p><p>文档发生重要改动，如需求变更、用户确认结论等，务必记录修改时间和修改原因，并做好变更管理（例如commit message），以便日后追查。受影响的程序代码也要用注释和提交信息加以说明。</p><p>提倡使用一些专门的文档/知识库软件，例如<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0Jvb2tTdGFja0FwcC9Cb29rU3RhY2s=">BookStack<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly93d3cuZG9rdXdpa2kub3Jn">DokuWiki<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9tZWRpYXdpa2kub3JnLw==">MediaWiki<i class="fa fa-external-link-alt"></i></span>。这类软件操作方便，适合团队协作维护文档，又有版本管理功能，可随时检查修订记录。</p><h1 id="文档要随时维护，不要攒着"><a href="#文档要随时维护，不要攒着" class="headerlink" title="文档要随时维护，不要攒着"></a>文档要随时维护，不要攒着</h1><p>当用户需求、功能设计、接口规范、数据库结构等信息发生变化时，务必及时更新相应的文档。今天不把文档维护好，明天会有新的事情来烦扰你，让你更没有心思管文档，日积月累，最终变成一个大坑。</p><p>建议在小组安排一个专门的文档人员，在有人往工作群丢文件的时候，他/她能默默地把文件收集整理好。当一项阶段性任务完成的时候，也能把团队成员工作的素材给整理好。</p><p>如果没有专门的文档团队，那么在管理项目时应当将文档也作为开发任务之一来管理，将光写代码（特别是变更了设计的代码）、不维护相关开发文档视为没完成任务。</p><p>当然现在已经是内卷的时代，能把工作卷完就已经很难了，所以即便不把文档维护到最新，至少希望大家能维护比较规范的备忘录，指出文档哪个地方与实际不符，文档希望按A实现而实际上已经按B思路来做，然后再对备忘录进行统一版本管理，这样总比什么文字记录都没有强。</p><h1 id="平时抽空练习练习"><a href="#平时抽空练习练习" class="headerlink" title="平时抽空练习练习"></a>平时抽空练习练习</h1><p>很多技术人员的语言表达能力不强，虽然大佬心里清楚他是什么意思，但是一般萌新却难以理解。建议大家去CSDN、GitHub等网站开个博客，或者去知乎编点故事，用长篇回答装装逼，练习自己的语言表达能力、搜索资料的能力与整理信息的能力。</p><h1 id="本系列文档"><a href="#本系列文档" class="headerlink" title="本系列文档"></a>本系列文档</h1><ul><li><strong>如何写好软件文档</strong></li><li><a href="/2020/10/24/how-to-draw-graph/">如何画架构图</a></li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;不写文档会挨骂，写烂文档更挨骂，写好文档，才能少挨骂。&lt;/p&gt;</summary>
    
    
    
    <category term="项目开发经验" scheme="https://plusnan.me/categories/%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C/"/>
    
    
    <category term="文档" scheme="https://plusnan.me/tags/%E6%96%87%E6%A1%A3/"/>
    
  </entry>
  
  <entry>
    <title>养成随手存档的习惯！</title>
    <link href="https://plusnan.me/2020/02/05/archive/"/>
    <id>https://plusnan.me/2020/02/05/archive/</id>
    <published>2020-02-04T16:00:00.000Z</published>
    <updated>2021-01-12T17:35:53.190Z</updated>
    
    <content type="html"><![CDATA[<p>网上的东西很容易消失，而中国网站的东西更容易“404”（“被”消失）。虽然我们无法改变中国“404”的制度，但是我们仍然可以学习一些存档与找回存档的操作方法，养成随手存档的习惯，及时备份对自己有意义的内容，尽量降低损失。</p><a id="more"></a><h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>本文提及了一些网站和工具，然而很多都被墙了。<span class="exturl" data-url="aHR0cHM6Ly96aC53aWtpcGVkaWEub3JnL3dpa2kvJUU2JTlDJTg5JUU1JTg1JUIzJUU5JTgzJUE4JUU5JTk3JUE4">有关部门<i class="fa fa-external-link-alt"></i></span>要制造“404”，墙要守护“404”，那么想防“404”，不翻墙是不现实的。</p><p>有关部门到底是哪个部门呢？“有关部门当然就是有关的部门了。无关的就不能称为有关部门。所以我建议你还是要向他们询问。”</p><p>此外，即便单纯做存档也是有风险的，例如2020年4月19日端点星的三个志愿者被警方以“寻衅滋事”名义被捕。</p><h1 id="随手存档的重要性"><a href="#随手存档的重要性" class="headerlink" title="随手存档的重要性"></a>随手存档的重要性</h1><p>信息会随时消失！</p><p>消失与“被消失”太常见了，例如：</p><ul><li>“敏感话题”，甚至需要麻烦有关部门下令全网删除</li><li>为了避免招惹是非，网站主动屏蔽某些话题</li><li>为了遮羞、耍赖等，原始作者自行删除，或者修改内容</li><li>本来是免费的东西，突然开始会员专享，甚至开了会员也要另收费</li><li>本身就是违法的东西（例如盗版资源），结果被举报和执法了</li><li>网站改版，原先的位置与网址改没了</li><li>网站关站倒闭了</li><li>网站被有关部门勒令整改，下线了</li><li>……</li></ul><p>如果是言论审查，它的速度可以很快——快到当你还在看这个页面的时候，审核员早已让内容消失了。手速慢一点的话，也不过是几分钟到几小时的事情。</p><p>即使是外国网站，只要由中国人管理，内容照样可以“被消失”，只不过不像国内那样操作得太夸张而已。例如看起来像外国然而实际是中国公司运营的TikTok（<span class="exturl" data-url="aHR0cHM6Ly93d3cudGhlZ3VhcmRpYW4uY29tL3RlY2hub2xvZ3kvMjAxOS9zZXAvMjUvcmV2ZWFsZWQtaG93LXRpa3Rvay1jZW5zb3JzLXZpZGVvcy10aGF0LWRvLW5vdC1wbGVhc2UtYmVpamluZw==">案例<i class="fa fa-external-link-alt"></i></span>）、平台在美国而实际上很多管理员在中国的中文维基百科（<span class="exturl" data-url="aHR0cHM6Ly93d3cuYmJjLmNvbS96aG9uZ3dlbi90cmFkL2NoaW5lc2UtbmV3cy00OTk1ODEyNw==">案例<i class="fa fa-external-link-alt"></i></span>）。不是中国人？只要想挣中国人的钱，有关部门仍然可以根据自己需要，随时对他们“今日说法”、“道德观察”、“法治进行时”，然后他们就不得不为了钱而考虑如何配合了。</p><p>就算是外国网站，外国人管理，中国人没有管理权限，只要内容发布者是中国人，警察随时可以去他们家串个门（顺便用“非法信道国际联网”这个理由罚点钱），然后内容也会随时消失。</p><p>因此，有必要学习一些存档与找回存档的方法。对自己有意义的信息要及时存档，以防丢失。</p><h1 id="如何存档（按工具）"><a href="#如何存档（按工具）" class="headerlink" title="如何存档（按工具）"></a>如何存档（按工具）</h1><h2 id="截图"><a href="#截图" class="headerlink" title="截图"></a>截图</h2><p>截屏是种简单粗暴的保存信息的方式，按几个按键就能搞定，快，而且转发分享也容易！</p><p>如果截屏还嫌慢，掏出手机，拍照录像，OK。</p><h3 id="电脑"><a href="#电脑" class="headerlink" title="电脑"></a>电脑</h3><p>Windows普通截图：</p><ul><li>按<kbd>Print Screen</kbd>键录制，然后去画图粘贴，保存</li><li>使用系统自带“截屏工具”截屏</li><li>使用QQ、微信等软件的截屏快捷键截屏</li></ul><p>Linux截图与桌面环境有关，略。</p><p>Mac普通截图：</p><ul><li><kbd>Command+Shift+3</kbd>：截全屏然后自动保存到桌面上</li><li><kbd>Command+Shift+3</kbd>：截取选定区域然后自动保存到桌面上 </li></ul><p>网站内容通常无法用一张图截全，那么如何进行长截图呢？</p><ul><li>Chrome：<kbd>F12</kbd>→<kbd>Ctrl+Shift+P</kbd>（苹果是<kbd>Command+Shift+P</kbd>）→Capture full size screenshot</li><li>Firefox：在页面点击右键，选择截图</li><li>Windows 10自带Edge浏览器：点击右上角“添加笔记”按钮</li><li>国产浏览器：通常自带截图功能</li></ul><h3 id="手机"><a href="#手机" class="headerlink" title="手机"></a>手机</h3><p>国产Android手机通常自带截长图的功能。如果没有，可安装PPIICC（需要root）。Android其他截屏软件可参见<span class="exturl" data-url="aHR0cHM6Ly9zc3BhaS5jb20vcG9zdC80ODM3Mw==">此文章<i class="fa fa-external-link-alt"></i></span>。</p><p>苹果手机的长截图应用有Picsew、Tailor等，另外App Store里面还有一些其他的截图应用（连“百毒”都来凑了热闹）。</p><p>新版iOS系统自带长截图，然而这个功能限定在自带的Safari浏览器中，而且截出来的是PDF格式。</p><h3 id="拼接截图"><a href="#拼接截图" class="headerlink" title="拼接截图"></a>拼接截图</h3><p>有些内容太长了，用长截图工具也截不全，此时可以分段截，截完再使用其他软件拼接。</p><p>用什么软件拼接？电脑的话就是画图或Photoshop。手机的话可参考<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI5MjYzNzQ3">知乎回答<i class="fa fa-external-link-alt"></i></span>。</p><h2 id="录屏"><a href="#录屏" class="headerlink" title="录屏"></a>录屏</h2><p>录屏也是一种记录方法。然而  视频截屏不太方便传播，也不太方便阅读，建议确实有必要的时候才录屏。</p><ul><li>Windows/Linux电脑：推荐使用<span class="exturl" data-url="aHR0cHM6Ly9vYnNwcm9qZWN0LmNvbS8=">OBS Studio<i class="fa fa-external-link-alt"></i></span>软件录屏，很多游戏主播用的就是该软件</li><li>苹果电脑：使用系统自带的QuickTime即可录屏</li><li>Android设备：参见<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzI0MTY3Mjg1">知乎提问<i class="fa fa-external-link-alt"></i></span></li><li>iPhone/iPad：从iOS 11开始已经是<span class="exturl" data-url="aHR0cHM6Ly9zdXBwb3J0LmFwcGxlLmNvbS96aC1jbi9IVDIwNzkzNQ==">系统自带功能<i class="fa fa-external-link-alt"></i></span></li></ul><h2 id="互联网档案馆（推荐）"><a href="#互联网档案馆（推荐）" class="headerlink" title="互联网档案馆（推荐）"></a>互联网档案馆（推荐）</h2><p><span class="exturl" data-url="aHR0cHM6Ly9hcmNoaXZlLm9yZy8=">archive.org<i class="fa fa-external-link-alt"></i></span>（互联网档案馆，又名时光机）与<span class="exturl" data-url="aHR0cDovL2FyY2hpdmUuaXMv">archive.is<i class="fa fa-external-link-alt"></i></span>是两个常用的归档网站。只要在里面输入网址，点击保存，页面内容就会被抓取下来。之后也可以通过这两个网站查阅网站存档记录。因为这样非常有利于防止“404”，所以很早就获得了墙的认证。</p><p>截图与转载都可以造假，而归档网站保存的是网页原貌、网页原始网址与原始时间，不太可能造假。</p><p>建议在浏览器安装一个归档插件，例如Save To The Wayback Machine（<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvc2F2ZS10by10aGUtd2F5YmFjay1tYWNoaS9lZWJwaW9hYWlsYmpvam1kYm1scG9tZmdpam5sY2Vtaz9obD1lbg==">Chrome版<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9hZGRvbnMubW96aWxsYS5vcmcvZW4tVVMvZmlyZWZveC9hZGRvbi9zYXZlLXRvLXRoZS13YXliYWNrLW1hY2hpbmUv">Firefox版<i class="fa fa-external-link-alt"></i></span>），这样就方便随手归档了。一旦页面404，你和其他人都可以用此插件方便地查阅档案馆记录。</p><p>如果网站需要登录才能访问，或者限制国外IP访问，那么归档起不到作用了。而且，archive.org会遵守robots规范（User-Agent: ia_archiver），如果网站在robots.txt中明确拒绝归档，那么archive.org就不会保存内容，需要改用archive.is存档。</p><p>网上有很多喜欢“黑屁”、“指点江山”的智障，如果想怼他们，可以随时给他们的“高雅创作”、“高谈阔论”存档。打脸之后，不接受、不承认？甚至要自我削除，毁灭证据？那就把档案馆链接拿出来让大家看看！</p><h2 id="Evernote-OneNote"><a href="#Evernote-OneNote" class="headerlink" title="Evernote / OneNote"></a>Evernote / OneNote</h2><p>Evernote（中国版称作“印象笔记”，账号内容与国际版隔离）与OneNote是两个笔记软件，均具备收藏网页内容的功能。</p><p>Evernote对网页内容提取得比较好。像新闻资讯等网站，它会聪明地提取出标题与正文，基本上不需要进一步加工精炼。然而，Evernote免费账号只允许登录两个设备，笔记容量也有很大限制，而且中国版的“印象笔记”不支持分享功能。</p><p>OneNote提取，可以选择截图、纯文字或选区。个人感觉在内容提取方面不如Evernote好用，但是在笔记整理方面优于Evernote。</p><p>个人建议：如果想提取图文，不想直接截图，那么用Evernote保存、抓取内容。如果要进一步整合资源，形成论文、报告什么的，就切换到OneNote整理。</p><h2 id="下载到本地"><a href="#下载到本地" class="headerlink" title="下载到本地"></a>下载到本地</h2><p>将网上的内容下载到本地是最安全的方法之一。只要磁盘没坏，没感染病毒，没被勒索软件勒索，没有误删，资源就不会丢失。</p><p>如果要保存网页，只需轻轻地Ctrl+S，然后点击保存就可以了。</p><p>但是，保存完成后记得检查一下，因为有些网站会设法阻止你保存东西，存完也是一堆乱七八糟的程序代码。像音乐网站、视频网站等特殊网站，干脆不能Ctrl+S（除非你只想保存评论区），需要找一些专用的下载工具才行。</p><h2 id="爬虫程序"><a href="#爬虫程序" class="headerlink" title="爬虫程序"></a>爬虫程序</h2><p>网络爬虫太常见了。会编程的话，就可以到网上搜一些爬虫程序的案例，自己写个爬虫扒网站内容。有需要的话可以再买台服务器，或者找个闲置电脑，定时跑程序，实现自动归档。</p><p>如果要爬特定网站，也可以在搜索时把网站名加上，看看有没有现成的程序。</p><h1 id="如何存档（按来源）"><a href="#如何存档（按来源）" class="headerlink" title="如何存档（按来源）"></a>如何存档（按来源）</h1><h2 id="普通网站"><a href="#普通网站" class="headerlink" title="普通网站"></a>普通网站</h2><p>上面提到的几种方法都可以试试。</p><h2 id="微信"><a href="#微信" class="headerlink" title="微信"></a>微信</h2><p>微信非常容易炸！</p><h3 id="微信账号"><a href="#微信账号" class="headerlink" title="微信账号"></a>微信账号</h3><p>已经有大量案例证实：只是在群里或者朋友圈里发句牢骚，账号可能就会被腾讯给封禁。而且，封号还算是轻的，有些人更倒霉，只是群里发了关于领导人的一句话，就让警察带走了。  </p><p>由于微信经常关联了大量现实生活的东西，例如身份认证、联系人、零钱、生活工作通信群组等，这些东西都无法做备份（不嫌麻烦的话倒是可以手工备份联系人），所以建议微信只用于日常联系，不转载东西，不发表任何评论，也不发牢骚。真想谈天论地的时候，只把微信当作引流工具，然后去Telegram等软件里面聊。</p><p>那微信语音行不？你想想，既然微信能把你的语音转成文字，而且能翻译个八九不离十，那么语音聊天的时候难道不能顺便给你识别识别吗？</p><h3 id="微信公众号"><a href="#微信公众号" class="headerlink" title="微信公众号"></a>微信公众号</h3><p>微信公众号更严。文章能发出来，说明至少通过了微信程序的敏感词检测。如果用拼音、火星文、图片等手段绕过检测，后面再让审核员审核、“热心网友”举报便是。该炸的内容早晚会炸。</p><p>如果只是一两篇文章，存档就比较简单了。微信公众号也是网页，所以公众号的存档方式与普通网站差不多：截屏、扔互联网档案馆、用电脑点开保存……</p><p>可是，如果想把整个公众号内容都导出来呢？比较麻烦，但<span class="exturl" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3F1ZXN0aW9uLzIyMTE0NDUx">知乎上有人提供了一些解决方案<i class="fa fa-external-link-alt"></i></span>（<span class="exturl" data-url="aHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMjAwNDIzMTMxMzQ0L2h0dHBzOi8vd3d3LnpoaWh1LmNvbS9xdWVzdGlvbi8yMjExNDQ1MQ==">存档<i class="fa fa-external-link-alt"></i></span>）</p><p>自己写导公众号程序的话，大概有两种思路，一种是模拟浏览器访问，另一种是借助工具抓包，然后用程序整理抓包数据。</p><h2 id="微博"><a href="#微博" class="headerlink" title="微博"></a>微博</h2><p>微博也很容易炸！</p><p>不幸的是，微博无法通过互联网档案馆存档。而且，由于微博平台越来越封闭，防爬措施也越来越多，以前能用的导出工具现在可能都失效了。</p><p><span class="exturl" data-url="aHR0cHM6Ly9ibG9nLmxpdWd1b2ZlbmcuY29tL3AvNTY3MA==">Octoman<i class="fa fa-external-link-alt"></i></span>是目前（2020年2月）能够使用的一款微博导出工具。</p><p>微博评论呢？看起来只能截屏、手工复制粘贴，或者自己写爬虫爬吧。</p><h2 id="音视频网站"><a href="#音视频网站" class="headerlink" title="音视频网站"></a>音视频网站</h2><p>音视频网站比较特殊，不能截图，也不能扔互联网档案馆存档，所以要用一些工具把视频下载到本地，（有需要的话）再找地方重新上传。</p><p>国内主流网站差不多都能用<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL3NvaW1vcnQveW91LWdldA==">you-get<i class="fa fa-external-link-alt"></i></span>下载，你可以用该工具碰碰运气。</p><p>假设你使用Windows系统，那么该工具的安装方法如下：</p><ol><li>安装<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMv">Python 3<i class="fa fa-external-link-alt"></i></span>。在安装程序中，务必勾选“Add Python 3.x to PATH”。</li><li>打开命令提示符</li><li>输入<code>pip3 install you-get</code>。有时候网络不好，需要反复试几次才能成功。</li><li>安装完成。</li></ol><p>需要下载的时候，也是先打开命令提示符，然后输入<code>you-get 网址</code>（把“网址”二字换成实际的网站的网址。需要粘贴时，要点击右键选择粘贴，不能按Ctrl+V）。下载完成后，去C盘的用户文件夹中即可找到文件。国内很多音视频网站只允许国内访问，下载时尽量不要挂梯子。</p><p>建议每次下载视频之前先升级一下you-get的版本，防止工具失效：<code>pip3 install --upgrade you-get</code></p><h1 id="如何找回已删内容"><a href="#如何找回已删内容" class="headerlink" title="如何找回已删内容"></a>如何找回已删内容</h1><p>删除，通常意味着在中国国内都会消失，所以找回已删内容当然要翻墙去墙外寻找。</p><h2 id="互联网档案馆"><a href="#互联网档案馆" class="headerlink" title="互联网档案馆"></a>互联网档案馆</h2><p>如果你记得网站的网址，可以到<span class="exturl" data-url="aHR0cHM6Ly9hcmNoaXZlLm9yZy8=">archive.org<i class="fa fa-external-link-alt"></i></span>或<span class="exturl" data-url="aHR0cDovL2FyY2hpdmUuaXMv">archive.is<i class="fa fa-external-link-alt"></i></span>等网站碰运气，看有没有人提交过存档。</p><h2 id="Google搜索"><a href="#Google搜索" class="headerlink" title="Google搜索"></a>Google搜索</h2><p>如果你还记得资料的名字或内容，可以将名字或文章中的一两句话用作Google搜索的关键词，查看网上是否还有转载与备份。有时虽然内容已删，但Google自己还留着一个快照，可以在快照失效之前尽快把内容导出来。</p><h2 id="专项计划"><a href="#专项计划" class="headerlink" title="专项计划"></a>专项计划</h2><p>有些网站会专门搜集容易遭到删除，甚至已经遭到删除的信息</p><ul><li><span class="exturl" data-url="aHR0cHM6Ly9jaGluYWRpZ2l0YWx0aW1lcy5uZXQvY2hpbmVzZS8=">中国数字时代<i class="fa fa-external-link-alt"></i></span>：该网站由加州大学伯克利分校信息学院“逆权力实验室”（Counter-Power Lab）提供技术支持，重点关注中国的言论审查，每天会收集一些媒体与自媒体等方面的时政类内容。有时可以在该网站找到一些已经在中国被全网删除的内容或言论。</li><li><span class="exturl" data-url="aHR0cHM6Ly9mcmVld2VpYm8uY29tLw==">自由微博<i class="fa fa-external-link-alt"></i></span>：该网站会专门搜集已经遭到屏蔽的微博内容。</li><li><span class="exturl" data-url="aHR0cHM6Ly9mcmVld2VjaGF0LmNvbS8=">自由微信<i class="fa fa-external-link-alt"></i></span>：该网站专门搜集已经遭到屏蔽的微信公众号内容。</li><li><span class="exturl" data-url="aHR0cHM6Ly90ZXJtaW51czIwNDkuZ2l0aHViLmlvLw==">端点星计划<i class="fa fa-external-link-alt"></i></span>：该网站通过GitHub搭建，也是专门搜集微博微信被删内容的网站。</li></ul><h1 id="分享存档"><a href="#分享存档" class="headerlink" title="分享存档"></a>分享存档</h1><p>如果想做点好事，可以在看到“404”资料还尚未删除时随手存个档，然后再把存档和原始出处（如果还没被404）分享出去，或者单纯地教会别人如何存档。分享时尽量放到有关部门管不到、中国人管不到、在中国也没有重要业务的外国平台，例如：</p><ul><li>普通内容：美国的Facebook、美国的Twitter、美国的Reddit、俄罗斯的VK（不过基本上都是俄国人在用）</li><li>音视频：美国的YouTube、德国的SoundCloud</li><li>文章：美国的Facebook、美国的Blogger、（从俄罗斯跑到）阿联酋的<span class="exturl" data-url="aHR0cHM6Ly90ZWxlZ3JhLnBo">Telegraph<i class="fa fa-external-link-alt"></i></span></li><li>图床（将图片上传上去，网站会生成一个可供分享的链接）：美国的Imgur</li><li>保存到网盘：美国的Dropbox、美国的Google Drive、新西兰的Mega</li><li>自建服务器：使用美国、韩国、日本等公司提供的资源<ul><li>想搞盗版的话得换个地方，找俄罗斯、荷兰、瑞典、保加利亚、罗马尼亚这类对版权管得松的国家</li><li>如果需求更特殊，例如“炼铜”（这个有<span class="exturl" data-url="aHR0cHM6Ly93d3cudW4ub3JnL2NoaW5lc2UvY2hpbGRyZW4vaXNzdWUvY3JjX29wMS5zaHRtbA==">国际公约<i class="fa fa-external-link-alt"></i></span>，基本上去哪里建服务器都算犯罪，包括北朝鲜），那么还是去暗网吧</li><li>建议不要自建服务器，一方面容易被黑，另一方面需要费心思持续运营，如果服务不靠谱，甚至“删库跑路”，会给自己与别人带来麻烦</li></ul></li><li>然后再借助（从俄罗斯跑到）阿联酋的Telegram、美国的Whatsapp、美国的Discord、美国的Signal、日本的LINE等聊天工具分享以上信息</li></ul><p>除了主流平台，还有些另类的点子，比方说上传到加拿大的黄网Pornhub——<span class="exturl" data-url="aHR0cHM6Ly9wb3JuaHViLmNvbS92aWV3X3ZpZGVvLnBocD92aWV3a2V5PXBoNWMwNDkxODk4NDgwZg==">张宇考研数学<i class="fa fa-external-link-alt"></i></span>、<span class="exturl" data-url="aHR0cHM6Ly9wb3JuaHViLmNvbS92aWV3X3ZpZGVvLnBocD92aWV3a2V5PXBoNWQ0NmI0YTYxZTQ3Zg==">怒斥港记<i class="fa fa-external-link-alt"></i></span>，或者上传到不属于任何国家的区块链——<span class="exturl" data-url="aHR0cHM6Ly9ldGhlcnNjYW4uaW8vdHgvMHgyZDZhN2IwZjZhZGVmZjM4NDIzZDRjNjJjZDhiNmNjYjcwOGRkYWQ4NWRhNWQzZDA2NzU2YWQ0ZDhhMDRhNmEy">北大岳昕公开信<i class="fa fa-external-link-alt"></i></span>——只要Hash还在，信息就永远不会被消失了。</p><p>虽然以上各渠道全都要翻墙，但是发到普通人进不去的地方总比在网上彻底消失强，对吧。</p><p>如果是敏感或违法信息，分享到外国平台时还要注意两个问题：</p><ol><li>不要暴露自己国内身份，以免被国内执法，或者被各类“低端网民”人肉骚扰。</li><li>不要违反目标网站所在国的法律，例如美国网站版权管得比较严格，不要跑美国网站上分享侵权的东西（特别是音视频），否则会被投诉删除。</li></ol><p>另外不要依赖单一途径。例如2020年12月美国的《纽约时报》<span class="exturl" data-url="aHR0cHM6Ly93d3cubnl0aW1lcy5jb20vMjAyMC8xMi8wNC9vcGluaW9uL3N1bmRheS9wb3JuaHViLXJhcGUtdHJhZmZpY2tpbmcuaHRtbA==">发表文章<i class="fa fa-external-link-alt"></i></span>批判加拿大的Pornhub，于是几天之内里面上千万影片都被Pornhub自己给下架了。尽管正常人不会在黄网保存重要内容，这仍是一个教训：外国正规大厂网站也是不靠谱的。</p><h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul><li>《<span class="exturl" data-url="aHR0cHM6Ly90ZWxlZ3JhLnBoLyVFNiU4RSVBOCVFOCU4RCU5MCVFOSU5OCU4NSVFOCVBRiVCQiVFNiU5NSVCMCVFNSVBRCU5NyVFNiU5RSU4MSVFNiU5RCU4MyVFNiU5NyVCNiVFNCVCQiVBMyVFNyU5NCU5RiVFNSVBRCU5OCVFNiU4OSU4QiVFOCVBRSVCMC12MTEtMTAtMjg=">数字极权时代生存手记<i class="fa fa-external-link-alt"></i></span>》</li><li>《<span class="exturl" data-url="aHR0cHM6Ly9ibG9nLnNodXppeWltaW4ub3JnLzM2MA==">如何找回被删除的网页/新闻<i class="fa fa-external-link-alt"></i></span>》</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;网上的东西很容易消失，而中国网站的东西更容易“404”（“被”消失）。虽然我们无法改变中国“404”的制度，但是我们仍然可以学习一些存档与找回存档的操作方法，养成随手存档的习惯，及时备份对自己有意义的内容，尽量降低损失。&lt;/p&gt;</summary>
    
    
    
    <category term="闲谈" scheme="https://plusnan.me/categories/%E9%97%B2%E8%B0%88/"/>
    
    
    <category term="archive" scheme="https://plusnan.me/tags/archive/"/>
    
  </entry>
  
</feed>
